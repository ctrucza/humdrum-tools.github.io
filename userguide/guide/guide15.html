

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Chapter15 &mdash; humdrum-tools 1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="humdrum-tools 1 documentation" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../../index.html">humdrum-tools 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Chapter15</a></li>
<li><a class="reference internal" href="#harmonic-intervals">Harmonic Intervals</a><ul>
<li><a class="reference internal" href="#types-of-harmonic-intervals">Types of Harmonic Intervals</a></li>
<li><a class="reference internal" href="#harmonic-intervals-using-the-hint-command">Harmonic Intervals Using the <em>hint</em> Command</a></li>
<li><a class="reference internal" href="#propagating-data-using-the-ditto-command">Propagating Data Using the <em>ditto</em> Command</a></li>
<li><a class="reference internal" href="#using-the-ditto-and-hint-commands">Using the <em>ditto</em> and <em>hint</em> Commands</a></li>
<li><a class="reference internal" href="#determining-implicit-harmonic-intervals">Determining Implicit Harmonic Intervals</a></li>
<li><a class="reference internal" href="#the-ydelta-command">The <em>ydelta</em> Command</a></li>
<li><a class="reference internal" href="#more-examples-using-the-ydelta-command">More Examples Using the <em>ydelta</em> Command</a></li>
<li><a class="reference internal" href="#reprise">Reprise</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/userguide/guide/guide15.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <img alt="" src="userguide/guide/../HumdrumIcon.gif" />
<img alt="Humdrum" src="userguide/guide/../HumdrumHeader.gif" />
<img alt="" src="userguide/guide/../HumdrumSpacer.gif" />
<div class="section" id="chapter15">
<h1>Chapter15<a class="headerlink" href="#chapter15" title="Permalink to this headline">¶</a></h1>
<p>[<a href="#id45"><span class="problematic" id="id46">`*Previous Chapter*`_</span></a>] [<a href="#id47"><span class="problematic" id="id48">`*Contents*`_</span></a>] [<a href="#id49"><span class="problematic" id="id50">`*Next Chapter*`_</span></a>]</p>
</div>
<hr class="docutils" />
<div class="section" id="harmonic-intervals">
<h1>Harmonic Intervals<a class="headerlink" href="#harmonic-intervals" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<p>In <a class="reference external" href="guide11.html">Chapter 11</a> we examined Humdrum tools related to melodic pitch
intervals. This chapter returns to the discussion of intervals by focussing
on two tools pertaining to characterizing harmonic intervals: the <a href="#id51"><span class="problematic" id="id52">`**hint**`_</span></a>
and <a href="#id53"><span class="problematic" id="id54">`**ydelta**`_</span></a> commands.</p>
<div class="section" id="types-of-harmonic-intervals">
<h2>Types of Harmonic Intervals<a class="headerlink" href="#types-of-harmonic-intervals" title="Permalink to this headline">¶</a></h2>
<p>Harmonic intervals identify pitch distances between nominally concurrently-
sounding notes. Example 15.1 illustrates five types of harmonic intervals.
The most obvious harmonic intervals are those that occur between pitches that
have concurrent onsets. We might call these <em>explicit harmonic intervals.</em> An
example of an explicit harmonic interval is the perfect octave in the first
sonority of Example 15.1</p>
<p><strong>Example 15.1</strong> Types of harmonic intervals.</p>
<p>&gt; .. image:: guide.figures/guide15.1.gif</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**kern**kern</span>
<span class="pre">&gt;</span> <span class="pre">``*M4/4*M4/4</span>
<span class="pre">&gt;</span> <span class="pre">``=1-=1-</span>
<span class="pre">&gt;</span> <span class="pre">``8c2cc</span>
<span class="pre">&gt;</span> <span class="pre">``8d.</span>
<span class="pre">&gt;</span> <span class="pre">``4e.</span>
<span class="pre">&gt;</span> <span class="pre">``8f8r</span>
<span class="pre">&gt;</span> <span class="pre">``8r8a</span>
<span class="pre">&gt;</span> <span class="pre">``8d8r</span>
<span class="pre">&gt;</span> <span class="pre">``8r8b</span>
<span class="pre">&gt;</span> <span class="pre">``=2=2</span>
<span class="pre">&gt;</span> <span class="pre">``2.c</span> <span class="pre">2.e2.g</span> <span class="pre">2.cc</span>
<span class="pre">&gt;</span> <span class="pre">``*-*-</span></tt></p>
<p>Less obvious harmonic intervals arise when tone onsets are not synchronous &#8211;
yet both pitches are sustained simultaneously for a period of time. We might
call these <em>passing harmonic intervals.</em> Two examples are evident in Example
15.1: the minor seventh between the D and the sustained C, and the minor
sixth between E and C. Most music theorists would argue that the minor sixth
interval is more important than the minor seventh. Compared with the D, the
following E has a longer duration and coincides with a stronger metrical
position. Hence the interval of the minor sixth is likely to be more
perceptually salient than the minor seventh interval. We might call these
intervals <em>strong passing intervals</em> and <em>weak passing intervals</em>
respectively.</p>
<p>Another type of harmonic interval may be deemed to occur even when there are
no concurrently sounding pitches. In Example 15.1, the alternating F-&gt;A and
D-&gt;B imply subdominant and dominant harmonic functions and so suggest the
intervals of a major third followed by a major sixth. We might call these
intervals <em>implicit harmonic intervals.</em> The harmonic status of the pitch
sequence A-&gt;D is more contentious; many theorists would argue that no
harmonic interval is implied either because of the weak-&gt;strong metric
relationship or because the harmonic interval is less stereotypic of the
given the cadential cliche. Once again, implicit harmonic intervals might be
distinguished as weak or strong.</p>
<p>A further complication in identifying harmonic intervals arises when there
are more than two pitches involved. In the final four-note chord of Example
15.1, what harmonic intervals are implied? Example 15.2 shows three possible
break-downs of the harmonic relationships. <em>Stacked harmonic intervals</em>
include only the intervals between successive pitches ordered from low to
high. Four pitches thus generate three intervals. <em>Bass-related harmonic
intervals</em> include all intervals calculated with respect to the lowest pitch.
Four pitches again leads to three (different) intervals. This latter way of
characterizing intervals is the most similar to figured bass notation.
<em>Permuted harmonic intervals</em> include all intervals that can be calculated
between all notes of a sonority. Four pitches leads to six intervals.</p>
<p><strong>Example 15.2</strong> Interpreting Interval Content in Chords
.. image:: guide.figures/guide15.2.gif</p>
<p>&gt; Stacked IntervalsBass-related IntervalsPermuted Intervals</p>
<p>A final issue in characterizing harmonic intervals is whether or not the
presence of unisons is important. In most applications (such as figured bass)
the presence of unisons is unimportant. In other applications (such as
tabulating instrument doubling in orchestration) the occurrence of unisons is
noteworthy.</p>
<p>By way of summary, we have distinguished five types of harmonic intervals,
and three measurement methods: explicit harmonic intervals, implicit harmonic
intervals (both strong and weak), plus passing harmonic intervals (again both
strong and weak varieties). Measurement methods include (1) stacked harmonic
intervals, (2) bass-related harmonic intervals, and (3) permuted harmonic
intervals.</p>
<p>As in the case of melodic intervals, harmonic intervals can be calculated
according to a variety of units &#8211; including diatonic intervals, semitones,
cents, frequency, and even cochlear coordinates. We will consider just two
tools for calculating harmonic intervals: <strong>hint</strong> and <strong>ydelta.</strong></p>
</div>
<div class="section" id="harmonic-intervals-using-the-hint-command">
<h2>Harmonic Intervals Using the <em>hint</em> Command<a class="headerlink" href="#harmonic-intervals-using-the-hint-command" title="Permalink to this headline">¶</a></h2>
<p>The Humdrum <a href="#id55"><span class="problematic" id="id56">`**hint**`_</span></a> command calculates harmonic intervals for pitch-
related representations such as <a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id57"><span class="problematic" id="id58">`**kern```_</span></a>, <a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id59"><span class="problematic" id="id60">`**pitch```_</span></a>,
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id61"><span class="problematic" id="id62">`**solfg```_</span></a>, and <a href="#id7"><span class="problematic" id="id8">``</span></a><a href="#id63"><span class="problematic" id="id64">`**Tonh```_</span></a>. As in the case of the <strong>mint</strong> command,
output intervals are expressed as a combination of diatonic interval size
plus interval quality (such as <a href="#id9"><span class="problematic" id="id10">`</span></a>perfect fourth&#8217; and <a href="#id11"><span class="problematic" id="id12">`</span></a>minor ninth&#8217;).</p>
<p>In the default operation, <strong>hint</strong> calculates only explicit harmonic
intervals; for sonorities containing more than two pitches, only stacked
harmonic intervals are calculated. The output from the <strong>hint</strong> command
always consists of a single <a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id65"><span class="problematic" id="id66">`**hint```_</span></a> spine. Any number of spines may be
present in the input, but only pitch-related spines are processed. Given the
default invocation, the output corresponding to Example 15.1 is as follows:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**hint</span>
<span class="pre">&gt;</span> <span class="pre">``*M4/4</span>
<span class="pre">&gt;</span> <span class="pre">``=1-</span>
<span class="pre">&gt;</span> <span class="pre">``P8</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``=2</span>
<span class="pre">&gt;</span> <span class="pre">``M3</span> <span class="pre">m3</span> <span class="pre">P4</span>
<span class="pre">&gt;</span> <span class="pre">``*-</span></tt></p>
<p>Notice that sonorities that contain only a single pitch result in the
outputting of a hyphen (<tt class="docutils literal"><span class="pre">-</span></tt>). The hyphen indicates that pitched material is
present, but there are no explicit harmonic intervals. Input records that
contain no pitch tokens result in the outputting of a null token (.). If a
single duplicated pitch is present, then the output will indicate a perfect
unison (P1).  Unisons can be suppressed from the output via the <strong>-u</strong> option
for <strong>hint</strong>.</p>
<p>When more than two pitches are present in a sonority, <em>permuted harmonic
intervals</em> can be calculated by invoking the <strong>-a</strong> option (i.e. <em>all</em>
intervals). For example, with the <strong>-a</strong> option, the final chord in Example
15.1 would produce the following output:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**hint</span>
<span class="pre">&gt;</span> <span class="pre">``*all</span>
<span class="pre">&gt;</span> <span class="pre">``M3</span> <span class="pre">P5</span> <span class="pre">P8</span> <span class="pre">m3</span> <span class="pre">m6</span> <span class="pre">P4</span>
<span class="pre">&gt;</span> <span class="pre">``*-</span></tt></p>
<p>Notice the presence of the <tt class="docutils literal"><span class="pre">*all</span></tt> tandem interpretation in the above
output. This interpretation is added to the output in order to warn users
that the representation should not be interpreted as stacked intervals.</p>
<p><em>Bass-related harmonic intervals</em> can be calculated with the <strong>-l</strong> option.
In this case, harmonic intervals are calculated with respect to the lowest
pitch in the sonority. This option is helpful in determining figured bass.
For the final chord in Example 12.1 the corresponding output would be</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**hint</span>
<span class="pre">M3</span> <span class="pre">P5</span> <span class="pre">P8</span>
<span class="pre">*-</span></tt></p>
<p>Two further options for <strong>hint</strong> allow the user to tailor how the intervals
are represented. The <strong>-c</strong> option causes compound intervals such as a minor
tenth (m10) to be output as non-compound equivalents (m3). This means that
the interval of an octave (P8) will be rendered as a unison (P1). The <strong>-d</strong>
option suppresses the outputting of interval qualities and results in only
diatonic interval sizes being output. Again, this option is helpful in
determining figured bass. The command:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">hint</span> <span class="pre">-clud</span></tt></p>
<p>will produce the following output for the final major chord in Example 12.1:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**hint</span>
<span class="pre">3</span> <span class="pre">5</span>
<span class="pre">*-</span></tt></p>
</div>
<div class="section" id="propagating-data-using-the-ditto-command">
<h2>Propagating Data Using the <em>ditto</em> Command<a class="headerlink" href="#propagating-data-using-the-ditto-command" title="Permalink to this headline">¶</a></h2>
<p>In the default operation, <strong>hint</strong> calculates intervals only between pitches
that are explicitly present in an input data record. This means that passing
intervals are not calculated.</p>
<p>In order to generate passing intervals, we will make use of the Humdrum
<a href="#id67"><span class="problematic" id="id68">`**ditto**`_</span></a> command. The <strong>ditto</strong> command replaces null tokens with the
previous non-null data token in the same spine. Suppose we had an arbitrary
input such as the following:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**flip**flop</span>
<span class="pre">&gt;</span> <span class="pre">``Axyz</span>
<span class="pre">&gt;</span> <span class="pre">``.jkl</span>
<span class="pre">&gt;</span> <span class="pre">``..</span>
<span class="pre">&gt;</span> <span class="pre">``Babc</span>
<span class="pre">&gt;</span> <span class="pre">``..</span>
<span class="pre">&gt;</span> <span class="pre">``C.</span>
<span class="pre">&gt;</span> <span class="pre">``..</span>
<span class="pre">&gt;</span> <span class="pre">``*-*-</span></tt></p>
<p>The effect of <strong>ditto</strong> would be the following:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**flip**flop</span>
<span class="pre">&gt;</span> <span class="pre">``Axyz</span>
<span class="pre">&gt;</span> <span class="pre">``Ajkl</span>
<span class="pre">&gt;</span> <span class="pre">``Ajkl</span>
<span class="pre">&gt;</span> <span class="pre">``Babc</span>
<span class="pre">&gt;</span> <span class="pre">``Babc</span>
<span class="pre">&gt;</span> <span class="pre">``Cabc</span>
<span class="pre">&gt;</span> <span class="pre">``Cabc</span>
<span class="pre">&gt;</span> <span class="pre">``*-*-</span></tt></p>
<p>Each null token has been replaced by the preceding data token within the
spine.</p>
<p>Consider the effect of <strong>ditto</strong> on the <tt class="docutils literal"><span class="pre">**kern</span></tt> data in Example 15.1:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">ditto</span> <span class="pre">-p</span> <span class="pre">example15.1</span></tt></p>
<p>The following output results:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**kern**kern</span>
<span class="pre">&gt;</span> <span class="pre">``*M4/4*M4/4</span>
<span class="pre">&gt;</span> <span class="pre">``=1-=1-</span>
<span class="pre">&gt;</span> <span class="pre">``8c2cc</span>
<span class="pre">&gt;</span> <span class="pre">``8d(2cc)</span>
<span class="pre">&gt;</span> <span class="pre">``4e(2cc)</span>
<span class="pre">&gt;</span> <span class="pre">``8f8r</span>
<span class="pre">&gt;</span> <span class="pre">``8r8a</span>
<span class="pre">&gt;</span> <span class="pre">``8d8r</span>
<span class="pre">&gt;</span> <span class="pre">``8r8b</span>
<span class="pre">&gt;</span> <span class="pre">``=2=2</span>
<span class="pre">&gt;</span> <span class="pre">``2.c</span> <span class="pre">2.e2.g</span> <span class="pre">2.cc</span>
<span class="pre">&gt;</span> <span class="pre">``*-*-</span></tt></p>
<p>Notice that the half-note C5 has been repeated. The <strong>-p</strong> option has caused
each repetition of the data token to be placed in parentheses so they can be
easily recognized. By using <strong>ditto,</strong> we have transformed previously passing
intervals into explicit sonorities whose intervals can now be identified by
<strong>hint.</strong> We can combine the two commands in a single pipeline:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">ditto</span> <span class="pre">example15.1</span> <span class="pre">|</span> <span class="pre">hint</span></tt></p>
<p>The resulting output for Example 15.1 includes the two passing intervals (m7
and m6) in the first measure:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**hint</span>
<span class="pre">&gt;</span> <span class="pre">``*M4/4</span>
<span class="pre">&gt;</span> <span class="pre">``=1-</span>
<span class="pre">&gt;</span> <span class="pre">``P8</span>
<span class="pre">&gt;</span> <span class="pre">``m7</span>
<span class="pre">&gt;</span> <span class="pre">``m6</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``-</span>
<span class="pre">&gt;</span> <span class="pre">``=2</span>
<span class="pre">&gt;</span> <span class="pre">``M3</span> <span class="pre">m3</span> <span class="pre">P4</span>
<span class="pre">&gt;</span> <span class="pre">``*-</span></tt></p>
<p>The <a href="#id69"><span class="problematic" id="id70">`**ditto**,`_</span></a> command provides two additional options that are worthy of
note: the <strong>-s</strong> and <strong>-c</strong> options. The <strong>-s</strong> option allows <strong>ditto</strong> to
skip or ignore the presence of certain data records. Suppose, for example,
that we had a barline in the midst of some null tokens:</p>
<p>&gt; A
&gt; .
&gt; =
&gt; .</p>
<p>Often, we would like to propagate certain data tokens <em>around</em> some other
types of data tokens, so the result might be:</p>
<p>&gt; A
&gt; A
&gt; =
&gt; A</p>
<p>By providing <strong>ditto</strong> with a suitable regular expression, we can have the
data token <a href="#id15"><span class="problematic" id="id16">`</span></a>A&#8217; skip over the barline:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">^=</span></tt></p>
<p>Without this option, the final data token in the above example would be an
equals-sign rather than the token <a href="#id17"><span class="problematic" id="id18">`</span></a>A&#8217;.</p>
<p>The <strong>-c</strong> option for <strong>ditto</strong> allows the user to selectively identify which
characters are propagated. For example, the following command will cause only
the lower-case letters <a href="#id19"><span class="problematic" id="id20">`</span></a>a&#8217; and <a href="#id21"><span class="problematic" id="id22">`</span></a>b&#8217; to be propagated:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">ditto</span> <span class="pre">-c</span> <span class="pre">ab</span></tt></p>
<p>This feature allows users to replicate only certain kinds of data &#8211; such as
pitches, durations, dynamic marks, etc.</p>
<p>As we will see in future chapters, the <strong>ditto</strong> command proves useful in a
wide variety of situations apart from calculating intervals.</p>
</div>
<div class="section" id="using-the-ditto-and-hint-commands">
<h2>Using the <em>ditto</em> and <em>hint</em> Commands<a class="headerlink" href="#using-the-ditto-and-hint-commands" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s pause and consider some of the ways we might use the <strong>ditto</strong> and
<strong>hint</strong> commands. First, let&#8217;s determine if some input contains a particular
interval. Are there any augmented sixth intervals in Bach&#8217;s two-part
inventions? The following commands look for explicit and passing sixths
respectively. Notice the use of the <strong>-c</strong> option so octave equivalents will
also be identified:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">hint</span> <span class="pre">-c</span> <span class="pre">inventio*</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">A6</span></tt>
<tt class="docutils literal"><span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">^=</span> <span class="pre">inventio*</span> <span class="pre">|</span> <span class="pre">hint</span> <span class="pre">-c</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">A6</span></tt></p>
<p>Are there any diminished octave intervals between any two concurrent notes in
any of Beethoven&#8217;s piano sonatas?</p>
<p>&gt; <tt class="docutils literal"><span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">^=</span> <span class="pre">sonatas*</span> <span class="pre">|</span> <span class="pre">hint</span> <span class="pre">-a</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">d8</span></tt></p>
<p>In orchestral works, some pairs of instruments are more likely than others to
double each other at the unison or octave. What proportion of the intervals
formed by the oboe and flute notes are doubled? Since we are looking for a
proportion, we need to make two counts: the total number of (explicit)
intervals formed by the oboe and flute, and the number of those intervals
that are octave equivalents. (We will assume that there is only one oboe and
one flute part in the file <tt class="docutils literal"><span class="pre">Rimsky-K</span></tt>:)</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'*Ioboe,*Iflts'</span> <span class="pre">Rimsky-K</span> <span class="pre">|</span> <span class="pre">hint</span> <span class="pre">-c</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-c</span> <span class="pre">P1</span></tt>
&gt;
&gt;
<tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'*Ioboe,*Iflts'</span> <span class="pre">Rimsky-K</span> <span class="pre">|</span> <span class="pre">hint</span> <span class="pre">-c</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-c</span> <span class="pre">[MmPAd]</span></tt></p>
<p>The second <strong>grep</strong> counts the total number of intervals by looking for all
of the interval qualities (major, minor, perfect, etc.)</p>
<p>Suppose we have extracted two horn parts from an orchestral score. Are octave
intervals between the horns more likely to occur on the dominant pitch or the
tonic pitch?</p>
<p>&gt; <tt class="docutils literal"><span class="pre">solfa</span> <span class="pre">horns</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
<tt class="docutils literal"><span class="pre">hint</span> <span class="pre">horns</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt>
<tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">temp1</span> <span class="pre">temp2</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-c</span> <span class="pre">^do.*P8</span></tt>
<tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">temp1</span> <span class="pre">temp2</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-c</span> <span class="pre">^so.*P8</span></tt></p>
</div>
<div class="section" id="determining-implicit-harmonic-intervals">
<h2>Determining Implicit Harmonic Intervals<a class="headerlink" href="#determining-implicit-harmonic-intervals" title="Permalink to this headline">¶</a></h2>
<p>Recall that <em>implicit harmonic intervals</em> may be deemed to occur between
tones that don&#8217;t actually sound at the same time. This arises when one part
has a rest while the other part is sounding. Note that if we could eliminate
rest tokens, then we could use <strong>ditto</strong> to repeat previous pitch tokens in
place of the rests and so generate implicit harmonic intervals.</p>
<p>The <a href="#id71"><span class="problematic" id="id72">`**humsed**`_</span></a> command (described in <a href="#id73"><span class="problematic" id="id74">`Chapter 14`_</span></a>) is well suited to this
task. We want to transform any data token containing the letter <a href="#id23"><span class="problematic" id="id24">`</span></a>r&#8217; to a null
token. Consider the following substitution:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">humsed</span> <span class="pre">'s/.*r.*/.</span> <span class="pre">./'</span> <span class="pre">example15.1</span></tt></p>
<p>Unfortunately, this isn&#8217;t quite right. The above substitution will find any
data record containing the letter <a href="#id25"><span class="problematic" id="id26">`</span></a>r&#8217; and transform the entire record to a
single null data record. We need to address individual data tokens. In this
example, rest tokens may be in two possible positions: the first token in the
record or the last token in the record. We need two different regular
expressions to address each of these conditions. First, a regular expression
to identify rests in the first token:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">/^[^</span> <span class="pre">]*r[^</span> <span class="pre">]*</span> <span class="pre">/</span></tt></p>
<p>(That is, the beginning of the record (^), followed by zero or more instances
of any character other than a tab ([^ ]*), followed by the letter <a href="#id27"><span class="problematic" id="id28">`</span></a>r&#8217;,
followed by zero or more instances of any character other than a tab ([^ ]*),
followed by a tab.)</p>
<p>Similarly, our second regular expression identifies rests in the last token:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">/</span> <span class="pre">[^</span> <span class="pre">]*r[^</span> <span class="pre">]*$/</span></tt></p>
<p>Now we can eliminate rest tokens using the following two substitution
commands within a single invocation of <strong>humsed</strong>:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">humsed</span> <span class="pre">'s/^[^</span> <span class="pre">]*r[^</span> <span class="pre">]*</span> <span class="pre">/.</span> <span class="pre">/;</span> <span class="pre">s/</span> <span class="pre">[^</span> <span class="pre">]*r[^</span> <span class="pre">]*$/</span> <span class="pre">./'</span> <span class="pre">example15.1</span></tt></p>
<p>The following output results:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**kern**kern</span>
<span class="pre">&gt;</span> <span class="pre">``*M4/4*M4/4</span>
<span class="pre">&gt;</span> <span class="pre">``=1-=1-</span>
<span class="pre">&gt;</span> <span class="pre">``8c2cc</span>
<span class="pre">&gt;</span> <span class="pre">``8d.</span>
<span class="pre">&gt;</span> <span class="pre">``4e.</span>
<span class="pre">&gt;</span> <span class="pre">``8f.</span>
<span class="pre">&gt;</span> <span class="pre">``.8a</span>
<span class="pre">&gt;</span> <span class="pre">``8d.</span>
<span class="pre">&gt;</span> <span class="pre">``.8b</span>
<span class="pre">&gt;</span> <span class="pre">``=2=2</span>
<span class="pre">&gt;</span> <span class="pre">``2.c</span> <span class="pre">2.e2.g</span> <span class="pre">2.cc</span>
<span class="pre">&gt;</span> <span class="pre">``*-*-</span></tt></p>
<p>If we now apply <a href="#id75"><span class="problematic" id="id76">`**ditto**`_</span></a> and recalculate the intervals, the resulting
output will identify some implicit intervals as well:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">humsed</span> <span class="pre">'s/^[^</span> <span class="pre">]*r[^</span> <span class="pre">]*</span> <span class="pre">/.</span> <span class="pre">/;</span> <span class="pre">s/</span> <span class="pre">[^</span> <span class="pre">]*r[^</span> <span class="pre">]*$/</span> <span class="pre">./'</span> <span class="pre">example15.1</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-p</span></tt></p>
<p>Below we see the output assembled with the output from the corresponding
<a href="#id77"><span class="problematic" id="id78">`**hint**`_</span></a> command:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**kern**kern**hint</span>
<span class="pre">&gt;</span> <span class="pre">``*M4/4*M4/4*M4/4</span>
<span class="pre">&gt;</span> <span class="pre">``=1-=1-=1-</span>
<span class="pre">&gt;</span> <span class="pre">``8c2ccP8</span>
<span class="pre">&gt;</span> <span class="pre">``8d(2cc)m7</span>
<span class="pre">&gt;</span> <span class="pre">``4e(2cc)m6</span>
<span class="pre">&gt;</span> <span class="pre">``8f(2cc)P5</span>
<span class="pre">&gt;</span> <span class="pre">``(8f)8aM3</span>
<span class="pre">&gt;</span> <span class="pre">``8d(8a)P5</span>
<span class="pre">&gt;</span> <span class="pre">``(8d)8bM6</span>
<span class="pre">&gt;</span> <span class="pre">``=2=2=2</span>
<span class="pre">&gt;</span> <span class="pre">``2.c</span> <span class="pre">2.e2.g</span> <span class="pre">2.ccM3</span> <span class="pre">m3</span> <span class="pre">P4</span>
<span class="pre">&gt;</span> <span class="pre">``*-*-*-</span></tt></p>
</div>
<div class="section" id="the-ydelta-command">
<h2>The <em>ydelta</em> Command<a class="headerlink" href="#the-ydelta-command" title="Permalink to this headline">¶</a></h2>
<p>Often it is useful to represent intervals by the number of semitones (or some
other numerical value). We might begin by using the <strong>semits</strong> command to
translate Example 15.1 to a <a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id79"><span class="problematic" id="id80">`**semits```_</span></a> representation.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">semits</span> <span class="pre">example15.1</span></tt></p>
<p>The resulting output would be as follows:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**semits**semits</span>
<span class="pre">&gt;</span> <span class="pre">``*M4/4*M4/4</span>
<span class="pre">&gt;</span> <span class="pre">``=1-=1-</span>
<span class="pre">&gt;</span> <span class="pre">``012</span>
<span class="pre">&gt;</span> <span class="pre">``2.</span>
<span class="pre">&gt;</span> <span class="pre">``4.</span>
<span class="pre">&gt;</span> <span class="pre">``5r</span>
<span class="pre">&gt;</span> <span class="pre">``r9</span>
<span class="pre">&gt;</span> <span class="pre">``2r</span>
<span class="pre">&gt;</span> <span class="pre">``r11</span>
<span class="pre">&gt;</span> <span class="pre">``=2=2</span>
<span class="pre">&gt;</span> <span class="pre">``0</span> <span class="pre">47</span> <span class="pre">12</span>
<span class="pre">&gt;</span> <span class="pre">``*-*-</span></tt></p>
<p>Numerical differences for values on a single data record can be computed
using the <a href="#id81"><span class="problematic" id="id82">`**ydelta**`_</span></a> command. The <strong>ydelta</strong> command is comparable to
<a href="#id83"><span class="problematic" id="id84">`**xdelta**,`_</span></a> however, numerical differences are calculated between
simultaneous numerical values (delta-<em>y</em>) rather than between successive
numerical values (delta-<em>x</em>).</p>
<p>Like the <a href="#id85"><span class="problematic" id="id86">`**hint**`_</span></a> command, <strong>ydelta</strong> always outputs a single spine. The
user must specify which input spines are to be processed using the <strong>-i</strong>
option. In the following command, only <a href="#id31"><span class="problematic" id="id32">**</span></a>semits input is to be processed:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">semits</span> <span class="pre">example15.1</span> <span class="pre">|</span> <span class="pre">ydelta</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">-i</span> <span class="pre">'**semits'</span></tt></p>
<p>The <strong>-s</strong> option allows the user to identify data records to be <em>skipped</em>
while processing. In this case, the regular expression <a href="#id33"><span class="problematic" id="id34">`</span></a>=&#8217; is used to
identify barlines, so measure numbers will be excluded when processing the
numerical data.</p>
<p>The above command yields the following output:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**Ysemits</span>
<span class="pre">&gt;</span> <span class="pre">``*</span>
<span class="pre">&gt;</span> <span class="pre">``=1-</span>
<span class="pre">&gt;</span> <span class="pre">``12</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``=2</span>
<span class="pre">&gt;</span> <span class="pre">``4</span> <span class="pre">7</span> <span class="pre">12</span>
<span class="pre">&gt;</span> <span class="pre">``*-</span></tt></p>
<p>Notice that <strong>ydelta</strong> prepends the upper-case letter <cite>Y&#8217; to the given input
interpretation. All output values are calculated with respect to the lowest
value in the current data record. Hence, the ```4 7 12`</cite> in the last data
record means that there are pitches 4 semitones above the lowest note, 7
semitones above the lowest note, and 12 semitones above the lowest note. (If
necessary, the lowest or offset value for each record can be output in square
brackets using the <strong>-o</strong> option.)</p>
<p>Like the <strong>hint</strong> command, <strong>ydelta</strong> calculates numerical intervals only
when more than one value is present on a given input data record. As in the
case of <strong>hint,</strong> we might use the <strong>ditto</strong> command to propagate pitch
values &#8211; replacing all the null data tokens. A suitable command would be:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">semits</span> <span class="pre">example15.1</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">|</span> <span class="pre">ydelta</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">-i</span> <span class="pre">'**semits'</span></tt></p>
<p>The resulting output would be:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**Ysemits</span>
<span class="pre">&gt;</span> <span class="pre">``*</span>
<span class="pre">&gt;</span> <span class="pre">``=1-</span>
<span class="pre">&gt;</span> <span class="pre">``12</span>
<span class="pre">&gt;</span> <span class="pre">``10</span>
<span class="pre">&gt;</span> <span class="pre">``8</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``.</span>
<span class="pre">&gt;</span> <span class="pre">``=2</span>
<span class="pre">&gt;</span> <span class="pre">``4</span> <span class="pre">7</span> <span class="pre">12</span>
<span class="pre">&gt;</span> <span class="pre">``*-</span></tt></p>
</div>
<div class="section" id="more-examples-using-the-ydelta-command">
<h2>More Examples Using the <em>ydelta</em> Command<a class="headerlink" href="#more-examples-using-the-ydelta-command" title="Permalink to this headline">¶</a></h2>
<p>What is the average semitone distance between the cantus and altus voices in
Lassus motets? We can answer this question by first extracting the
appropriate voices and translating to a semitone representation.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-f</span> <span class="pre">1,2</span> <span class="pre">motet*</span> <span class="pre">|</span> <span class="pre">semits</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt></p>
<p>Using <strong>ditto</strong> we can expand the pitched material so that concurrently-
sounding tones will generate explicit intervals. We then use <strong>ydelta</strong> to
calculate the actual semitone interval distances. The <a href="#id87"><span class="problematic" id="id88">`**rid**`_</span></a> command can
be used to eliminate non-data records, and the <strong>grep -v</strong> command can be
used to further eliminate barlines. Finally, we can calculate the mean
interval distance using the <strong>stats</strong> command:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">temp1</span> <span class="pre">|</span> <span class="pre">ydelta</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">-i</span> <span class="pre">'**semits'</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-v</span> <span class="pre">=</span> <span class="pre">|</span> <span class="pre">stats</span></tt></p>
<p>Suppose we have a two-part input. Are there tritone intervals (explicit and
passing) that are not spelled as either an augmented fourth or diminished
fifth? We can answer this question by using both <strong>hint</strong> and <strong>ydelta</strong> and
a suitable sequence of <strong>grep</strong> commands. The <strong>ditto</strong> command is used to
ensure that both explicit and passing intervals are generated.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">2part</span> <span class="pre">|</span> <span class="pre">semits</span> <span class="pre">|</span> <span class="pre">ydelta</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">-i</span> <span class="pre">'**semits'</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
<tt class="docutils literal"><span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">2part</span> <span class="pre">|</span> <span class="pre">hint</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt>
<tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">temp1</span> <span class="pre">temp2</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">^6</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-v</span> <span class="pre">A4</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-v</span> <span class="pre">d5</span></tt></p>
<p>Notice the use of <strong>grep -v</strong> to first exclude any records that match an
augmented fourth, and then to exclude any remaining records that match a
diminished fifth.</p>
</div>
<hr class="docutils" />
<div class="section" id="reprise">
<h2>Reprise<a class="headerlink" href="#reprise" title="Permalink to this headline">¶</a></h2>
<p>Harmonic intervals can be measured in a variety of ways. They can be
characterized as diatonic qualities such as minor sevenths or augmented
sixths. They can be measured in terms of semitone distance &#8211; or even in
cents or hertz (frequency difference). Only the diatonic size may be of
interest (e.g., &#8220;a fifth&#8221;), and compound intervals (e.g., major tenth) can be
expressed by their non-compound equivalents (major third).</p>
<p>At least five types of harmonic intervals can be distinguished including
<em>explicit harmonic intervals</em>, <em>strong passing intervals</em>, <em>weak passing
intervals</em>, <em>strong implicit harmonic intervals</em> and <em>weak implicit harmonic
intervals</em>. In addition, we distinguished three different ways of
characterizing harmonic intervals: <em>stacked harmonic intervals</em>, <em>bass-
related harmonic intervals</em> and <em>permuted harmonic intervals</em>.</p>
<p>In this chapter we have seen how to use the <a href="#id89"><span class="problematic" id="id90">`**hint**`_</span></a> command to calculate
these various kinds of intervals. We have also seen how <a href="#id91"><span class="problematic" id="id92">`**ydelta**`_</span></a> can be
used to measure purely numerical distances between concurrent values.</p>
<hr class="docutils" />
<ul class="simple">
<li>` <a href="#id35"><span class="problematic" id="id36">**</span></a>Next Chapter**`_</li>
<li>` <a href="#id37"><span class="problematic" id="id38">**</span></a>Previous Chapter**`_</li>
<li>` <a href="#id39"><span class="problematic" id="id40">**</span></a>Table of Contents**`_</li>
<li>` <a href="#id41"><span class="problematic" id="id42">**</span></a>Detailed Contents**`_</li>
</ul>
<ol class="upperalpha simple" start="3">
<li>Copyright 1999 David Huron</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../../index.html">humdrum-tools 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Humdrum Community.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>