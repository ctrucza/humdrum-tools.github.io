

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command: thmea &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../../"/>
        <link rel="up" title="Humdrum Command Manual" href="../"/>
        <link rel="next" title="Command: thru" href="../thru/"/>
        <link rel="prev" title="Command: text" href="../text/"/>
   <link rel="stylesheet" type"text/css" href="../../_static/humdrum.css">


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Humdrum Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../install/github/">Installing Humdrum Tools from GitHub</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guide/">The Humdrum User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch01/">1. Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch02/">2. Representing Music Using **kern (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch03/">3. Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch04/">4. Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch05/">5. The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch06/">6. Representing Music Using **kern (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch07/">7. MIDI Output Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch08/">8. The Shell (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch09/">9. Searching with Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch10/">10. Musical Uses of Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch11/">11. Melodic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch12/">12. Selecting Musical Parts and Passages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch13/">13. Assembling Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch14/">14. Stream Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch15/">15. Harmonic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch16/">16. The Shell (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch17/">17. Creating Inventories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch18/">18. Fingers, Footsteps and Frets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch19/">19. Musical Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch20/">20. Strophes, Verses, and Repeats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch21/">21. Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch22/">22. Classifying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch23/">23. Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch24/">24. The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch25/">25. Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch26/">26. Moving Signifiers Between Spines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch27/">27. Text and Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch28/">28. Dynamic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch29/">29. Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch30/">30.MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch31/">31. Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch32/">32. The Shell (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch33/">33. Word Sounds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch34/">34. Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch35/">35. Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch36/">33. Sound and Spectra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch37/">37. Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch38/">38. Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch39/">39. Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/ch40/">40. Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/bibliography/">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guide/sample.problems/">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../humextra/">Humdrum Extras</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/intro/">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/rhythm/">2. Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/melody/">Melody and Pitch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/harmony/">Harmony</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/data/">Data Entry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/searching/">Music Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/midi/">MIDI Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/notation/">Graphical Musical Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/other/">Other Useful Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/programming/">Programming Tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/vimHighlighting/">Syntax Coloring in Vim</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../">Humdrum Command Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../assemble/">Command: assemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../barks/">Command: barks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cbr/">Command: cbr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../census/">Command: census</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cents/">Command: cents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cleave/">Command: cleave</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cocho/">Command: cocho</a></li>
<li class="toctree-l2"><a class="reference internal" href="../context/">Command: context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correl/">Command: correl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deg/">Command: deg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../degree/">Command: degree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../diss/">Command: diss</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ditto/">Command: ditto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dur/">Command: dur</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ekern/">Command: ekern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../encode/">Command: encode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extract/">Command: extract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fade/">Command: fade</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fields/">Command: fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../freq/">Command: freq</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hint/">Command: hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../humdrum/">Command: humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../humsed/">Command: humsed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../humver/">Command: humver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../infot/">Command: infot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iv/">Command: iv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kern/">Command: kern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../key/">Command: key</a></li>
<li class="toctree-l2"><a class="reference internal" href="../melac/">Command: melac</a></li>
<li class="toctree-l2"><a class="reference internal" href="../melvel/">Command: melvel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metpos/">Command: metpos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../midi/">Command: midi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../midreset/">Command: midreset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mint/">Command: mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ms/">Command: ms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nf/">Command: nf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../num/">Command: num</a></li>
<li class="toctree-l2"><a class="reference internal" href="../patt/">Command: patt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pattern/">Command: pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pc/">Command: pc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pcset/">Command: pcset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perform/">Command: perform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pf/">Command: pf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pitch/">Command: pitch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proof/">Command: proof</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recode/">Command: recode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../record/">Command: record</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regexp/">Command: regexp</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reihe/">Command: reihe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rend/">Command: rend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rid/">Command: rid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scramble/">Command: scramble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semits/">Command: semits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simil/">Command: simil</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smf/">Command: smf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solfa/">Command: solfa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solfg/">Command: solfg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specc/">Command: specc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spect/">Command: spect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../strophe/">Command: strophe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../synco/">Command: synco</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tacet/">Command: tacet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/">Command: text</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Command: thmea</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thru/">Command: thru</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timebase/">Command: timebase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tonh/">Command: tonh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trans/">Command: trans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../urrhythm/">Command: urrhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../veritas/">Command: veritas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vox/">Command: vox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xdelta/">Command: xdelta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yank/">Command: yank</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ydelta/">Command: ydelta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#commands">Commands</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rep/">Humdrum Data Representations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../rep/barlines/">Representation: barlines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/IPA/">Representation: **IPA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/MIDI/">Representation: **MIDI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/Tonh/">Representation: **Tonh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/URrhythm/">Representation: **URrhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/Zeit/">Representation: **Zeit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/bhatk/">Representation: **bhatk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/cents/">Representation: **cents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/correl/">Representation: **correl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/dB/">Representation: **dB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/date/">Representation: **date</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/deg/">Representation: **deg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/degree/">Representation: **degree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/diss/">Representation: **diss</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/dur/">Representation: **dur</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/embel/">Representation: **embel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/freq/">Representation: **freq</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/fret/">Representation: **fret</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/harm/">Representation: **harm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/hildegard/">Representation: **hildegard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/hint/">Representation: **hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/iv/">Representation: **iv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/kern/">Representation: **kern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/melac/">Representation: **melac</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/metpos/">Representation: **metpos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/mint/">Representation: **mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/ordo/">Representation: **ordo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/pc/">Representation: **pc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/pcset/">Representation: **pcset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/pitch/">Representation: **pitch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/recip/">Representation: **recip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/semits/">Representation: **semits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/silbe/">Representation: **silbe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/simil/">Representation: **simil</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/solfa/">Representation: **solfa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/solfg/">Representation: **solfg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/specC/">Representation: **specC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/spect/">Representation: **spect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/synco/">Representation: **synco</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/takt/">Representation: **takt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/text/">Representation: **text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/time/">Representation: **time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/timebase/">Representation: **timebase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/vox/">Representation: **vox#</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../">Docs</a> &raquo;</li>
      
          <li><a href="../">Humdrum Command Manual</a> &raquo;</li>
      
    <li>Command: thmea</li>
      <li class="wy-breadcrumbs-aside">
        
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="command-thmea">
<h1>Command: thmea<a class="headerlink" href="#command-thmea" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<div class="section" id="themefinder-general-documentation">
<h2>Themefinder - General Documentation<a class="headerlink" href="#themefinder-general-documentation" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>This documentation describes utilities and procedures for constructing,
maintaining and augmenting the <em>themefinder</em> musical databases.</p>
<p><a class="reference external" href="http://www.themefinder.com">Themefinder</a> is a web-based application
that allows users to search for musical themes and incipits. Users may
search using a variety of search-keys, including pitch contour, scale
degree, date-of-composition, etc.</p>
<p>When a search is executed, a &#8220;results-page&#8221; is generated listing all of
the themes that match the search criterion. If more than 10 themes are
found, the results are distributed over two or more results-pages, with
10 themes presented on each page.</p>
<p>The results for each theme consist of a <em>text header</em> that reports basic
information such as composer and title, and a notational rendering
(displayed using a .gif image file). In addition, users can select the
[M] button which causes a MIDI sound (.mid) file to be downloaded for
listening. Also, a [I] button can be selected which causes a new page to
be displayed containing detailed reference information pertaining only
to one particular theme. This reference information is stored in a .inf
file.</p>
<div class="section" id="theme-files">
<h3>Theme Files<a class="headerlink" href="#theme-files" title="Permalink to this headline">¶</a></h3>
<p>Each theme is represented by a single <a class="reference external" href="../guide05.html">Humdrum</a>
file, designated with the &#8221;.thm&#8221; file extension. A theme file normally
contains a single <a class="reference external" href="../representations/kern.rep.html">**kern</a> spine
representing some theme or incipit. If more than one **kern spine is
present, only the left-most spine is used for searching purposes.</p>
<p>Other spines may be present in theme files, such as spines for encoding
lyrics/text (<a class="reference external" href="../representations/silbe.rep.html">**silbe</a>,
<a class="reference external" href="../representations/text.rep.html">**text</a>), harmonic function
(<a class="reference external" href="../representations/harm.rep.html">**harm</a>), or another other
information. Currently, such non-kern encodings are ignored by the
<em>themefinder</em> search engine, however future proposed extensions will
make use of such information. Users may view the complete Humdrum theme
file using the [H] links displayed on any search-results page.</p>
<p>Each theme file also contains a number of Humdrum <a class="reference external" href="../guide.append1.html">Reference
Records</a> that are used for bibliographic,
text, or reference-related searching. Theme files should minimally
contain reference records identifying the
<a class="reference external" href="../guide.append1.html#COM">composer</a> (!!!COM) and
<a class="reference external" href="../guide.append1.html#OTL">title</a> (!!!OTL). Additional reference
records are welcome and desireable. Global and local comments can also
be included, and are encouraged when they clarify aspects of the encoded
music.</p>
<p>A special reference-formating record (!!!ref) must be present in each
theme file. The purpose of this record is to instruct <em>themefinder</em> how
to format the header text which appears immediately above the notated
theme when displaying a search-results page. The following two headers
illustrate typical header texts:</p>
<blockquote>
<div><dl class="docutils">
<dt>Beethoven, Ludwig van, <em>Pathetique Sonata</em>, Opus 13, No. 1.</dt>
<dd>Anon. <em>Mrs. Brown&#8217;s Owl</em>, Traditional English Ballad.</dd>
</dl>
</div></blockquote>
<p>The format for a given theme header is specified by indexing other
reference information contained in the file. Consider, for example, the
following record:</p>
<blockquote>
<div>!!!ref: &#64;{COM}, &lt;i&gt;&#64;{OTL}&lt;/i&gt; (&#64;{XEN})</div></blockquote>
<p>This record indicates that the !!!COM (composer) information should be
displayed, followed by a comma, followed by a space, followed by the
original title (!!!OTL), followed by the English translation of the
title (if present) given in parentheses. The &lt;i&gt; ... &lt;/i&gt; surrounding
the original title is the HTML (hypertext markup language) code for
rendering text in italics &#8211; hence the title will appear italicized.</p>
</div>
<div class="section" id="istn-numbers">
<h3>ISTN Numbers<a class="headerlink" href="#istn-numbers" title="Permalink to this headline">¶</a></h3>
<p>Themefinder accesses themes by a numerical identifier called an Internal
Standard Theme Number (ISTN). An original theme file might be named
&#8220;webern31a.thm&#8221;, but this file is ultimately copied to something like
122293375723.thm. A single number is used to identify all of the
pertinent theme-related files. For example, the corresponding MIDI,
notational image, and reference information files would be named
122293375723.mid, 122293375723.gif and 122293375723.inf.</p>
<p>The main purpose of ISTN numbers is security. Since these files are
directly accessible to the world wide web, it is possible that someone
might attempt to retrieve and copy the entire database. The ISTN numbers
are intentionally very large, and randomly generated. Consequently, the
ISTN numbers are &#8220;sparse&#8221;: it is very unlikely that any given number
corresponds to an actual file. This means that automated web requests
for a particular numerical file are unlikely to fetch an actual file.
Multiple attempts to fetch many files will alert us to attempts at
database theft before a remote site is able to download many actual
files.</p>
<p>ISTN numbers are stored in the /themefinder/istn/allocation/ directory.
The file <em>free.istn</em> identifies randomly generated numbers that are
available for use. The file <em>used.istn</em> contains a list of numbers that
are already in use.</p>
</div>
<div class="section" id="adding-themes">
<h3>Adding Themes<a class="headerlink" href="#adding-themes" title="Permalink to this headline">¶</a></h3>
<p>In order to add themes to the themefinder database, the user must first
encode a Humdrum **kern file (.thm) for each individual theme or
incipit. From this original file, the user must generate three
additional file types: a notation image (.gif) file, a MIDI sound (.mid)
file, and a reference information (.inf) file. Detailed instructions for
generating each type of file are given below.</p>
<p>Themes are usually stored in groups called <em>collections</em>. An example of
a collection is the Essen Folksong Collection. Sometimes individual
theme files are added to an existing collection. Frequently, whole new
collections consisting of hundreds of themes are added. Each collection
is stored in a separate directory.</p>
<p>Themes are also classified according to <em>repertory</em>. Examples of
repertories included &#8220;classical&#8221; music, &#8220;folk&#8221; music, and &#8220;chant&#8221;. A
repertory may consist of several collections. Repertoires are used by
<em>themefinder</em> to limit the search to particular types of works.</p>
</div>
<div class="section" id="generating-image-files-gif">
<h3>Generating Image Files (.gif)<a class="headerlink" href="#generating-image-files-gif" title="Permalink to this headline">¶</a></h3>
<p>The notational images (.gif) files are generated via the Humdrum
<a class="reference external" href="ms.html">ms</a> command, which in turn makes use of the <em>Mup</em> music
typesetting utility. The <em>ms</em> command generates postscript output. A
further program (<em>ps2gif</em>) translates postscript files to gif, crops the
image to a suitable size, and makes the image transparent so any HTML
background can appear behind the notation.</p>
<p>Normally, the entire process of generating a .gif file is completely
automated (see below). That is, the user normally need not invoke the
<em>ms</em>, the <em>mup</em> or <em>ps2gif</em> commands. However, limitations in the <em>ms</em>
command often generate errors using <em>Mup</em>, and so some .gif files must
be produced manually. In this case, invoke the <em>ms</em> command with the
<em>-z</em> option so that an intermediate .mup file is generated. Edit this
file until it conforms fully to the Mup input syntax. Then use the <em>mup</em>
and <em>ps2gif</em> commands to generate an appropriate .gif file. For details,
refer to the documentation for the <a class="reference external" href="ms.html">ms command</a>.</p>
</div>
<div class="section" id="generating-information-files-inf">
<h3>Generating Information Files (.inf)<a class="headerlink" href="#generating-information-files-inf" title="Permalink to this headline">¶</a></h3>
<p>The info (.inf) files provide essential indexing information. A typical
info file is shown below:</p>
<blockquote>
<div><dl class="docutils">
<dt>&#64;START: INFO</dt>
<dd>&#64;THEME: albinoni-01-01
&#64;REPERTOIRE: classical
&#64;COLLECTION: lvh
&#64;ISTN: 122293375723
&#64;DESCRIPTION: Albinoni, Toaso Givanni: &lt;i&gt;Sonata 1&lt;/i&gt; Op. 1 No. 1
&#64;MOVEMENTSNS:
&#64;SINGLESNS:
&#64;WORKSNS:
&#64;COLLECTIONSNS: 122293375723 0596234234 23409234098243</dd>
</dl>
<p>234098230498234 23409834059345 5069243098534098 234098340598345
23049834059834</p>
<blockquote>
<div>[other themes that are related by collection]
&#64;LINKTHEME: [points to numbered files that contains web link to</div></blockquote>
<dl class="docutils">
<dt>this theme]</dt>
<dd>&#64;LINKMOVEMENT: [points to numbered files that contains web link to</dd>
<dt>this movement]</dt>
<dd>&#64;LINKWORK: [points to numbered files that contains web link to this</dd>
<dt>work]</dt>
<dd>&#64;LINKCOLLECTION: [points to numbered files that contains web link</dd>
<dt>to this collection]</dt>
<dd>&#64;END: INFO</dd>
</dl>
</div></blockquote>
<p>The &#64;THEME record identifies the name of the original theme file
(without the .thm extension). In the above case, the corresponding theme
file is <em>albinoni-01-01.thm</em>. The &#64;REPERTOIRE record identifies the
larger repertory to which the work belongs. As noted above, repertoires
are used by <em>themefinder</em> to limit the search to particular types of
works. The &#64;COLLECTION record identifies the <em>collection</em> to which the
theme belongs. The &#64;ISTN is the unique numerical identifier used by
<em>themefinder</em> to identify the particular theme. The &#64;DESCRIPTION record
holds the literal theme header (including HTML codes) that appears above
the notated theme when the search results are displayed.</p>
<p>The &#64;MOVEMENTSNS record is used to identify possible other themes that
may appear in a single movement; these are indicated using the ISTN
numbers for each theme. The &#64;SINGLESNS record is currently not used. It
is intended to identify single movement works. The &#64;WORKSNS record is
used to identify all themes in the same work &#8211; that is, all themes from
all movements.</p>
</div>
<div class="section" id="files">
<h3>FILES<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h3>
<p>Theme files are normally processed in groups (typically by
<em>collection</em>). Each collection is located under the main
/themefinder/collections directory. Examples of collections
subdirectories include /lmotet/ (Latin motets), /essen/ (Essen Folksong
Collection), /asm/ (Library of Congress, American Sheet Music
collection), and /densmore/ (Francis Densmore Native American music
collection).</p>
<p>Under each particular collection, there is a /source/ subdirectory which
contains all the Humdrum theme (.thm) files. Since collections typically
contain large numbers of themes, the /source/ directory is further
divided into alphabetized subdirectories (/a/, /b/, /c/, ... /z/). The
themes are distributed in these lettered subdirectories according to any
scheme the user chooses. For example, one might choose to order the
themes alphabetically by composer. The purpose is simply to avoid theme
source directories containing an unmanageable number of files.</p>
<p>Under each particular collection there is also an /info/ subdirectory
which contains all of the information (.inf) files. As in the case of
the /source/ directory, the /info/ directory contains alphabetized
subdirectories (/a/, /b/, etc.) whose purpose is (once again) to avoid
excessive numbers of files in a single directory. The directory
structure for /info/ duplicates exactly that for the /source/ directory.</p>
<p>Another subdirectory included for each collection is the /bib/
directory. This directory contains a series of files named <em>a.bib</em>,
<em>b.bib</em>, <em>c.bib</em>, etc. Each .bib file contains one record (line) for
each file in the corresponding /source/<em>n</em> directory. For example, if
/source/lvh/a contains 25 themes, then the file /source/bib/a.bib will
contain 25 lines. Each record in the .bib file begins with the ISTN
number, followed by a tab. All reference records in the theme file are
then appended, with each reference record separated by a tab. In other
words, all reference records for a single theme file are amalgamated and
placed on a single line &#8211; one line for each theme file. (Note that
single lines may contain several hundred characters.) E.g.</p>
<blockquote>
<div>020000000100
!!!COM: Albinoni, Tomaso Giovanni
etc.</div></blockquote>
<p>The .bib files are used when searching for reference-related information
using <em>grep</em>.</p>
<p>Yet another subdirectory included for each collection is the /istn/
directory. This directory contains a single file (all.istn). This file
is in the Humdrum format and consists of four spines: **repertory,
**collection, **theme, and **istn. Each data record pertains to a
single theme in the collection. The record specifies the repertory
assignment, the collection name, the file name for the original theme
file (minus the .thm extension), and the ISTN number. A sample file is
given below:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="26%" />
<col width="26%" />
<col width="23%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>**repertory</td>
<td>**collection</td>
<td>**theme</td>
<td>**istn</td>
</tr>
<tr class="row-even"><td>classical</td>
<td>lvh</td>
<td>albinoni-01-01</td>
<td>122293375723</td>
</tr>
<tr class="row-odd"><td>classical</td>
<td>lvh</td>
<td>albinoni-01-02</td>
<td>659146339995</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The following figure illustrates the overall directory structure.</p>
<p><img alt="image5" src="man/themefinder.gif" /></p>
<p>The following table again outlines the overall directory structure, and
also identifies the location of various special files and executables:</p>
<p>/themefinder/</p>
<p>/bin/</p>
<p><strong>randomid</strong><a class="reference external" href="#1">*</a></p>
<p>/istn/allocation/</p>
<p><em>free.istn</em> (numbers available for use)</p>
<p><em>used.istn</em> (numbers already in use)</p>
<p>/collections/</p>
<p>/bin - contains general software</p>
<p><strong>ps2gif</strong><a class="reference external" href="#2">*</a></p>
<p><strong>addistn2info</strong><a class="reference external" href="#3">*</a></p>
<p><strong>Make</strong><a class="reference external" href="#4">*</a></p>
<p>/pvh/ (ojibway)</p>
<p>/densmore/</p>
<p>/rsc (Reprint Services Corp.)</p>
<p>/lmotet (latin motets)</p>
<p>/essen (Essen)</p>
<p>/tonerow</p>
<p>/asm (American Sheet Music - Library of Congress)</p>
<p>/ccarh (musedata - doesn&#8217;t exist yet)</p>
<p>/source -contains theme directories</p>
<p>/a - subdirectories for a collection (arbitrary)</p>
<p><em>a1.thm, a2.thm, a3.thm</em> etc.</p>
<p>/b</p>
<p>/c</p>
<p>etc.</p>
<p>/bin -contains collection-specific software</p>
<p>/info contains .inf files</p>
<p>/a</p>
<p>/b</p>
<p>/c</p>
<p>/bib -contains bibliographica information</p>
<p>/<em>a.bib</em> (file) [see below for organization]</p>
<p>/<em>b.bib</em> (file)</p>
<p>/istn -contains a file (all.istn) that provides all of</p>
<p>the ISTN numbers and their corresponding file names [see below]</p>
<p>/links</p>
<p>/9</p>
<p>/0 e.g. 910052132800.lnk</p>
<p>/1</p>
<p>/2</p>
<p>/3</p>
<p>/4</p>
<p>etc.</p>
<p>[link numbers are generated by a combination of date/time of submission
and random numbers</p>
<p>/cache/w/x/y/z/wxzynnnnnnn</p>
<p>* <strong>randomid</strong> generates random numbers not beginning with 9 (which
indicates link ID) or 0 (unused) (this *CAN* generate duplicates of
existing numbers)</p>
<p>* <strong>ps2gif</strong> translates postscript files to gif; (1) makes the image
transparent (2) crops the image</p>
<p>* <strong>addistn2info</strong> adds a International Standard Theme Number to
makegifs</p>
<p>Within this directory are four files: nnnnnnnnnn.gif (notation gif file)
nnnnnnnnnn.inf (information file) nnnnnnnnnn.thm (humdrum theme file)
nnnnnnnnnn.mid (MIDI0 file) Within INFO FILE: [M] [W] [C] movement,
work, collection (appears on results page)
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;</p>
</div>
<div class="section" id="web-links">
<h3>Web Links<a class="headerlink" href="#web-links" title="Permalink to this headline">¶</a></h3>
<p>Themefinder provides opportunities for web-users to attach links from a
specific theme to a particular web page &#8211; anywhere on the world-wide
web. This allows, for example, a scholar who has written a web document
pertaining (say) to the Mozart Symphony 41, to provide a web links from
all of the pertinent themes to his/her web document.</p>
<p>Links are established by using a special HTML &#8220;links&#8221; form which is
accessed through the [L] button on the theme information page. When the
form is submitted, a link file is created, the syntax for which is
illustrated below.</p>
<div class="line-block">
<div class="line">&#64;START: ISTNLINK</div>
<div class="line-block">
<div class="line">&#64;ISLN: 911907212900</div>
<div class="line">&#64;ACTIVE: Y</div>
<div class="line">&#64;ISTN: 872686142687:728048740631:540326880199</div>
<div class="line">&#64;TITLE: Row forms in the serial works of Schoenberg, Berg, and We</div>
<div class="line">&#64;SCOPE: collection [could be &#8220;theme&#8221;, &#8220;work,&#8221; &#8220;collection&#8221; or</div>
</div>
</div>
<p>&#8220;movement&#8221;]
|  &#64;CATEGORY1: academic
|  &#64;CATEGORY2: <a class="reference external" href="data:humdrum">data:humdrum</a>
|  &#64;DESCRIPTION: All of the tone rows used in the serial works of
Schoenberg, Berg, and Webern. Theory students and scholars alike may
find these files a useful resource in their study of these works.
|  &#64;URL: <a class="reference external" href="http://www.ccarh.org/publications/data/humdrum/tonerow">http://www.ccarh.org/publications/data/humdrum/tonerow</a>
|  &#64;AUTHOR: Justin London (Paul von Hippel, ed.)
|  &#64;AUTHORURL:
|  &#64;CONTACTNAME: Paul von Hippel
|  &#64;CONTACTEMAIL: <a class="reference external" href="mailto:pvh&#37;&#52;&#48;ccrma&#46;stanford&#46;edu">pvh<span>&#64;</span>ccrma<span>&#46;</span>stanford<span>&#46;</span>edu</a>
|  &#64;SUBMITHOST: hummer.stanford.edu (171.64.197.204)
|  &#64;CONTROLMODIFICATION: N
|  &#64;PASSPHRASE: ccarh
|  &#64;CREATIONDATE: Tue Aug 29 21:07:19 2000
|  &#64;MODIFICATIONDATE: Tue Aug 29 21:07:19 2000
|  &#64;EXPIRATIONDATE:
|  &#64;QUALITY: 950
|  &#64;COMMENTS:
|  &#64;END: ISTNLINK</p>
<p>A submitted link generates a file in which is stored in the
/themefinder/links/submitted directory. As in the case of other
themefinder files, link filenames are assigned a large random number.
Link filenames always begins with the number 9. The number is generated
by a combination of date/time and random numbers.</p>
<p>When a submitted link is processed, the file is moved to the &#8220;process&#8221;
subdirectory, edited, and then the &#8220;make process&#8221; command is executed
from the &#8220;links&#8221; directory. This causes the modification of any
pertinent INFO file, and copies the submitted-link file to the link
storage directory (/9/ directory ). It also updates a list/all.lst file
which contains a list of all of the link files, ordered from oldest to
most recent submitted link. (This list is used in the
cgi-bin/themenewlinks script to allow viewing of the most recently added
links to themefinder. Click on &#8220;New Links&#8221; on the main web page.)</p>
</div>
</div>
<div class="section" id="how-to-build-a-themefinder-database">
<h2>How to Build a Themefinder Database<a class="headerlink" href="#how-to-build-a-themefinder-database" title="Permalink to this headline">¶</a></h2>
<p>Suppose we have 1,000 new themes that we have assembled or translated
from a donated database. We can generate the appropriate files and
integrate the themes in themefinder as follows.</p>
<p>Presuming that the themes warrant a new &#8220;collection&#8221; we would create a
new subdirectory under /collections/. E.g.</p>
<blockquote>
<div>mkdir /collections/ragtime</div></blockquote>
<p>Provide edited Humdrum files containing the themes. These files may
contain any Humdrum spines, but must contain a **kern spine. (Only the
first **kern spine is used in generating music-related indexes.) In
addition, create a serious of 26 alphabetic subdirectories and
distribute the files throughout these directories. (The distribution is
arbitrary.)</p>
<blockquote>
<div><dl class="docutils">
<dt>mkdir /collections/ragtime/a</dt>
<dd>mkdir /collections/ragtime/b
mkdir /collections/ragtime/c
etc.</dd>
</dl>
</div></blockquote>
<p>For a new collection, copy the &#8220;Makefile&#8221; from one of the existing
collections to the new collection: E.g.</p>
<blockquote>
<div>cp /collections/essen/Makefile /collections/ragtime</div></blockquote>
<p>Change to the /themefinder/istn directory and run the &#8220;make&#8221; command
(?Craig is this correction?). Make the ISTN index (/istn/all.istn) file,
getting free ISTN numbers from the
/themefinder/istn/allocation/free.istn. Remember to eliminate these
numbers from free.istn and copy them to used.istn.</p>
<p>Commands available with the makefile:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>img</strong>:</td>
<td>create gif image files with ms and convert.</td>
</tr>
<tr class="row-even"><td><strong>midi</strong>:</td>
<td>create the midifiles and directory from source.</td>
</tr>
<tr class="row-odd"><td><strong>info</strong>:</td>
<td>create the info files from the source files.</td>
</tr>
<tr class="row-even"><td><strong>bib</strong>:</td>
<td>create bibliographic database.</td>
</tr>
<tr class="row-odd"><td><strong>database</strong>:</td>
<td>create thema database.</td>
</tr>
<tr class="row-even"><td><strong>groupings</strong>:</td>
<td>edit info files and isnert grouping data.</td>
</tr>
<tr class="row-odd"><td><strong>clean</strong>:</td>
<td>remove all backup directories.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>make img - runs makegifs (which takes a kern file and generates a gif
file) i.e. runs mup; outputs are put in the /img directory results in
/img/a/nnnn.gif /img/b/nnnn.gif, etc. make midi - makes a directory
/midi results in /midi/a/nnnn.mid /midi/b/nnn.mid, etc. make info -
makes INFO file in the /info directory make bib - makes bib files (for
searching all reference records) make database - this calls themebuilder
to make the thema database make groupings - Before running this, you
must make a directory called &#8220;groups&#8221; which contains [see below] make
clean if an old versions already exists the make program automatically
copies the old director, e.g. /img becomes /img-old</p>
<p>Finally, set up the cache directories so everything is searchable. (The
cache directory contains simply links to the real locations for the .gif
.inf .mid and .thm files.)</p>
<blockquote>
<div>cd /themefinder/web/cache/istn</div></blockquote>
<p>new make command:</p>
<blockquote>
<div>make allinks: create symbolic links for all themes.</div></blockquote>
<p>or by individual collections, e.g.</p>
<blockquote>
<div><dl class="docutils">
<dt>make tonerow</dt>
<dd>make renaissance</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="is-used-to-search">
<h2>is used to search ...]<a class="headerlink" href="#is-used-to-search" title="Permalink to this headline">¶</a></h2>
<p>SAMPLE /istn/all.istn file **repertory **collection **theme
**istn classical lvh albinoni-01-01 122293375723 classical lvh
albinoni-01-02 659146339995
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;
SAMPLE grouping file /group/local/all.grp and /group/istn/all.grp (local
is what you type by hand; /group/istn is generated by another special
make command. BY HAND: c: alibinoi-01-01 albinoni-01-02 albinoni-01-03
albinoni-01-04 (all on single line; first letter can be c, w, or m
followed colon, followed by tab, followed by theme file names (sans
.thm) RESULTING &#8220;compiled&#8221; VERSION: (using a local make command)</p>
<p>c:</p>
<p>23409234098234</p>
<p>340598345098</p>
<p>2309234098</p>
<p>34509345098345</p>
<p>23409823409823</p>
<p>w:</p>
<p>23409234098234</p>
<p>230983409830</p>
<p>3450983450</p>
<p>34059834509345</p>
<p>58548494393504</p>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><a class="reference external" href="../commands.toc.html">**Index to Humdrum Commands**</a></li>
<li><a class="reference external" href="../guide.toc.html">**Table for Contents for Humdrum User Guide**</a></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Hi David,</p>
<p>The Themefinder description on the additional commands page is pretty
accurate. Here are the couple of statements I found that need
correcting/elaboration:</p>
<p>&gt; Also, a [I] button can be selected which causes a new page to &gt; be
displayed containing detailed reference information pertaining only &gt; to
one particular theme. This reference &gt; information is stored in a .inf
file.</p>
<p>.inf files only store Themefinder-specific maintenance records which are
generated automatically from other data and would look too ugly to place
into the .thm files. Instead, all available reference information on the
information page of a theme is stored in the original .thm file:</p>
<p>&gt;&gt; Also, a [I] button can be selected which causes a new page to &gt;&gt; be
displayed containing detailed reference information pertaining only &gt;&gt;
to one particular theme. This reference information is stored in the &gt;&gt;
.thm theme file.</p>
<hr class="docutils" />
<p>&gt; but this file is ultimately copied to something like 122293375723.thm.</p>
<p>This is somewhat true. There are two directory structures currently in
Themefinder: (1) for each independent collection of themes where the
names are preserved from the submitter, and (2) one enourmous file
structure with 11,111 directories, or so, which store symbolic links to
the real collection files.</p>
<p>Directory structure (2) is used by the web CGI-scripts to access the
themes in a uniform manner, but Directory structure (1) is used for
storage of the themes. It would be possible to distribute directory
structure (2) with the web CGI interface files in a portable fashion to
other computers for mirror websites of Themefinder.</p>
<hr class="docutils" />
<p>&gt; The main purpose of ISTN numbers is security.</p>
<p>A secondary purpose of ISTN numbers is to provided a uniform access to
independently named collection sets and allow possible interaction
between independent collection sets with an easier way of writing the
supporting code for theme access.</p>
<p>Hi David,</p>
<p>The Themefinder description on the additional commands page is pretty
accurate. Here are the couple of statements I found that need
correcting/elaboration:</p>
<p>&gt; Also, a [I] button can be selected which causes a new page to &gt; be
displayed containing detailed reference information pertaining only &gt; to
one particular theme. This reference &gt; information is stored in a .inf
file.</p>
<p>.inf files only store Themefinder-specific maintenance records which are
generated automatically from other data and would look too ugly to place
into the .thm files. Instead, all available reference information on the
information page of a theme is stored in the original .thm file:</p>
<p>&gt;&gt; Also, a [I] button can be selected which causes a new page to &gt;&gt; be
displayed containing detailed reference information pertaining only &gt;&gt;
to one particular theme. This reference information is stored in the &gt;&gt;
.thm theme file.</p>
<hr class="docutils" />
<p>&gt; but this file is ultimately copied to something like 122293375723.thm.</p>
<p>This is somewhat true. There are two directory structures currently in
Themefinder: (1) for each independent collection of themes where the
names are preserved from the submitter, and (2) one enourmous file
structure with 11,111 directories, or so, which store symbolic links to
the real collection files.</p>
<p>Directory structure (2) is used by the web CGI-scripts to access the
themes in a uniform manner, but Directory structure (1) is used for
storage of the themes. It would be possible to distribute directory
structure (2) with the web CGI interface files in a portable fashion to
other computers for mirror websites of Themefinder.</p>
<hr class="docutils" />
<p>&gt; The main purpose of ISTN numbers is security.</p>
<p>A secondary purpose of ISTN numbers is to provided a uniform access to
independently named collection sets and allow possible interaction
between independent collection sets with an easier way of writing the
supporting code for theme access.</p>
<p>Hi David,</p>
<p>Here is the outline of a set of guidelines for Themefinder maintenance
and theme collection additions to Themefinder that would be good to
generate:</p>
<ul class="simple">
<li>Section I is documentation to give out to prospective theme donors.</li>
<li>Section II is documentation on how to incorporate the themes into
Themefinder by the Themefinder staff.</li>
<li>Section III is other sorts of documentation not covered in Sections I
and II.</li>
</ul>
<p>I have written a draft of Section I for you to elaborate/expand on if
you like. John Howard might be interested in having this sort of
documentation.</p>
<p>Sometime soon I will go though adding a theme collection step-by-step
and describe the process in detail and accurately. The current web
documentation describes much of the process but would not be complete
for someone who hasn&#8217;t done the process.</p>
<p>And the left-over parts of the documentation not covered in sections I
and II can go into documentation tentatively outlined in section III.</p>
<p>I. Original Data Files A. Theme files 1. **kern data 2. Theme length
3. Bibliographic records 4. !!!ref: instruction B. Naming conventions C.
Theme group files D. Image files E. Conversion from other musical data
formats into Humdrum II. Installing Original Data Files into Themefinder
A. Creating the source directory B. Creating derivative representations
1. MIDI 2. graphical images C. Allocating ISTN values D. Creating
database indices 1. Thema database 2. Bibliographic database E.
Processing grouping files F. Creating info files G. Generating web
interface links III. web interface and maintenance technicalities A.
File access considerations 1. Namespaces 2. ISTN allocation 3. Directory
structures B. CGI scripts for user interface C. Session implementation
D. Filesystem constraints</p>
</div>
<div class="section" id="submitting-theme-collections-to-themefinder">
<h2>Submitting Theme Collections to Themefinder<a class="headerlink" href="#submitting-theme-collections-to-themefinder" title="Permalink to this headline">¶</a></h2>
<p>There are two general stages to adding themes to themefinder: (I)
creating theme files with musical and bibliographic data, as well as a
theme grouping file that contains relations between themes; and (II)
installing theme data files and generating supporting files.</p>
<ol class="upperroman">
<li><p class="first">Original Data Files</p>
<blockquote>
<div><ol class="upperalpha">
<li><p class="first">Theme files</p>
<blockquote>
<div><ol class="arabic simple">
<li>**kern data</li>
</ol>
<blockquote>
<div><ol class="arabic simple" start="2">
<li>Theme length</li>
<li>Bibliographic records</li>
<li>!!!ref: instruction</li>
</ol>
</div></blockquote>
</div></blockquote>
</li>
</ol>
<div class="line-block">
<div class="line">B. Naming conventions</div>
<div class="line-block">
<div class="line">C. Theme group files</div>
<div class="line">D. Image files</div>
<div class="line">E. Conversion from other musical data formats into Humdrum.</div>
</div>
</div>
</div></blockquote>
</li>
</ol>
<hr class="docutils" />
<div class="section" id="i-original-data-files">
<h3>I. Original Data Files.<a class="headerlink" href="#i-original-data-files" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="i-a-theme-files">
<h3>I.A. Theme files.<a class="headerlink" href="#i-a-theme-files" title="Permalink to this headline">¶</a></h3>
<p>Musical themes in the Themefinder database are stored one theme to a
file. The structure of the theme file is the standard Humdrum file
format with the first spine in the file being the thematic monophonic
music to be indexed for searching. This musical data is in the **kern
musical representation. Other spines may be present, such as lyrics,
neumatic notation, tone-row pitch classes, etc. Currently these
additional spines are ignored by the thema command which indexes the
musical data for searching purposes.</p>
<p>The length of the theme should nominally be one line of output produced
in the generation of the muscial score in section II.B.2. As a rule of
thumb, 30 notes fit well onto a single line. Also, about 4 measures of
4/4 meter consisting mostly of eighth-notes fits well onto one line. The
primary reason for this guideline is to have an clean aesethic to the
search result display. If the theme is longer than about 30 notes, then
you can currently:</p>
<ol class="arabic simple">
<li>not encode the rest of the theme.</li>
<li>place the rest of the theme in global comment records</li>
</ol>
<p>Another possibility would be to invent a tandem interpretation to mark
the end of the graphically displayed portion of the theme.</p>
<p>Here is an example theme encoded for Themefinder (Twinkle, Twinkle,
Little Star):</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>**kern</td>
</tr>
<tr class="row-even"><td>*clefG2</td>
</tr>
<tr class="row-odd"><td>*M4/4</td>
</tr>
<tr class="row-even"><td>*k[]</td>
</tr>
<tr class="row-odd"><td>*C:</td>
</tr>
<tr class="row-even"><td>4cc</td>
</tr>
<tr class="row-odd"><td>4cc</td>
</tr>
<tr class="row-even"><td>4gg</td>
</tr>
<tr class="row-odd"><td>4gg</td>
</tr>
<tr class="row-even"><td>=</td>
</tr>
<tr class="row-odd"><td>4aa</td>
</tr>
<tr class="row-even"><td>4aa</td>
</tr>
<tr class="row-odd"><td>2gg</td>
</tr>
<tr class="row-even"><td>=</td>
</tr>
<tr class="row-odd"><td>4ff</td>
</tr>
<tr class="row-even"><td>4ff</td>
</tr>
<tr class="row-odd"><td>4ee</td>
</tr>
<tr class="row-even"><td>4ee</td>
</tr>
<tr class="row-odd"><td>=</td>
</tr>
<tr class="row-even"><td>4dd</td>
</tr>
<tr class="row-odd"><td>4dd</td>
</tr>
<tr class="row-even"><td>2cc</td>
</tr>
<tr class="row-odd"><td>=</td>
</tr>
<tr class="row-even"><td>*-</td>
</tr>
</tbody>
</table>
<p>A complete themefile example can be found on the web, for example, at:
<a class="reference external" href="http://www.themefinder.org/cgi-bin/themeinfo?istn=168786577544&amp;type=humdrum">http://www.themefinder.org/cgi-bin/themeinfo?istn=168786577544&amp;type=humdrum</a></p>
<p>The key signature in the example above, &#8220;*k[]&#8221;, contains no sharps or
flats, and the theme is in C-major according to the tandem
interpretation &#8220;*C:&#8221;. In order for scale degree searches to be done in
themefinder, you must include the key of the theme which is a tandem
interpretation in the form &#8220;*C:&#8221; where C is the tonic note of the key,
and the case of the key determines the mode: uppercase for major, and
lowercase for minor. Examples: &#8220;*F#:&#8221; = F-sharp major, &#8220;*a-:&#8221; = a-flat
minor.</p>
<p>The time signature interpretation &#8220;*M4/4&#8221; is important for metrical
searches in themefinder. The clef indication is important for the
graphical display of the notation. Either treble or bass clefs are
preferred. Only use other clefs such as alto clef if the music fits much
better on that clef. Measure numbers can optionally be encoded with the
theme, but they are not used for searching or printing of the theme in
Themefinder.</p>
<p>In addition to the musical data, a theme file contains any type of
bibliographic records that are appropriate for the theme. A list of
standard Humdrum bibliographic records may be found at
<a class="reference external" href="http://dactyl.som.ohio-state.edu/Humdrum/guide.append1.html">http://dactyl.som.ohio-state.edu/Humdrum/guide.append1.html</a> . For the
above example, the title record would be:</p>
<blockquote>
<div>!!!OTL: Twinkle, Twinkle, Little Star</div></blockquote>
<p>You can also specify the language used in the bibliographic record by
adding a two character ISO marker for the language (such as EN for
English, DE for german, ES for spanish, FR for french). This language
encoding may be useful for future language display options in
Themefinder, but are currently not used:</p>
<blockquote>
<div><a class="reference external" href="mailto:!!!OTL&#37;&#52;&#48;EN">!!!OTL<span>&#64;</span>EN</a>: Twinkle, Twinkle, Little Star</div></blockquote>
<p>There is one bibliographic record which is required for application in
generating a short text entry for the theme in the search results pages:</p>
<blockquote>
<div>!!!ref:</div></blockquote>
<p>This record indicates what to display as identification for the theme on
the search results pages in Themefinder. Shorthand substitution patterns
of the form &#64;{XXX} are replaced with the contents of the bibliographic
record starting with the pattern !!!XXX: . All other characters in the
!!!ref: record will become part of the final text string:</p>
<blockquote>
<div>!!!ref: <em>&#64;{OTL}</em></div></blockquote>
<p>For the above example theme, will become:</p>
<blockquote>
<div><em>Twinkle, Twinkle, Little Star</em></div></blockquote>
<p>The <em>...</em> surrounding the title are the HTML codes for indicating an
italic font.</p>
</div>
<div class="section" id="i-b-theme-file-naming-conventions">
<h3>I.B. Theme file naming conventions.<a class="headerlink" href="#i-b-theme-file-naming-conventions" title="Permalink to this headline">¶</a></h3>
<p>Theme filenames within a collection being submitted should start with a
letter (a-z) and can be of any reasonable length. The file name ends
with the extension &#8221;.thm&#8221;. Allowable characters include lowercase
letters, numbers, the dash (-) and underscore (_).</p>
<p>In Themefinder, theme files will be segregated according to the first
character of their filename, with up to 26 subdirectories dividing the
theme files into smaller units. Ideally, there should be no more than
3,000 themes in any of these subdirectories. The unix file system used
with Themefinder could perhaps reasonably hold up to 10,000 files in any
particular subdirectory. If there are more theme files than 3,000 then
perhaps they should be renamed, or split into a second collection group.
Usually the name of the file indexes the themes in some manner, such as
with the Latin Motet collection:</p>
<p>j15672312-01.thm j = Initial from last name of composer 1567 = RISM
number 1567 for a particular year 23 = RISM number 1567/23 for a
particular edition 12 = The 12th motet in the edition 01 = first voice
(top voice) of the motet .thm = File extension indicating that this is a
Humdrum theme file.</p>
<p>For a theme collection, each theme must contain a unique filename.
Filenames between collections do not need to be unique.</p>
</div>
<div class="section" id="i-c-theme-group-files">
<h3>I.C. Theme group files.<a class="headerlink" href="#i-c-theme-group-files" title="Permalink to this headline">¶</a></h3>
<p>An important secondary data entry to provide to Themefinder is called a
theme group file. This file describes the relation between themes on
several levels:</p>
<ol class="arabic simple">
<li><strong>movement</strong> &#8211; themes which belong to the same movement.</li>
<li><strong>work</strong> &#8211; themes which belong to the same composition which may
consist of several movements.</li>
<li><strong>collection</strong> &#8211; themes from compositions which are related in some
way. such as the same opus number, or same genre.</li>
</ol>
<p>The collection group, for example, may consist of:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li>J.S. Bach&#8217;s Well-Tempered Clavier, Book I</li>
</ol>
<blockquote>
<div><ol class="loweralpha simple" start="2">
<li>Vivaldi&#8217;s Op.3 concertos</li>
<li>Chopin&#8217;s Preludes</li>
</ol>
</div></blockquote>
</div></blockquote>
<p>A general guideline for the size of a grouping is no more than 50
themes. However, up to 100 themes in a group, particularly a collection
group, is reasonable. Larger group sizes are unweldy and are not
encouraged. For example, all the themes in the symphonies of Haydn would
be too large. All the themes from Beethoven&#8217;s symphonies are at about
the limits of a reasonable group size. Note that the &#8220;collection&#8221;
grouping is different than a Themefinder &#8220;collection&#8221;.</p>
<p>A theme grouping file contains all types of relations for all the themes
in a collection. To indicate a group one of the following three
characters are placed on the first column of the line: &#8220;m&#8221;, &#8220;w&#8221;, &#8220;c&#8221;,
followed by a colon, &#8221;:&#8221;, followed by a tab charcter, followed by a list
of theme filenames, each separated by one space. Below is an example set
of grouping entries for a three movement piece. &#8220;file6&#8221; is from the
third movement. Since there is only one theme in the third movement, it
does not have a movement-level entry in the groupings file. But note
that in the &#8220;work&#8221; level grouping &#8220;file6&#8221; is included.</p>
<div class="line-block">
<div class="line">m: file1 file2 file3</div>
<div class="line-block">
<div class="line">m: file4 file5</div>
<div class="line">w: file1 file2 file3 file4 file5 file6</div>
</div>
</div>
<p>Notice that the filenames in the groupings file do not include the
&#8221;.thm&#8221; extensions.</p>
<p>In Themefinder, the theme grouping file data will be converted into ISTN
values and is used for several things:</p>
<ol class="arabic simple">
<li>providing buttons [M], [W], and [C] for each theme that is a member
of a larger grouping. For example the opening theme to Beethoven&#8217;s
5th symphony has a hyperlink [M] that lists all of the themes in the
first movement, and [W] which lists all themes in the 5th symphony.</li>
<li>Web hyperlinks can be associated with themes on various levels:
(a)theme, (b)movement, (c)work, (d)collection. The grouping file is
the mechanism for making the maintenance of links common to several
themes simpler.</li>
</ol>
<p>It is possible to generate theme group files automatically if the themes
are indexed in a systematic way. For example, The Latin Motet theme
collection contains an incipit for each voice. The filenames of the
Motet themes were organized such that each composition had the same
filename start, followed by a voice indication:</p>
<blockquote>
<div><dl class="docutils">
<dt>j15672312-01.thm Soprano incipit</dt>
<dd>j15672312-02.thm Alto incipit
j15672312-03.thm Tenor incipit
j15672312-04.thm Bass incipit</dd>
</dl>
</div></blockquote>
<p>which could be automatically processed into a theme grouping entry like
so:</p>
<blockquote>
<div>w: j15672312-01 j15672312-02 j15672312-03 j15672312-04</div></blockquote>
<p>Since automatic groupings of the themes are nearly impossible to
generate without errors, the theme groups file should be generated by
hand in most cases.</p>
</div>
<div class="section" id="i-d-image-files">
<h3>I.D. Image files.<a class="headerlink" href="#i-d-image-files" title="Permalink to this headline">¶</a></h3>
<p>Image files are preferrably generated in Themefinder with the Humdrum
Toolkit program &#8220;ms&#8221; which generates PostScript output which can then be
converted to GIF images for display in Themefinder. This process should
be automatic, but often requires human intervention and correction, Such
as the theme of Bach&#8217;s Well-Tempered Clavier Prelude in C Major, book 1
&#8211; where the notation of the theme is polyphonic.</p>
<p>For non-standard repertoires, you may have to generate your own
graphical notation for the themes. For the Latin Motet collection, for
example, the &#8220;ms&#8221; command was not used; rather, a program was written to
translate the theme data into the MUP format directly, which was then
used by the mup program to convert the data into PostScript output. The
twelve-tone collection was also a special case.</p>
</div>
<div class="section" id="i-e-conversion-from-other-music-data-format-into-humdrum">
<h3>I.E. Conversion from other music data format into Humdrum.<a class="headerlink" href="#i-e-conversion-from-other-music-data-format-into-humdrum" title="Permalink to this headline">¶</a></h3>
<p>Contact the Themefinder staff if you have a large set of musical themes
encoded in a method other than Humdrum **kern data. Usually someone
can convert the data into Humdrum with an existing conversion program or
write a new conversion program. Existing conversion programs in the
Humdrum Toolkit:</p>
<blockquote>
<div><ol class="arabic simple">
<li>MuseData to kern program called muse2kern</li>
</ol>
<blockquote>
<div><ol class="arabic simple" start="2">
<li>ESAC to kern</li>
<li>Finale to kern?</li>
</ol>
</div></blockquote>
</div></blockquote>
<p>Other conversion tools available:</p>
<blockquote>
<div><ol class="arabic simple" start="3">
<li>MUSTRAN to kern</li>
</ol>
<blockquote>
<div><ol class="arabic simple" start="4">
<li>DARMS to kern &#8211; this is a specialized converter which</li>
</ol>
</div></blockquote>
<p>converted the Latin Motet incipit collection into Humdrum.</p>
</div></blockquote>
<p>Converting from MIDI is problematic for many reasons including:
chromatic accidental information is not recorded, measure lines are
usually not recorded, etc.</p>
</div>
</div>
</div>


          </div>
          <footer>
  <hr/>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <center><a href="../thru/" class="btn btn-neutral float-right" title="Command: thru">Next <span class="fa fa-arrow-circle-right"></span></a></center>
      
      
        <a href="../text/" class="btn btn-neutral" title="Command: text"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
      
             <center><a href="../../_sources/man/themefinder.txt" rel="nofollow"> View page source</a></center>
      
    </div>
  



  <div role="contentinfo">
    <p>
    </p>
  </div>


</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
   
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-52162357-1', 'humdrum.org');
  ga('send', 'pageview');
</script>



</body>
</html>