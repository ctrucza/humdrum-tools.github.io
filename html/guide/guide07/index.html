

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter 7: MIDI Output Tools &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../../"/>
        <link rel="up" title="The Humdrum User Guide" href="../"/>
        <link rel="next" title="Chapter 8: The Shell (I)" href="../guide08/"/>
        <link rel="prev" title="Chapter 6: Representing Music Using ***kern*(II)" href="../guide06/"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installationguide/">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installationguide/downloading/">Downloading Humdrum</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../"><em>The Humdrum User Guide</em></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../guide01/">Chapter 1: Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide02/">Chapter 2: Representing Music Using kern (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide03/">Chapter 3: Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide04/">Chapter 4:Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide05/">Chapter 5: The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide06/">Chapter 6: Representing Music Using ***kern*(II)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Chapter 7: MIDI Output Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide08/">Chapter 8: The Shell (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide09/">Chapter 9: Searching with Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide10/">Chapter 10: Musical Uses of Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide11/">Chapter 11: Melodic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide12/">Chapter 12: Selecting Musical Parts and Passages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide13/">Chapter 13: Assembling Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide14/">Chapter 14: Stream Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide15/">Chapter 15: Harmonic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide16/">Chapter 16: The Shell (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide17/">Chapter 17: Creating Inventories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide18/">Chapter 18: Fingers, Footsteps and Frets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide19/">Chapter 19: Musical Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide20/">Chapter 20: Strophes, Verses, and Repeats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide21/">Chapter 21: Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide22/">Chapter 22: Classifying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide23/">Chapter 23: Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide24/">Chapter 24: The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide25/">Chapter 25: Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide26/">Chapter 26: Moving Signifiers Between Spines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide27/">Chapter 27: Text and Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide29/">Chapter 29: Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide30/">Chapter 30:MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide31/">Chapter 31: Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide32/">Chapter 32: The Shell (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide34/">Chapter 34: Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide35/">Chapter 35: Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide37/">Chapter 37: Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide38/">Chapter 38: Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide39/">Chapter 39: Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide40/">Chapter 40: Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.more/">Supplementary Humdrum Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.toc/">Humdrum Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../humdrum.problems/">HUMDRUM PROBLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux.perform/">Installing and Using the Humdrum &#8220;perform&#8221; Command under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/#bibliography">Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07/">Humdrum Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#humdrum-representation-development">Humdrum Representation Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#representation-assumptions">Representation Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#creating-new-humdrum-representations">Creating New Humdrum Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#defining-a-new-humdrum-interpretation-a-sample-problem">Defining a New Humdrum Interpretation: A Sample Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/#humdrum-software-development">Humdrum Software Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/#standard-program-skeleton">Standard Program Skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#how-to-translate-musedata-files-to-humdrum">How To Translate MuseData Files to Humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/">Sample Research Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../representations.toc/">Humdrum Representation Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources/">Online Resources:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sample.problems/">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../extras/">Humdrum Extras</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../extras/intro/">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/dataEntry/">Data Entry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/melody/">Melody Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/harmony/">Harmony</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/rhythm/">Rhythm Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/musicSearching/">Music Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/MIDIrendering/">MIDI Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/graphicalNotation/">Graphical Musical Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/otherUtilities/">Other Useful Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/programmingTutorial/">Programming Tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/vimHighlighting/">Syntax Coloring in Vim</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../referencemanual/">Humdrum Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/assemble/">Assemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/hint/">hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/mint/">mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/key/">key</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../">Docs</a> &raquo;</li>
      
          <li><a href="../"><em>The Humdrum User Guide</em></a> &raquo;</li>
      
    <li>Chapter 7: MIDI Output Tools</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/guide/guide07.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="chapter-7-midi-output-tools">
<h1>Chapter 7: MIDI Output Tools<a class="headerlink" href="#chapter-7-midi-output-tools" title="Permalink to this headline">¶</a></h1>
<p>MIDI is a standard method for exchanging information between sound
synthesizers and controlling computers. Humdrum provides a number of MIDI-
related tools that allow MIDI data to be input and output. In this chapter we
will discuss the output-related tools: <a href="#id17"><span class="problematic" id="id18">`**midi**`_</span></a>, <a href="#id19"><span class="problematic" id="id20">`**perform**`_</span></a>,
<a href="#id21"><span class="problematic" id="id22">`**smf**`_</span></a> and <a href="#id23"><span class="problematic" id="id24">`**tacet**`_</span></a>. MIDI input tools are discussed in <a href="#id25"><span class="problematic" id="id26">`Chapter 30.`_</span></a></p>
<div class="section" id="the-midi-representation">
<h2>The <a href="#id1"><span class="problematic" id="id2">**</span></a><em>MIDI</em> Representation<a class="headerlink" href="#the-midi-representation" title="Permalink to this headline">¶</a></h2>
<p>Humdrum provides a <tt class="docutils literal"><span class="pre">`**MIDI```_</span> <span class="pre">representation</span> <span class="pre">that</span> <span class="pre">closely</span> <span class="pre">parallels</span> <span class="pre">the</span>
<span class="pre">commercial</span> <span class="pre">MIDI</span> <span class="pre">specification</span> <span class="pre">but</span> <span class="pre">conforms</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">Humdrum</span> <span class="pre">data</span> <span class="pre">format.</span> <span class="pre">This</span>
<span class="pre">representation</span> <span class="pre">provides</span> <span class="pre">an</span> <span class="pre">intermediate</span> <span class="pre">format;</span> <span class="pre">using</span> <span class="pre">Humdrum</span> <span class="pre">commands</span> <span class="pre">such</span>
<span class="pre">as</span> <span class="pre">`**perform**`_</span> <span class="pre">and</span> <span class="pre">`**smf**,`_</span> <span class="pre">true</span> <span class="pre">MIDI</span> <span class="pre">data</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">generated.</span> <span class="pre">However,</span>
<span class="pre">since</span> <span class="pre">the</span> <span class="pre">``**MIDI</span></tt> representation conforms to the Humdrum syntax, the data
can be manipulated, modified and searched in the same way as other Humdrum
data. For example, we can use <strong>grep</strong> to search MIDI data, etc.</p>
<p>MIDI is a type of &#8220;tablature&#8221; notation. It describes a set of performance
actions rather than specifying either the sounded result or the analytic
notation. MIDI represents note-related events for various &#8220;channels.&#8221; MIDI
events include note-on, note-off, key-velocity, after-touch, control codes,
and system-exclusive codes. The original commercial MIDI standard is unable
to represent many other musically pertinent signifiers such as pitch spelling
(e.g., F-sharp versus G-flat), stem directions, ties, slurs, phrasing, etc.
In addition, MIDI does not represent rests.</p>
<p>A simple <a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id27"><span class="problematic" id="id28">`**MIDI```_</span></a> example is given below. It consists just a single note
(middle C):</p>
<p><tt class="docutils literal"><span class="pre">!!</span> <span class="pre">A</span> <span class="pre">single</span> <span class="pre">MIDI</span> <span class="pre">note.</span>
<span class="pre">``**MIDI</span>
<span class="pre">``*Ch1</span>
<span class="pre">``54/60/64</span>
<span class="pre">``80/-60/64</span>
<span class="pre">``*-</span></tt></p>
<p>Notice that there are two <tt class="docutils literal"><span class="pre">**MIDI</span></tt> data tokens: one to specify note-on and
one to specify note-off events. Each <tt class="docutils literal"><span class="pre">**MIDI</span></tt> data token consists of three
elements or components, delimited by a slash character (/). The first element
in the data token represents the number of clock ticks before the current
event is to occur. The absolute duration of a single clock tick is determined
by the <tt class="docutils literal"><span class="pre">**MIDI</span></tt> clock speed, which is variable. In our example, 54 clock
ticks elapse before the note is turned on, and another 80 clock ticks elapse
before the note is turned off. The initial pause before the first note begins
is not necessary; however, many MIDI cards introduce a brief delay before
beginning to send the first data in a stream. The leading pause prevents a
&#8220;rushed&#8221; burst of initial notes.</p>
<p>The second element in a data token represents the <tt class="docutils literal"><span class="pre">**MIDI</span></tt> key number.
Successive numbers refer to semitone pitches where middle C is designated key
<tt class="docutils literal"><span class="pre">60</span></tt>. Key-off events are represented by negative integers, so <tt class="docutils literal"><span class="pre">-60</span></tt> means
turn off key <tt class="docutils literal"><span class="pre">60</span></tt>. Key numbers range between 1 and 127.</p>
<p>The third element in a data token represents the <tt class="docutils literal"><span class="pre">**MIDI</span></tt> key velocity.
MIDI instruments normally interpret key velocity as dynamic or accent
information. Higher key-velocity values are associated with accented notes.
In the case of key-off events, the key-velocity component represents the key-
up velocity.</p>
<p>Unlike most other Humdrum representations, the <tt class="docutils literal"><span class="pre">`**MIDI```_</span> <span class="pre">format</span> <span class="pre">requires</span>
<span class="pre">two</span> <span class="pre">data</span> <span class="pre">tokens</span> <span class="pre">for</span> <span class="pre">each</span> <span class="pre">note.</span> <span class="pre">The</span> <span class="pre">following</span> <span class="pre">example</span> <span class="pre">shows</span> <span class="pre">a</span> <span class="pre">three</span> <span class="pre">note</span>
<span class="pre">C-major</span> <span class="pre">triad.</span> <span class="pre">The</span> <span class="pre">```**kern```_</span> <span class="pre">data</span> <span class="pre">is</span> <span class="pre">shown</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">left</span> <span class="pre">spine</span> <span class="pre">with</span> <span class="pre">the</span>
<span class="pre">corresponding</span> <span class="pre">``**MIDI</span></tt> data in the right spine. Notice that each data token
consists of three subtokens, one for each note:</p>
<p><tt class="docutils literal"><span class="pre">!!</span> <span class="pre">A</span> <span class="pre">C-majortriad.</span>
<span class="pre">``**kern**MIDI</span>
<span class="pre">``**Ch1</span>
<span class="pre">``2c</span> <span class="pre">2e</span> <span class="pre">2g72/60/64</span> <span class="pre">72/64/64</span> <span class="pre">72/67/64</span>
<span class="pre">``.144/-60/64</span> <span class="pre">144/-64/64</span> <span class="pre">144/-67/64</span>
<span class="pre">``*-*-</span></tt></p>
<p>Middle C corresponds to MIDI key 60; The pitches E4 and G4 correspond to MIDI
keys 64 and 67 respectively. The half-note durations result in a delay of 144
clock ticks before the key-off commands are executed. Notice that all key-off
events occur simultaneously.</p>
<p>Suppose we add a second chord consisting of the dyad D4 and F4. The dyad
begins at the same time that the C major triad ends. This results in five
subtokens in the corresponding <tt class="docutils literal"><span class="pre">**MIDI</span></tt> data record. Three key-off events
are synchronous with two key-on events:</p>
<p><tt class="docutils literal"><span class="pre">!!</span> <span class="pre">Two</span> <span class="pre">chords.</span>
<span class="pre">``**kern**MIDI</span>
<span class="pre">``**Ch1</span>
<span class="pre">``2c</span> <span class="pre">2e</span> <span class="pre">2g72/60/64</span> <span class="pre">72/64/64</span> <span class="pre">72/67/64</span>
<span class="pre">``4d</span> <span class="pre">4f144/-60/64</span> <span class="pre">144/-64/64</span> <span class="pre">144/-67/64</span> <span class="pre">144/62/64</span> <span class="pre">144/65/64</span>
<span class="pre">``.72/-62/64</span> <span class="pre">72/-65/64</span>
<span class="pre">``*-*-</span></tt></p>
<p>Notice that the difference in duration between the half-notes and quarter-
notes is reflected when the notes are turned <em>off</em> rather than when the notes
are turned <em>on</em>.</p>
<p>Example 7.1 illustrates a slightly more complex excerpt from the beginning of
Darius Milhaud&#8217;s <em>Touches Blanches</em>.</p>
<p><strong>Example 7.1</strong> Excerpt from Darius Milhaud&#8217;s <em>Touches Blanches</em></p>
<p>&gt; .. image:: guide.figures/guide07.1.gif</p>
<p><tt class="docutils literal"><span class="pre">!!!:</span> <span class="pre">Milhaud,</span> <span class="pre">D.</span>
<span class="pre">``!!!OTL:</span> <span class="pre">TouchesBlanches</span>
<span class="pre">``**kern**kern**MIDI**MIDI</span>
<span class="pre">``*staff2*staff1*Ch1*Ch1</span>
<span class="pre">``*clefF4*clefG2*clefF4*clefG2</span>
<span class="pre">``*k[]*k[]*k[]*k[]</span>
<span class="pre">``*M3/4*M3/4*M3/4*M3/4</span>
<span class="pre">``=1-=1-=1-=1-</span>
<span class="pre">``4e(4g72/64/6472/67/64</span>
<span class="pre">``4c2a)72/-64/64</span> <span class="pre">72/60/6472/-67/64</span> <span class="pre">72/69/64</span>
<span class="pre">``4F.72/-60/64</span> <span class="pre">72/53/64.</span>
<span class="pre">``=2=2=2=2</span>
<span class="pre">``4f(8a72/-53/64</span> <span class="pre">72/65/6472/-69/64</span> <span class="pre">72/69/64</span>
<span class="pre">``.8b.36/-69/64</span> <span class="pre">36/71/64</span>
<span class="pre">``4d2g)36/-65/64</span> <span class="pre">36/62/6436/-71/64</span> <span class="pre">36/67/64</span>
<span class="pre">``4G.72/-62/64</span> <span class="pre">72/55/64.</span>
<span class="pre">``=3=3=3=3</span>
<span class="pre">``4e(4g72/-55/64</span> <span class="pre">72/64/6472/-67/64</span> <span class="pre">72/67/64</span>
<span class="pre">``4c2a)72/-64/64</span> <span class="pre">72/60/6472/-67/64</span> <span class="pre">72/69/64</span>
<span class="pre">``4F.72/-60/64</span> <span class="pre">72/53/64.</span>
<span class="pre">``=4=4=4=4</span>
<span class="pre">``4f(8a72/-53/64</span> <span class="pre">72/65/6472/-69/64</span> <span class="pre">72/69/64</span>
<span class="pre">``.8b.36/-69/64</span> <span class="pre">36/71/64</span>
<span class="pre">``4d2g)36/-65/64</span> <span class="pre">36/62/6436/-71/64</span> <span class="pre">36/67/64</span>
<span class="pre">``4G.72/-62/64</span> <span class="pre">72/55/64.</span>
<span class="pre">``..72/-55/6472/-67/64</span>
<span class="pre">``*-*-*-*-</span></tt></p>
<p>The <a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id29"><span class="problematic" id="id30">`**MIDI```_</span></a> representation always expects a tandem interpretation
indicating the MIDI channel assignment. In Example 7.1 both parts have been
assigned to channel 1. Once again, simultaneous key-on and key-off events
often appear as double-stops. Also notice that an additional data record is
required at the end of the passage in order to turn off the final notes.</p>
</div>
<div class="section" id="the-midi-command">
<h2>The <em>midi</em> Command<a class="headerlink" href="#the-midi-command" title="Permalink to this headline">¶</a></h2>
<p>The <a href="#id31"><span class="problematic" id="id32">`**midi**`_</span></a> command converts Humdrum <tt class="docutils literal"><span class="pre">`**kern```_</span> <span class="pre">data</span> <span class="pre">into</span> <span class="pre">Humdrum</span>
<span class="pre">``**MIDI</span></tt> data. By way of example, the above <tt class="docutils literal"><span class="pre">**MIDI</span></tt> data can be
generated as follows:</p>
<p><tt class="docutils literal"><span class="pre">midi</span> <span class="pre">inven05.krn</span> <span class="pre">&gt;</span> <span class="pre">inven05.hmd</span></tt></p>
<p>The <tt class="docutils literal"><span class="pre">.hmd</span></tt> filename extension is a common way of designating Humdrum
<tt class="docutils literal"><span class="pre">MIDI</span></tt> data.</p>
<p>Since the <tt class="docutils literal"><span class="pre">**kern</span></tt> representation does not encode key-velocity information,
the <strong>midi</strong> command assumes a default key velocity of 64 (from a range of 1
to 127). If the input is monophonic, <strong>midi</strong> will also allow the user to set
a fixed note duration using the <strong>-d</strong> option. This is useful for auditing
notes that do not have duration values. For example, a Gregorian chant might
be represented without durations. The following command takes a file
containing a 12-tone row (pitch information only) and produces a <tt class="docutils literal"><span class="pre">**MIDI</span></tt>
output where all notes assigned to a quarter duration:</p>
<p><tt class="docutils literal"><span class="pre">midi</span> <span class="pre">-d</span> <span class="pre">4</span> <span class="pre">tonerow</span> <span class="pre">&gt;</span> <span class="pre">tonerow.hmd</span></tt></p>
<p>The most common use of <tt class="docutils literal"><span class="pre">**MIDI</span></tt> data is to create a standard MIDI file
using the <strong>smf</strong> command, or to listen to the output using the <strong>perform</strong>
command. In some cases, it is useful to carry out processing of <tt class="docutils literal"><span class="pre">**MIDI</span></tt>
data itself.</p>
</div>
<div class="section" id="the-perform-command">
<h2>The <em>perform</em> Command<a class="headerlink" href="#the-perform-command" title="Permalink to this headline">¶</a></h2>
<p>The <a href="#id33"><span class="problematic" id="id34">`**perform**`_</span></a> command allows the user to listen to synthesized
performances of <tt class="docutils literal"><span class="pre">**MIDI</span></tt>-format input. When invoked, <strong>perform</strong> provides a
simple interactive environment suitable for proof-listening and other
audition tasks.</p>
<p>The <strong>perform</strong> command accepts any Humdrum input; however, only
<a href="#id7"><span class="problematic" id="id8">``</span></a><a href="#id35"><span class="problematic" id="id36">`**MIDI```_</span></a> spines present in the input stream are performed. Non-MIDI
spines are simply ignored and do not affect the sound output. The <strong>perform</strong>
command generates serial MIDI data which are sent directly to a MIDI
controller card or on-board sound-card.</p>
<p>The <strong>perform</strong> command is typically the last command in a pipe preceded by
the <strong>midi</strong> command. For example, a <tt class="docutils literal"><span class="pre">**kern</span></tt>-format score can be heard
using the following command:</p>
<p><tt class="docutils literal"><span class="pre">midi</span> <span class="pre">clara.krn</span> <span class="pre">|</span> <span class="pre">perform</span></tt></p>
<p>When invoked, the <strong>perform</strong> command reads in the entire input into memory.
This allows the user to move freely both forward and backward through the
MIDI score.</p>
<p>The <strong>perform</strong> command provides a set of interactive commands that allow the
user to pause and resume playback, to change tempo, to move to any measure by
absolute or relative reference, and to search forward or backward for
commented markers. The <strong>perform</strong> command remains active until either the
end of the score is reached or the user terminates performance by typing the
letter <a href="#id9"><span class="problematic" id="id10">`</span></a>q&#8217; or the escape key (ESC).</p>
<p>Playback can be paused by typing the space-bar and resumed by typing any key.
Typing the carriage return by itself will return to the beginning of the
score and re-initiate playback. If a number is typed before pressing the
carriage return then <strong>perform</strong> will search for a corresponding measure
number and initiate playback from that measure. Other commands are provided
that allow moving forward or backward a specified number of measures.</p>
<p>In the default operation, <strong>perform</strong> echoes all global comments on the
screen as the comments are encountered in the input. For inputs containing
appropriate annotations, the echoing of comments can provide useful visual
markers or reminders of particular moments in the sound output. Whether or
not global comments are echoed on the standard output, users can use the
<strong>perform</strong> forward-search (<tt class="docutils literal"><span class="pre">/</span></tt>) or backward-search (<tt class="docutils literal"><span class="pre">?</span></tt>) commands to
move directly to a particular commented point in the score. For example, if
an input contains a global comment containing the character string &#8220;<tt class="docutils literal"><span class="pre">Second</span>
<span class="pre">theme</span></tt>,&#8221; then the user can move immediately to this position in the input by
entering the following command:</p>
<p><tt class="docutils literal"><span class="pre">/Second</span> <span class="pre">theme</span></tt></p>
<p>Similarly, backward searches can be carried out by typing the question mark
(<tt class="docutils literal"><span class="pre">?</span></tt>) rather than the slash. If the search is successful, playback
continues immediately from the new score position.</p>
</div>
<div class="section" id="data-scrolling-during-playback">
<h2>Data Scrolling During Playback<a class="headerlink" href="#data-scrolling-during-playback" title="Permalink to this headline">¶</a></h2>
<p>The <strong>midi</strong> command provides a useful <strong>-c</strong> option that causes each data
record to be repeated as a comment. For example, when the <strong>-c</strong> option is
used a sequence of data records such as the following:</p>
<p><tt class="docutils literal"><span class="pre">4C4E4G4c</span>
<span class="pre">``4D4F4G4B</span>
<span class="pre">``4AA4E4A4c</span></tt></p>
<p>is transformed to:</p>
<p><tt class="docutils literal"><span class="pre">4C4E4G4c</span>
<span class="pre">``!!4C4E4G4c</span>
<span class="pre">``4D4F4G4B</span>
<span class="pre">``!!4D4F4G4B</span>
<span class="pre">``4AA4E4A4c</span>
<span class="pre">``!!4AA4E4A4c</span></tt></p>
<p>Since, by default, the <strong>perform</strong> command echoes all global comments on the
screen during playback, this means that the Humdrum data will also appear on
the screen as it is being played. In addition, the commented data records are
accessible to the forward- and backward-search commands. For example, in the
<a href="#id11"><span class="problematic" id="id12">``</span></a><a href="#id37"><span class="problematic" id="id38">`**kern```_</span></a> representation, pauses are indicated by a semicolon; hence the
user might search for the next pause symbol by typing:</p>
<p><tt class="docutils literal"><span class="pre">/;</span></tt></p>
<p>Similarly, the user could search for a particular pitch, e.g.</p>
<p><tt class="docutils literal"><span class="pre">/gg#</span></tt></p>
<p>Since the <strong>perform</strong> command accepts any Humdrum input, other Humdrum data
may be used for searching. For example, the input data might contain melodic
interval data (see <a href="#id39"><span class="problematic" id="id40">`Chapter 11`_</span></a>), allowing the user to search for a
particular interval such as a diminished octave:</p>
<p><tt class="docutils literal"><span class="pre">/d8</span></tt></p>
<p>If the string pattern is found in the input, <strong>perform</strong> will move
immediately forward (or backward) to the next occurrence and begin playing
from that point.</p>
</div>
<div class="section" id="changing-tempo">
<h2>Changing Tempo<a class="headerlink" href="#changing-tempo" title="Permalink to this headline">¶</a></h2>
<p>During playback, the tempo can be modified by typing the greater-than (&gt;) and
less-than (&lt;) signs to increase or decrease the tempo respectively. In
addition to modifying the tempo interactively, the performance tempo may be
specified either in the command line or in the input Humdrum representation.
The tempo may be specified on the command line by using the <strong>-t</strong> option.
For example, the following command causes the file <tt class="docutils literal"><span class="pre">Andean</span></tt> to be performed
at half tempo:</p>
<p><tt class="docutils literal"><span class="pre">midi</span> <span class="pre">Andean</span> <span class="pre">|</span> <span class="pre">perform</span> <span class="pre">-t</span> <span class="pre">0.5</span></tt></p>
<p>Performing at fast speeds can often be useful when scanning for a particular
passage.</p>
<p>Tempo specifications may be present in the input data via the tandem
interpretation for metronome marking (e.g. <tt class="docutils literal"><span class="pre">*MM96</span></tt>). If no tempo
information is available, <strong>perform</strong> uses a default tempo of 66 quarter-
notes per minute.</p>
</div>
<div class="section" id="the-tacet-command">
<h2>The <em>tacet</em> Command<a class="headerlink" href="#the-tacet-command" title="Permalink to this headline">¶</a></h2>
<p>In rare circumstances, ciphers (stuck notes) can occur during MIDI
performances; for instance, an intermittently functioning MIDI cable may fail
to convey a &#8220;note-off&#8221; instruction to an active synthesizer. The <strong>p</strong>
command (&#8220;panic&#8221;) turns off all active notes. Should a cipher remain after
terminating the <strong>perform</strong> command, the Humdrum <a href="#id41"><span class="problematic" id="id42">`**tacet**`_</span></a> command can be
used to send &#8220;all-notoff&#8221; commands on all MIDI channels.</p>
<p>In <a href="#id43"><span class="problematic" id="id44">`Chapter 12,`_</span></a> we will see how <strong>perform</strong> can be used in conjunction with
other commands (such as <a href="#id45"><span class="problematic" id="id46">`**extract**`_</span></a> and <a href="#id47"><span class="problematic" id="id48">`**yank**`_</span></a>) to listen selectively
to specific parts or passages. In <a href="#id49"><span class="problematic" id="id50">`Chapter 21`_</span></a> we will use <strong>perform</strong> in
conjunction with the <a href="#id51"><span class="problematic" id="id52">`**patt**`_</span></a> command to listen to patterns (such as
harmonic, rhythmic and melodic patterns) found in some repertory.</p>
</div>
<div class="section" id="the-smf-command">
<h2>The <em>smf</em> Command<a class="headerlink" href="#the-smf-command" title="Permalink to this headline">¶</a></h2>
<p>Another MIDI-related tool is the <a href="#id53"><span class="problematic" id="id54">`**smf**`_</span></a> command. This command allows the
user to create &#8220;standard MIDI files&#8221; from Humdrum <tt class="docutils literal"><span class="pre">**MIDI</span></tt>-format files.
Standard MIDI files are industry-standard binary files that can be imported
by a variety of MIDI applications software packages on many different
platforms, including sequencer programs and most music notation packages.</p>
<p>The <strong>smf</strong> command translates only <tt class="docutils literal"><span class="pre">**MIDI</span></tt> input spines; all
non-<tt class="docutils literal"><span class="pre">**MIDI</span></tt> spines are simply ignored. Suppose we begin with a
<tt class="docutils literal"><span class="pre">**kern</span></tt>-format file named <tt class="docutils literal"><span class="pre">joplin</span></tt>. We can create a standard MIDI file
as follows:</p>
<p><tt class="docutils literal"><span class="pre">midi</span> <span class="pre">joplin</span> <span class="pre">|</span> <span class="pre">smf</span> <span class="pre">&gt;</span> <span class="pre">joplin.smf</span></tt></p>
<p>The <strong>smf</strong> command provides two options. The <strong>-t</strong> option allows the user
to set the tempo, whereas the <strong>-v</strong> option allows the user to specify a
default MIDI key velocity. See the <em>Humdrum Reference Manual</em> for details.</p>
</div>
<hr class="docutils" />
<div class="section" id="reprise">
<h2>Reprise<a class="headerlink" href="#reprise" title="Permalink to this headline">¶</a></h2>
<p>In this chapter we have learned how Humdrum data can be output as MIDI data.
Humdrum provides a <tt class="docutils literal"><span class="pre">**MIDI</span></tt> representation that closely parallels MIDI but
remains in conformity with the Humdrum syntax. This means that the data can
still be processed with other Humdrum tools (as we will see in later
chapters).</p>
<p>The <a href="#id55"><span class="problematic" id="id56">`**midi**`_</span></a> command can translate <a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id57"><span class="problematic" id="id58">`**kern```_</span></a> data to <a href="#id15"><span class="problematic" id="id16">``</span></a><a href="#id59"><span class="problematic" id="id60">`**MIDI```_</span></a> and
the <a href="#id61"><span class="problematic" id="id62">`**perform**`_</span></a> and <a href="#id63"><span class="problematic" id="id64">`**smf**`_</span></a> commands can be used to generate true MIDI
data for listening. The <strong>perform</strong> command provides a simple interactive
command-line sequencer for playing whatever input is provided. The <strong>smf</strong>
command generates standard MIDI files that can be used to transport MIDI data
to a vast array of commercial and non-commerical applications software. In
<a href="#id65"><span class="problematic" id="id66">`Chapter 30`_</span></a> we will explore some of the Humdrum tools for inputting MIDI
data into Humdrum.</p>
<hr class="docutils" />
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../guide08/" class="btn btn-neutral float-right" title="Chapter 8: The Shell (I)"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../guide06/" class="btn btn-neutral" title="Chapter 6: Representing Music Using ***kern*(II)"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>