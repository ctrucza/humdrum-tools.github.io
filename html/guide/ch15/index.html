

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter 15: Harmonic Intervals &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../../"/>
        <link rel="up" title="The Humdrum User Guide" href="../"/>
        <link rel="next" title="Chapter 16: The Shell (II)" href="../ch16/"/>
        <link rel="prev" title="Chapter 14: Stream Editing" href="../ch14/"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installationguide/">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installationguide/downloading/">Downloading Humdrum</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../"><em>The Humdrum User Guide</em></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ch01/">Chapter 1: Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch02/">Chapter 2: Representing Music Using kern (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch03/">Chapter 3: Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch04/">Chapter 4:Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch05/">Chapter 5: The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch06/">Chapter 6: Representing Music Using ***kern*(II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch07/">Chapter 7: MIDI Output Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch08/">Chapter 8: The Shell (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch09/">Chapter 9: Searching with Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch10/">Chapter 10: Musical Uses of Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/">Chapter 11: Melodic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch12/">Chapter 12: Selecting Musical Parts and Passages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch13/">Chapter 13: Assembling Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch14/">Chapter 14: Stream Editing</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Chapter 15: Harmonic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch16/">Chapter 16: The Shell (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch17/">Chapter 17: Creating Inventories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch18/">Chapter 18: Fingers, Footsteps and Frets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch19/">Chapter 19: Musical Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch20/">Chapter 20: Strophes, Verses, and Repeats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch21/">Chapter 21: Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch22/">Chapter 22: Classifying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch23/">Chapter 23: Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch24/">Chapter 24: The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch25/">Chapter 25: Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch26/">Chapter 26: Moving Signifiers Between Spines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch27/">Chapter 27: Text and Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch29/">Chapter 29: Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch30/">Chapter 30:MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch31/">Chapter 31: Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch32/">Chapter 32: The Shell (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch34/">Chapter 34: Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch35/">Chapter 35: Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch37/">Chapter 37: Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch38/">Chapter 38: Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch39/">Chapter 39: Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch40/">Chapter 40: Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.more/">Supplementary Humdrum Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.toc/">Humdrum Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../humdrum.problems/">HUMDRUM PROBLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux.perform/">Installing and Using the Humdrum &#8220;perform&#8221; Command under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/#bibliography">Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07/">Humdrum Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#humdrum-representation-development">Humdrum Representation Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#representation-assumptions">Representation Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#creating-new-humdrum-representations">Creating New Humdrum Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#defining-a-new-humdrum-interpretation-a-sample-problem">Defining a New Humdrum Interpretation: A Sample Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/#humdrum-software-development">Humdrum Software Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/#standard-program-skeleton">Standard Program Skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#how-to-translate-musedata-files-to-humdrum">How To Translate MuseData Files to Humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/">Sample Research Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../representations.toc/">Humdrum Representation Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources/">Online Resources:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sample.problems/">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../extras/">Humdrum Extras</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../extras/intro/">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/dataEntry/">Data Entry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/melody/">Melody Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/harmony/">Harmony</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/rhythm/">Rhythm Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/musicSearching/">Music Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/MIDIrendering/">MIDI Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/graphicalNotation/">Graphical Musical Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/otherUtilities/">Other Useful Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/programmingTutorial/">Programming Tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/vimHighlighting/">Syntax Coloring in Vim</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../referencemanual/">Humdrum Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/assemble/">Assemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/hint/">hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/mint/">mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/key/">key</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../">Docs</a> &raquo;</li>
      
          <li><a href="../"><em>The Humdrum User Guide</em></a> &raquo;</li>
      
    <li>Chapter 15: Harmonic Intervals</li>
      <li class="wy-breadcrumbs-aside">
        
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="chapter-15-harmonic-intervals">
<h1>Chapter 15: Harmonic Intervals<a class="headerlink" href="#chapter-15-harmonic-intervals" title="Permalink to this headline">¶</a></h1>
<p>In <a href="#id93"><span class="problematic" id="id94">`Chapter 11`_</span></a> we examined Humdrum tools related to melodic pitch
intervals. This chapter returns to the discussion of intervals by focussing
on two tools pertaining to characterizing harmonic intervals: the <a href="#id95"><span class="problematic" id="id96">`**hint**`_</span></a>
and <a href="#id97"><span class="problematic" id="id98">`**ydelta**`_</span></a> commands.</p>
<div class="section" id="types-of-harmonic-intervals">
<h2>Types of Harmonic Intervals<a class="headerlink" href="#types-of-harmonic-intervals" title="Permalink to this headline">¶</a></h2>
<p>Harmonic intervals identify pitch distances between nominally concurrently-
sounding notes. Example 15.1 illustrates five types of harmonic intervals.
The most obvious harmonic intervals are those that occur between pitches that
have concurrent onsets. We might call these <em>explicit harmonic intervals.</em> An
example of an explicit harmonic interval is the perfect octave in the first
sonority of Example 15.1</p>
<p><strong>Example 15.1</strong> Types of harmonic intervals.</p>
<p>&gt; .. image:: guide.figures/ch15.1.gif</p>
<p>`` <a href="#id1"><span class="problematic" id="id2">**</span></a>kern**kern
`` <em>M4/4*M4/4
`` =1-=1-
`` 8c2cc
`` 8d.
`` 4e.
`` 8f8r
`` 8r8a
`` 8d8r
`` 8r8b
`` =2=2
`` 2.c 2.e2.g 2.cc
`` *-</em>-``</p>
<p>Less obvious harmonic intervals arise when tone onsets are not synchronous &#8211;
yet both pitches are sustained simultaneously for a period of time. We might
call these <em>passing harmonic intervals.</em> Two examples are evident in Example
15.1: the minor seventh between the D and the sustained C, and the minor
sixth between E and C. Most music theorists would argue that the minor sixth
interval is more important than the minor seventh. Compared with the D, the
following E has a longer duration and coincides with a stronger metrical
position. Hence the interval of the minor sixth is likely to be more
perceptually salient than the minor seventh interval. We might call these
intervals <em>strong passing intervals</em> and <em>weak passing intervals</em>
respectively.</p>
<p>Another type of harmonic interval may be deemed to occur even when there are
no concurrently sounding pitches. In Example 15.1, the alternating F-&gt;A and
D-&gt;B imply subdominant and dominant harmonic functions and so suggest the
intervals of a major third followed by a major sixth. We might call these
intervals <em>implicit harmonic intervals.</em> The harmonic status of the pitch
sequence A-&gt;D is more contentious; many theorists would argue that no
harmonic interval is implied either because of the weak-&gt;strong metric
relationship or because the harmonic interval is less stereotypic of the
given the cadential cliche. Once again, implicit harmonic intervals might be
distinguished as weak or strong.</p>
<p>A further complication in identifying harmonic intervals arises when there
are more than two pitches involved. In the final four-note chord of Example
15.1, what harmonic intervals are implied? Example 15.2 shows three possible
break-downs of the harmonic relationships. <em>Stacked harmonic intervals</em>
include only the intervals between successive pitches ordered from low to
high. Four pitches thus generate three intervals. <em>Bass-related harmonic
intervals</em> include all intervals calculated with respect to the lowest pitch.
Four pitches again leads to three (different) intervals. This latter way of
characterizing intervals is the most similar to figured bass notation.
<em>Permuted harmonic intervals</em> include all intervals that can be calculated
between all notes of a sonority. Four pitches leads to six intervals.</p>
<p><strong>Example 15.2</strong> Interpreting Interval Content in Chords
.. image:: guide.figures/ch15.2.gif</p>
<p>&gt; Stacked IntervalsBass-related IntervalsPermuted Intervals</p>
<p>A final issue in characterizing harmonic intervals is whether or not the
presence of unisons is important. In most applications (such as figured bass)
the presence of unisons is unimportant. In other applications (such as
tabulating instrument doubling in orchestration) the occurrence of unisons is
noteworthy.</p>
<p>By way of summary, we have distinguished five types of harmonic intervals,
and three measurement methods: explicit harmonic intervals, implicit harmonic
intervals (both strong and weak), plus passing harmonic intervals (again both
strong and weak varieties). Measurement methods include (1) stacked harmonic
intervals, (2) bass-related harmonic intervals, and (3) permuted harmonic
intervals.</p>
<p>As in the case of melodic intervals, harmonic intervals can be calculated
according to a variety of units &#8211; including diatonic intervals, semitones,
cents, frequency, and even cochlear coordinates. We will consider just two
tools for calculating harmonic intervals: <strong>hint</strong> and <strong>ydelta.</strong></p>
</div>
<div class="section" id="harmonic-intervals-using-the-hint-command">
<h2>Harmonic Intervals Using the <em>hint</em> Command<a class="headerlink" href="#harmonic-intervals-using-the-hint-command" title="Permalink to this headline">¶</a></h2>
<p>The Humdrum <a href="#id99"><span class="problematic" id="id100">`**hint**`_</span></a> command calculates harmonic intervals for pitch-
related representations such as <a href="#id101"><span class="problematic" id="id102">`\*\*kern`_</span></a>, <a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id103"><span class="problematic" id="id104">`**pitch```_</span></a>,
`` <a href="#id105"><span class="problematic" id="id106">`**solfg```_</span></a>, and <a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id107"><span class="problematic" id="id108">`**Tonh```_</span></a>. As in the case of the <strong>mint</strong> command,
output intervals are expressed as a combination of diatonic interval size
plus interval quality (such as <a href="#id7"><span class="problematic" id="id8">`</span></a>perfect fourth&#8217; and <a href="#id9"><span class="problematic" id="id10">`</span></a>minor ninth&#8217;).</p>
<p>In the default operation, <strong>hint</strong> calculates only explicit harmonic
intervals; for sonorities containing more than two pitches, only stacked
harmonic intervals are calculated. The output from the <strong>hint</strong> command
always consists of a single <a href="#id11"><span class="problematic" id="id12">``</span></a><a href="#id109"><span class="problematic" id="id110">`**hint```_</span></a> spine. Any number of spines may be
present in the input, but only pitch-related spines are processed. Given the
default invocation, the output corresponding to Example 15.1 is as follows:</p>
<p>`` <a href="#id13"><span class="problematic" id="id14">**</span></a>hint
`` <a href="#id15"><span class="problematic" id="id16">*</span></a>M4/4
`` =1-
`` P8
`` -
`` -
`` -
`` -
`` -
`` -
`` =2
`` M3 m3 P4
`` <a href="#id17"><span class="problematic" id="id18">*</span></a>-``</p>
<p>Notice that sonorities that contain only a single pitch result in the
outputting of a hyphen (<tt class="docutils literal"><span class="pre">-</span></tt>). The hyphen indicates that pitched material is
present, but there are no explicit harmonic intervals. Input records that
contain no pitch tokens result in the outputting of a null token (.). If a
single duplicated pitch is present, then the output will indicate a perfect
unison (P1).  Unisons can be suppressed from the output via the <strong>-u</strong> option
for <strong>hint</strong>.</p>
<p>When more than two pitches are present in a sonority, <em>permuted harmonic
intervals</em> can be calculated by invoking the <strong>-a</strong> option (i.e. <em>all</em>
intervals). For example, with the <strong>-a</strong> option, the final chord in Example
15.1 would produce the following output:</p>
<p>`` <a href="#id19"><span class="problematic" id="id20">**</span></a>hint
`` <a href="#id21"><span class="problematic" id="id22">*</span></a>all
`` M3 P5 P8 m3 m6 P4
`` <a href="#id23"><span class="problematic" id="id24">*</span></a>-``</p>
<p>Notice the presence of the <tt class="docutils literal"><span class="pre">*all</span></tt> tandem interpretation in the above
output. This interpretation is added to the output in order to warn users
that the representation should not be interpreted as stacked intervals.</p>
<p><em>Bass-related harmonic intervals</em> can be calculated with the <strong>-l</strong> option.
In this case, harmonic intervals are calculated with respect to the lowest
pitch in the sonority. This option is helpful in determining figured bass.
For the final chord in Example 12.1 the corresponding output would be</p>
<p>`` <a href="#id25"><span class="problematic" id="id26">**</span></a>hint
M3 P5 P8
<a href="#id27"><span class="problematic" id="id28">*</span></a>-``</p>
<p>Two further options for <strong>hint</strong> allow the user to tailor how the intervals
are represented. The <strong>-c</strong> option causes compound intervals such as a minor
tenth (m10) to be output as non-compound equivalents (m3). This means that
the interval of an octave (P8) will be rendered as a unison (P1). The <strong>-d</strong>
option suppresses the outputting of interval qualities and results in only
diatonic interval sizes being output. Again, this option is helpful in
determining figured bass. The command:</p>
<p>`` hint -clud``</p>
<p>will produce the following output for the final major chord in Example 12.1:</p>
<p>`` <a href="#id29"><span class="problematic" id="id30">**</span></a>hint
3 5
<a href="#id31"><span class="problematic" id="id32">*</span></a>-``</p>
</div>
<div class="section" id="propagating-data-using-the-ditto-command">
<h2>Propagating Data Using the <em>ditto</em> Command<a class="headerlink" href="#propagating-data-using-the-ditto-command" title="Permalink to this headline">¶</a></h2>
<p>In the default operation, <strong>hint</strong> calculates intervals only between pitches
that are explicitly present in an input data record. This means that passing
intervals are not calculated.</p>
<p>In order to generate passing intervals, we will make use of the Humdrum
<a href="#id111"><span class="problematic" id="id112">`**ditto**`_</span></a> command. The <strong>ditto</strong> command replaces null tokens with the
previous non-null data token in the same spine. Suppose we had an arbitrary
input such as the following:</p>
<p>`` <a href="#id33"><span class="problematic" id="id34">**</span></a>flip**flop
`` Axyz
`` .jkl
`` ..
`` Babc
`` ..
`` C.
`` ..
`` <em>-</em>-``</p>
<p>The effect of <strong>ditto</strong> would be the following:</p>
<p>`` <a href="#id35"><span class="problematic" id="id36">**</span></a>flip**flop
`` Axyz
`` Ajkl
`` Ajkl
`` Babc
`` Babc
`` Cabc
`` Cabc
`` <em>-</em>-``</p>
<p>Each null token has been replaced by the preceding data token within the
spine.</p>
<p>Consider the effect of <strong>ditto</strong> on the **kern data in Example 15.1:</p>
<p>`` ditto -p example15.1``</p>
<p>The following output results:</p>
<p>`` <a href="#id37"><span class="problematic" id="id38">**</span></a>kern**kern
`` <em>M4/4*M4/4
`` =1-=1-
`` 8c2cc
`` 8d(2cc)
`` 4e(2cc)
`` 8f8r
`` 8r8a
`` 8d8r
`` 8r8b
`` =2=2
`` 2.c 2.e2.g 2.cc
`` *-</em>-``</p>
<p>Notice that the half-note C5 has been repeated. The <strong>-p</strong> option has caused
each repetition of the data token to be placed in parentheses so they can be
easily recognized. By using <strong>ditto,</strong> we have transformed previously passing
intervals into explicit sonorities whose intervals can now be identified by
<strong>hint.</strong> We can combine the two commands in a single pipeline:</p>
<p>`` ditto example15.1 | hint``</p>
<p>The resulting output for Example 15.1 includes the two passing intervals (m7
and m6) in the first measure:</p>
<p>`` <a href="#id39"><span class="problematic" id="id40">**</span></a>hint
`` <a href="#id41"><span class="problematic" id="id42">*</span></a>M4/4
`` =1-
`` P8
`` m7
`` m6
`` -
`` -
`` -
`` -
`` =2
`` M3 m3 P4
`` <a href="#id43"><span class="problematic" id="id44">*</span></a>-``</p>
<p>The <a href="#id113"><span class="problematic" id="id114">`**ditto**,`_</span></a> command provides two additional options that are worthy of
note: the <strong>-s</strong> and <strong>-c</strong> options. The <strong>-s</strong> option allows <strong>ditto</strong> to
skip or ignore the presence of certain data records. Suppose, for example,
that we had a barline in the midst of some null tokens:</p>
<p>&gt; A
&gt; .
&gt; =
&gt; .</p>
<p>Often, we would like to propagate certain data tokens <em>around</em> some other
types of data tokens, so the result might be:</p>
<p>&gt; A
&gt; A
&gt; =
&gt; A</p>
<p>By providing <strong>ditto</strong> with a suitable regular expression, we can have the
data token <a href="#id45"><span class="problematic" id="id46">`</span></a>A&#8217; skip over the barline:</p>
<p>`` ditto -s ^=``</p>
<p>Without this option, the final data token in the above example would be an
equals-sign rather than the token <a href="#id47"><span class="problematic" id="id48">`</span></a>A&#8217;.</p>
<p>The <strong>-c</strong> option for <strong>ditto</strong> allows the user to selectively identify which
characters are propagated. For example, the following command will cause only
the lower-case letters <a href="#id49"><span class="problematic" id="id50">`</span></a>a&#8217; and <a href="#id51"><span class="problematic" id="id52">`</span></a>b&#8217; to be propagated:</p>
<p>`` ditto -c ab``</p>
<p>This feature allows users to replicate only certain kinds of data &#8211; such as
pitches, durations, dynamic marks, etc.</p>
<p>As we will see in future chapters, the <strong>ditto</strong> command proves useful in a
wide variety of situations apart from calculating intervals.</p>
</div>
<div class="section" id="using-the-ditto-and-hint-commands">
<h2>Using the <em>ditto</em> and <em>hint</em> Commands<a class="headerlink" href="#using-the-ditto-and-hint-commands" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s pause and consider some of the ways we might use the <strong>ditto</strong> and
<strong>hint</strong> commands. First, let&#8217;s determine if some input contains a particular
interval. Are there any augmented sixth intervals in Bach&#8217;s two-part
inventions? The following commands look for explicit and passing sixths
respectively. Notice the use of the <strong>-c</strong> option so octave equivalents will
also be identified:</p>
<p>`` hint -c inventio* | grep A6``
`` ditto -s ^= inventio* | hint -c | grep A6``</p>
<p>Are there any diminished octave intervals between any two concurrent notes in
any of Beethoven&#8217;s piano sonatas?</p>
<p>`` ditto -s ^= sonatas* | hint -a | grep d8``</p>
<p>In orchestral works, some pairs of instruments are more likely than others to
double each other at the unison or octave. What proportion of the intervals
formed by the oboe and flute notes are doubled? Since we are looking for a
proportion, we need to make two counts: the total number of (explicit)
intervals formed by the oboe and flute, and the number of those intervals
that are octave equivalents. (We will assume that there is only one oboe and
one flute part in the file <tt class="docutils literal"><span class="pre">Rimsky-K</span></tt>:)</p>
<p>`` extract -i &#8216;<a href="#id53"><span class="problematic" id="id54">*</span></a>Ioboe,*Iflts&#8217; Rimsky-K | hint -c | rid -GLId &gt;
&gt;&gt; | grep -c P1``
&gt;
&gt;
`` extract -i &#8216;<a href="#id55"><span class="problematic" id="id56">*</span></a>Ioboe,*Iflts&#8217; Rimsky-K | hint -c | rid -GLId &gt;
&gt;&gt; | grep -c [MmPAd]``</p>
<p>The second <strong>grep</strong> counts the total number of intervals by looking for all
of the interval qualities (major, minor, perfect, etc.)</p>
<p>Suppose we have extracted two horn parts from an orchestral score. Are octave
intervals between the horns more likely to occur on the dominant pitch or the
tonic pitch?</p>
<p>`` solfa horns &gt; temp1``
`` hint horns &gt; temp2``
`` assemble temp1 temp2 | grep -c ^do.*P8``
`` assemble temp1 temp2 | grep -c ^so.*P8``</p>
</div>
<div class="section" id="determining-implicit-harmonic-intervals">
<h2>Determining Implicit Harmonic Intervals<a class="headerlink" href="#determining-implicit-harmonic-intervals" title="Permalink to this headline">¶</a></h2>
<p>Recall that <em>implicit harmonic intervals</em> may be deemed to occur between
tones that don&#8217;t actually sound at the same time. This arises when one part
has a rest while the other part is sounding. Note that if we could eliminate
rest tokens, then we could use <strong>ditto</strong> to repeat previous pitch tokens in
place of the rests and so generate implicit harmonic intervals.</p>
<p>The <a href="#id115"><span class="problematic" id="id116">`**humsed**`_</span></a> command (described in <a href="#id117"><span class="problematic" id="id118">`Chapter 14`_</span></a>) is well suited to this
task. We want to transform any data token containing the letter <a href="#id57"><span class="problematic" id="id58">`</span></a>r&#8217; to a null
token. Consider the following substitution:</p>
<p>`` humsed &#8216;s/.*r.*/. ./&#8217; example15.1``</p>
<p>Unfortunately, this isn&#8217;t quite right. The above substitution will find any
data record containing the letter <a href="#id59"><span class="problematic" id="id60">`</span></a>r&#8217; and transform the entire record to a
single null data record. We need to address individual data tokens. In this
example, rest tokens may be in two possible positions: the first token in the
record or the last token in the record. We need two different regular
expressions to address each of these conditions. First, a regular expression
to identify rests in the first token:</p>
<p>`` /^[^ ]*r[^ ]* /``</p>
<p>(That is, the beginning of the record (^), followed by zero or more instances
of any character other than a tab ([^ ]*), followed by the letter <a href="#id61"><span class="problematic" id="id62">`</span></a>r&#8217;,
followed by zero or more instances of any character other than a tab ([^ ]*),
followed by a tab.)</p>
<p>Similarly, our second regular expression identifies rests in the last token:</p>
<p>`` / [^ ]*r[^ ]*$/``</p>
<p>Now we can eliminate rest tokens using the following two substitution
commands within a single invocation of <strong>humsed</strong>:</p>
<p>`` humsed &#8216;s/^[^ ]*r[^ ]* /. /; s/ [^ ]*r[^ ]*$/ ./&#8217; example15.1``</p>
<p>The following output results:</p>
<p>`` <a href="#id63"><span class="problematic" id="id64">**</span></a>kern**kern
`` <em>M4/4*M4/4
`` =1-=1-
`` 8c2cc
`` 8d.
`` 4e.
`` 8f.
`` .8a
`` 8d.
`` .8b
`` =2=2
`` 2.c 2.e2.g 2.cc
`` *-</em>-``</p>
<p>If we now apply <a href="#id119"><span class="problematic" id="id120">`**ditto**`_</span></a> and recalculate the intervals, the resulting
output will identify some implicit intervals as well:</p>
<p>`` humsed &#8216;s/^[^ ]*r[^ ]* /. /; s/ [^ ]*r[^ ]*$/ ./&#8217; example15.1 &gt;
&gt;&gt; | ditto -p``</p>
<p>Below we see the output assembled with the output from the corresponding
<a href="#id121"><span class="problematic" id="id122">`**hint**`_</span></a> command:</p>
<p>`` <a href="#id65"><span class="problematic" id="id66">**</span></a>kern**kern**hint
`` <em>M4/4*M4/4*M4/4
`` =1-=1-=1-
`` 8c2ccP8
`` 8d(2cc)m7
`` 4e(2cc)m6
`` 8f(2cc)P5
`` (8f)8aM3
`` 8d(8a)P5
`` (8d)8bM6
`` =2=2=2
`` 2.c 2.e2.g 2.ccM3 m3 P4
`` *-</em>-<a href="#id67"><span class="problematic" id="id68">*</span></a>-``</p>
</div>
<div class="section" id="the-ydelta-command">
<h2>The <em>ydelta</em> Command<a class="headerlink" href="#the-ydelta-command" title="Permalink to this headline">¶</a></h2>
<p>Often it is useful to represent intervals by the number of semitones (or some
other numerical value). We might begin by using the <strong>semits</strong> command to
translate Example 15.1 to a <a href="#id69"><span class="problematic" id="id70">``</span></a><a href="#id123"><span class="problematic" id="id124">`**semits```_</span></a> representation.</p>
<p>`` semits example15.1``</p>
<p>The resulting output would be as follows:</p>
<p>`` <a href="#id71"><span class="problematic" id="id72">**</span></a>semits**semits
`` <em>M4/4*M4/4
`` =1-=1-
`` 012
`` 2.
`` 4.
`` 5r
`` r9
`` 2r
`` r11
`` =2=2
`` 0 47 12
`` *-</em>-``</p>
<p>Numerical differences for values on a single data record can be computed
using the <a href="#id125"><span class="problematic" id="id126">`**ydelta**`_</span></a> command. The <strong>ydelta</strong> command is comparable to
<a href="#id127"><span class="problematic" id="id128">`**xdelta**,`_</span></a> however, numerical differences are calculated between
simultaneous numerical values (delta-<em>y</em>) rather than between successive
numerical values (delta-<em>x</em>).</p>
<p>Like the <a href="#id129"><span class="problematic" id="id130">`**hint**`_</span></a> command, <strong>ydelta</strong> always outputs a single spine. The
user must specify which input spines are to be processed using the <strong>-i</strong>
option. In the following command, only <a href="#id73"><span class="problematic" id="id74">**</span></a>semits input is to be processed:</p>
<p>`` semits example15.1 | ydelta -s = -i &#8216;<a href="#id75"><span class="problematic" id="id76">**</span></a>semits&#8217;``</p>
<p>The <strong>-s</strong> option allows the user to identify data records to be <em>skipped</em>
while processing. In this case, the regular expression <a href="#id77"><span class="problematic" id="id78">`</span></a>=&#8217; is used to
identify barlines, so measure numbers will be excluded when processing the
numerical data.</p>
<p>The above command yields the following output:</p>
<p>`` <a href="#id79"><span class="problematic" id="id80">**</span></a>Ysemits
`` *
`` =1-
`` 12
`` .
`` .
`` .
`` .
`` .
`` .
`` =2
`` 4 7 12
`` <a href="#id81"><span class="problematic" id="id82">*</span></a>-``</p>
<p>Notice that <strong>ydelta</strong> prepends the upper-case letter <cite>Y&#8217; to the given input
interpretation. All output values are calculated with respect to the lowest
value in the current data record. Hence, the ```4 7 12`</cite> in the last data
record means that there are pitches 4 semitones above the lowest note, 7
semitones above the lowest note, and 12 semitones above the lowest note. (If
necessary, the lowest or offset value for each record can be output in square
brackets using the <strong>-o</strong> option.)</p>
<p>Like the <strong>hint</strong> command, <strong>ydelta</strong> calculates numerical intervals only
when more than one value is present on a given input data record. As in the
case of <strong>hint,</strong> we might use the <strong>ditto</strong> command to propagate pitch
values &#8211; replacing all the null data tokens. A suitable command would be:</p>
<p>`` semits example15.1 | ditto -s = | ydelta -s = -i &#8216;<a href="#id83"><span class="problematic" id="id84">**</span></a>semits&#8217;``</p>
<p>The resulting output would be:</p>
<p>`` <a href="#id85"><span class="problematic" id="id86">**</span></a>Ysemits
`` *
`` =1-
`` 12
`` 10
`` 8
`` .
`` .
`` .
`` .
`` =2
`` 4 7 12
`` <a href="#id87"><span class="problematic" id="id88">*</span></a>-``</p>
</div>
<div class="section" id="more-examples-using-the-ydelta-command">
<h2>More Examples Using the <em>ydelta</em> Command<a class="headerlink" href="#more-examples-using-the-ydelta-command" title="Permalink to this headline">¶</a></h2>
<p>What is the average semitone distance between the cantus and altus voices in
Lassus motets? We can answer this question by first extracting the
appropriate voices and translating to a semitone representation.</p>
<p>`` extract -f 1,2 motet* | semits &gt; temp1``</p>
<p>Using <strong>ditto</strong> we can expand the pitched material so that concurrently-
sounding tones will generate explicit intervals. We then use <strong>ydelta</strong> to
calculate the actual semitone interval distances. The <a href="#id131"><span class="problematic" id="id132">`**rid**`_</span></a> command can
be used to eliminate non-data records, and the <strong>grep -v</strong> command can be
used to further eliminate barlines. Finally, we can calculate the mean
interval distance using the <strong>stats</strong> command:</p>
<p>`` ditto -s = temp1 | ydelta -s = -i &#8216;<a href="#id89"><span class="problematic" id="id90">**</span></a>semits&#8217; | rid -GLId &gt;
&gt;&gt; | grep -v = | stats``</p>
<p>Suppose we have a two-part input. Are there tritone intervals (explicit and
passing) that are not spelled as either an augmented fourth or diminished
fifth? We can answer this question by using both <strong>hint</strong> and <strong>ydelta</strong> and
a suitable sequence of <strong>grep</strong> commands. The <strong>ditto</strong> command is used to
ensure that both explicit and passing intervals are generated.</p>
<p>`` ditto -s = 2part | semits | ydelta -s = -i &#8216;<a href="#id91"><span class="problematic" id="id92">**</span></a>semits&#8217; &gt; temp1``
`` ditto -s = 2part | hint &gt; temp2``
`` assemble temp1 temp2 | rid -GLId | grep ^6 | grep -v A4 &gt;
&gt;&gt; | grep -v d5``</p>
<p>Notice the use of <strong>grep -v</strong> to first exclude any records that match an
augmented fourth, and then to exclude any remaining records that match a
diminished fifth.</p>
</div>
<hr class="docutils" />
<div class="section" id="reprise">
<h2>Reprise<a class="headerlink" href="#reprise" title="Permalink to this headline">¶</a></h2>
<p>Harmonic intervals can be measured in a variety of ways. They can be
characterized as diatonic qualities such as minor sevenths or augmented
sixths. They can be measured in terms of semitone distance &#8211; or even in
cents or hertz (frequency difference). Only the diatonic size may be of
interest (e.g., &#8220;a fifth&#8221;), and compound intervals (e.g., major tenth) can be
expressed by their non-compound equivalents (major third).</p>
<p>At least five types of harmonic intervals can be distinguished including
<em>explicit harmonic intervals</em>, <em>strong passing intervals</em>, <em>weak passing
intervals</em>, <em>strong implicit harmonic intervals</em> and <em>weak implicit harmonic
intervals</em>. In addition, we distinguished three different ways of
characterizing harmonic intervals: <em>stacked harmonic intervals</em>, <em>bass-
related harmonic intervals</em> and <em>permuted harmonic intervals</em>.</p>
<p>In this chapter we have seen how to use the <a href="#id133"><span class="problematic" id="id134">`**hint**`_</span></a> command to calculate
these various kinds of intervals. We have also seen how <a href="#id135"><span class="problematic" id="id136">`**ydelta**`_</span></a> can be
used to measure purely numerical distances between concurrent values.</p>
<hr class="docutils" />
</div>
</div>


          </div>
          <footer>
  <hr/>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <center><a href="../ch16/" class="btn btn-neutral float-right" title="Chapter 16: The Shell (II)">Next <span class="fa fa-arrow-circle-right"></span></a></center>
      
      
        <a href="../ch14/" class="btn btn-neutral" title="Chapter 14: Stream Editing"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
      
             <center><a href="../../_sources/guide/ch15.txt" rel="nofollow"> View page source</a></center>
      
    </div>
  



  <div role="contentinfo">
    <p>
    </p>
  </div>


</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
   
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-52162357-1', 'humdrum.org');
  ga('send', 'pageview');
</script>



</body>
</html>