

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Development Reference &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../../"/>
        <link rel="up" title="The Humdrum User Guide" href="../"/>
        <link rel="next" title="Development Reference" href="../musedata2kern/"/>
        <link rel="prev" title="Development Reference" href="../manual07a/"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installationguide/">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installationguide/downloading/">Downloading Humdrum</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../"><em>The Humdrum User Guide</em></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ch01/">Chapter 1: Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch02/">Chapter 2: Representing Music Using kern (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch03/">Chapter 3: Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch04/">Chapter 4:Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch05/">Chapter 5: The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch06/">Chapter 6: Representing Music Using ***kern*(II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch07/">Chapter 7: MIDI Output Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch08/">Chapter 8: The Shell (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch09/">Chapter 9: Searching with Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch10/">Chapter 10: Musical Uses of Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/">Chapter 11: Melodic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch12/">Chapter 12: Selecting Musical Parts and Passages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch13/">Chapter 13: Assembling Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch14/">Chapter 14: Stream Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch15/">Chapter 15: Harmonic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch16/">Chapter 16: The Shell (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch17/">Chapter 17: Creating Inventories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch18/">Chapter 18: Fingers, Footsteps and Frets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch19/">Chapter 19: Musical Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch20/">Chapter 20: Strophes, Verses, and Repeats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch21/">Chapter 21: Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch22/">Chapter 22: Classifying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch23/">Chapter 23: Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch24/">Chapter 24: The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch25/">Chapter 25: Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch26/">Chapter 26: Moving Signifiers Between Spines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch27/">Chapter 27: Text and Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch29/">Chapter 29: Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch30/">Chapter 30:MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch31/">Chapter 31: Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch32/">Chapter 32: The Shell (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch34/">Chapter 34: Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch35/">Chapter 35: Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch37/">Chapter 37: Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch38/">Chapter 38: Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch39/">Chapter 39: Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch40/">Chapter 40: Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.more/">Supplementary Humdrum Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.toc/">Humdrum Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../humdrum.problems/">HUMDRUM PROBLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux.perform/">Installing and Using the Humdrum &#8220;perform&#8221; Command under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/#bibliography">Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07/">Humdrum Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#humdrum-representation-development">Humdrum Representation Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#representation-assumptions">Representation Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#creating-new-humdrum-representations">Creating New Humdrum Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#defining-a-new-humdrum-interpretation-a-sample-problem">Defining a New Humdrum Interpretation: A Sample Problem</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href=""><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="#humdrum-software-development">Humdrum Software Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#standard-program-skeleton">Standard Program Skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#how-to-translate-musedata-files-to-humdrum">How To Translate MuseData Files to Humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/">Sample Research Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../representations.toc/">Humdrum Representation Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources/">Online Resources:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sample.problems/">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../extras/">Humdrum Extras</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../extras/intro/">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/dataEntry/">Data Entry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/melody/">Melody Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/harmony/">Harmony</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/rhythm/">Rhythm Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/musicSearching/">Music Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/MIDIrendering/">MIDI Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/graphicalNotation/">Graphical Musical Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/otherUtilities/">Other Useful Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/programmingTutorial/">Programming Tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/vimHighlighting/">Syntax Coloring in Vim</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../referencemanual/">Humdrum Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/assemble/">Assemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/hint/">hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/mint/">mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/key/">key</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../">Docs</a> &raquo;</li>
      
          <li><a href="../"><em>The Humdrum User Guide</em></a> &raquo;</li>
      
    <li><em>Development Reference</em></li>
      <li class="wy-breadcrumbs-aside">
        
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <img alt="" src="guide/../HumdrumIcon.gif" />
<img alt="Humdrum" src="guide/../HumdrumHeader.gif" />
<img alt="" src="guide/../HumdrumSpacer.gif" />
<div class="section" id="development-reference">
<h1><em>Development Reference</em><a class="headerlink" href="#development-reference" title="Permalink to this headline">¶</a></h1>
</div>
<hr class="docutils" />
<div class="section" id="humdrum-software-development">
<h1>Humdrum Software Development<a class="headerlink" href="#humdrum-software-development" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<p>The Humdrum Toolkit is necessarily limited in scope and there are many
functions that users will wish to add. In developing adjunct software tools,
it is imperative that the software conform to the following design
conventions:</p>
<ol class="arabic">
<li><p class="first">Programs should be general-purpose and adapt to a wide variety of
input circumstances.</p>
</li>
<li><p class="first">If possible, programs should be able to process any Humdrum input
rather than be limited to a given type of input interpretation.</p>
</li>
<li><p class="first">Command names should be limited to 8 characters in length in order to
ensure portability to DOS systems.</p>
</li>
<li><p class="first">Command names should preferably be the same as the output
interpretation produced by the command.</p>
</li>
<li><p class="first">Command names should not be unduly abbreviated since infrequently
used software is less easily remembered than frequently used system
commands.</p>
</li>
<li><p class="first">The command syntax should conform to standard POSIX conventions.</p>
</li>
<li><p class="first">Errors and warnings should be prefaced by giving the name of the
program or command which issues the error message. e.g.</p>
<p>&gt; `` vox: ERROR: voice 3 begins with a null token. ``</p>
</li>
<li><p class="first">Errors messages should be sent to &#8220;stderr&#8221; rather than to the
standard output.</p>
</li>
<li><p class="first">Wherever possible, <a href="#id1"><span class="problematic" id="id2">`</span></a>filter&#8217; programs should produce outputs that are
identical in structure to the input. More specifically, input line
numbers should correspond to output line numbers &#8211; where appropriate.</p>
</li>
<li><p class="first">Comments, interpretations, barlines, and double barlines should be
echoed in the output as the default condition (except in the case of
formatted non-Humdrum outputs).</p>
</li>
<li><p class="first">For many programs, the user should be able to skip the processing of
certain types of tokens (such as barlines) by specifying a .B &#8220;-s&#8221; flag
&#8211; followed by a user-defined regular expression. Tokens matching the
regular expression should be echoed unprocessed in the output stream.</p>
</li>
<li><p class="first">Programs should handle spine-path changes in a fashion appropriate to
the nature of the command.</p>
</li>
<li><p class="first">Comments and interpretations should be identified by explicitly
matching the exclamation mark or asterisk in the <em>first</em> column of the
input data token. Exclamation marks and asterisks are legitimate data
signifiers when not occurring in the first column of an input token.</p>
</li>
<li><p class="first">Where possible, outputs should <em>not</em> be formatted with descriptive
labels etc. The preferred output format is to have all outputs conform to
the Humdrum syntax. This ensures that all outputs can themselves be used
as inputs to other Humdrum programs.</p>
</li>
<li><p class="first">Programs should generally avoid assumptions concerning context-
dependent inputs. Inputs should be assumed to be context-free.</p>
</li>
<li><p class="first">Programs should be able to handle inputs with unexpected user
extensions or representational addenda &#8211; such as the presence of
spurious or unknown characters.</p>
</li>
<li><p class="first">Programs that search or examine inputs for certain features,
properties, or errors should return a <em>null</em> output if nothing is found.
Messages indicating that <a href="#id3"><span class="problematic" id="id4">`</span></a>nothing was found&#8217; should be avoided. &#8220;Silence
is golden.&#8221;</p>
</li>
</ol>
</div>
<div class="section" id="standard-program-skeleton">
<h1>Standard Program Skeleton<a class="headerlink" href="#standard-program-skeleton" title="Permalink to this headline">¶</a></h1>
<p>Much of the Humdrum software was originally developed using the AWK
programming language. AWK was designed by <a class="reference external" href="manual.bibliog.html#Aho">Alfred Aho, Brian Kernighan, and
Peter Weinberger.</a> It is syntactically very similar to the C programming
language, but is easier to use and promotes better software productivity. AWK
provides powerful text manipulation features that make it admirably suited to
the creation of Humdrum software. AWK is also a very easy language to learn,
and is an excellent first language for novice programmers.</p>
<p>The Humdrum Toolkit includes programing skeletons that may provide a useful
starting place for software development using AWK. Two skeleton files are
provided with the toolkit: <a href="#id13"><span class="problematic" id="id14">`**skeleton.ksh**`_</span></a> and <a href="#id15"><span class="problematic" id="id16">`**skeleton.awk**`_</span></a>. The
kornshell file (<strong>.ksh</strong>) parses the command line, issues appropriate error
messages if the command is improperly invoked, displays a help screen if
necessary, and assembles the command parameters to invoke an awk script for
the command (<strong>.awk</strong>).</p>
<p>The <a href="#id17"><span class="problematic" id="id18">`**skeleton.awk**`_</span></a> skeleton contains a main loop that is normally
executed for each record of input. A series of useful functions are included
in the AWK skeleton program. These functions include:</p>
<ol class="arabic simple">
<li><strong>Parse_command.</strong> This function checks that the input passed from
the corresponding kornshell script for the command. The Parse_command
function contains a list of valid options and assigns the passed
parameters to the appropriate option variables.</li>
<li><strong>Store_indicators.</strong> This function allows the spine-path indicators
for the current record to be stored in the array <strong>path_indicator</strong> so
that they may be used later.</li>
<li><strong>Store_new_interps.</strong> This function stores the new interpretations
found in an interpretation record for each spine.</li>
<li><strong>Process_indicators.</strong> This function takes the spine-path indicators
that were stored in the array &#8216;path_indicator&#8217; in the function
&#8216;store_indicators&#8217; and manipulates the arrays &#8216;path_indicator&#8217; and
&#8216;current_interp&#8217; according to the contents of the array &#8216;path_indicator&#8217;.</li>
<li><strong>Ins_array_pos.</strong> This function inserts new positions in the arrays
&#8216;path_indicator&#8217;, &#8216;current_interp&#8217;, and &#8216;current_key&#8217; and copies elements
so that everything is preserved</li>
<li><strong>Del_array_pos.</strong> Performs the opposite of function &#8216;ins_array_pos&#8217;.</li>
<li><strong>Exchange_spines.</strong> This function exhanges two spines by exchanging
the corresponding elements in current_interp.</li>
</ol>
<hr class="docutils" />
<ul class="simple">
<li>` <a href="#id5"><span class="problematic" id="id6">**</span></a>Humdrum Toolkit Main Page**`_</li>
<li>` <a href="#id7"><span class="problematic" id="id8">**</span></a>Developer&#8217;s Guide Main Page**`_</li>
<li>` <a href="#id9"><span class="problematic" id="id10">**</span></a>Humdrum Toolkit User Guide**`_</li>
<li>` <a href="#id11"><span class="problematic" id="id12">**</span></a>Humdrum Toolkit Command Documentation**`_</li>
</ul>
</div>


          </div>
          <footer>
  <hr/>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <center><a href="../musedata2kern/" class="btn btn-neutral float-right" title="Development Reference">Next <span class="fa fa-arrow-circle-right"></span></a></center>
      
      
        <a href="../manual07a/" class="btn btn-neutral" title="Development Reference"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
      
             <center><a href="../../_sources/guide/manual07b.txt" rel="nofollow"> View page source</a></center>
      
    </div>
  



  <div role="contentinfo">
    <p>
    </p>
  </div>


</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
   
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-52162357-1', 'humdrum.org');
  ga('send', 'pageview');
</script>



</body>
</html>