

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter 34: Serial Processing &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../../"/>
        <link rel="up" title="The Humdrum User Guide" href="../"/>
        <link rel="next" title="Chapter 35: Layers" href="../ch35/"/>
        <link rel="prev" title="&lt;no title&gt;" href="../ch33/"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Humdrum Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../install/github/">Installing Humdrum Tools from GitHub</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../">The Humdrum User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ch01/">Chapter 1: Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch02/">Chapter 2: Representing Music Using **kern (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch03/">Chapter 3: Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch04/">Chapter 4:Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch05/">Chapter 5: The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch06/">Chapter 6: Representing Music Using **kern (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch07/">Chapter 7: MIDI Output Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch08/">Chapter 8: The Shell (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch09/">Chapter 9: Searching with Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch10/">Chapter 10: Musical Uses of Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/">Chapter 11: Melodic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch12/">Chapter 12: Selecting Musical Parts and Passages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch13/">Chapter 13: Assembling Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch14/">Chapter 14: Stream Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch15/">Chapter 15: Harmonic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch16/">Chapter 16: The Shell (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch17/">Chapter 17: Creating Inventories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch18/">Chapter 18: Fingers, Footsteps and Frets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch19/">Chapter 19: Musical Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch20/">Chapter 20: Strophes, Verses, and Repeats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch21/">Chapter 21: Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch22/">Chapter 22: Classifying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch23/">Chapter 23: Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch24/">Chapter 24: The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch25/">Chapter 25: Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch26/">Chapter 26: Moving Signifiers Between Spines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch27/">Chapter 27: Text and Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch29/">Chapter 29: Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch30/">Chapter 30:MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch31/">Chapter 31: Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch32/">Chapter 32: The Shell (IV)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Chapter 34: Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch35/">Chapter 35: Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch37/">Chapter 37: Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch38/">Chapter 38: Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch39/">Chapter 39: Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch40/">Chapter 40: Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.more/">Supplementary Humdrum Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.toc/">Humdrum Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../humdrum.problems/">HUMDRUM PROBLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux.perform/">Installing and Using the Humdrum &#8220;perform&#8221; Command under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/#bibliography">Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07/">Humdrum Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#humdrum-representation-development">Humdrum Representation Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#representation-assumptions">Representation Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#creating-new-humdrum-representations">Creating New Humdrum Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#defining-a-new-humdrum-interpretation-a-sample-problem">Defining a New Humdrum Interpretation: A Sample Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/#humdrum-software-development">Humdrum Software Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/#standard-program-skeleton">Standard Program Skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#how-to-translate-musedata-files-to-humdrum">How To Translate MuseData Files to Humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/">Sample Research Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../representations.toc/">Humdrum Representation Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources/">Online Resources:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sample.problems/">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../humextra/">Humdrum Extras</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/intro/">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/data/">Data Entry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/melody/">Melody Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/harmony/">Harmony</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/rhythm/">Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/searching/">Music Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/midi/">MIDI Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/notation/">Graphical Musical Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/other/">Other Useful Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/programming/">Humdrum Extras Programming Tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/vimHighlighting/">Syntax Coloring in Vim</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../referencemanual/">Humdrum Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/assemble/">Assemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/hint/">hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/mint/">mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/key/">key</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../">Docs</a> &raquo;</li>
      
          <li><a href="../">The Humdrum User Guide</a> &raquo;</li>
      
    <li>Chapter 34: Serial Processing</li>
      <li class="wy-breadcrumbs-aside">
        
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="chapter-34-serial-processing">
<h1>Chapter 34: Serial Processing<a class="headerlink" href="#chapter-34-serial-processing" title="Permalink to this headline">¶</a></h1>
<p>Humdrum provides a handful of specialized tools for serial and serial-
inspired analytic processing. In this chapter we introduce the <a href="#id117"><span class="problematic" id="id118">`**reihe**`_</span></a>,
<a href="#id119"><span class="problematic" id="id120">`**pcset**`_</span></a>, <a href="#id121"><span class="problematic" id="id122">`**iv**`_</span></a>, <a href="#id123"><span class="problematic" id="id124">`**pf**`_</span></a> and <a href="#id125"><span class="problematic" id="id126">`**nf**`_</span></a> commands These commands
reveal their greatest power when used in conjunction with Humdrum tools we
have already encountered &#8211; such as <a href="#id127"><span class="problematic" id="id128">`**context**`_</span></a>, <a href="#id129"><span class="problematic" id="id130">`**humsed**`_</span></a> and
<a href="#id131"><span class="problematic" id="id132">`**patt**`_</span></a>.</p>
<p>The chapter culminates with a script that automatically identifies 12-tone
row variants in complex orchestral scores. The general approach is
instructive for applications beyond serial analysis.</p>
<div class="section" id="pitch-class-representation">
<h2>Pitch-Class Representation<a class="headerlink" href="#pitch-class-representation" title="Permalink to this headline">¶</a></h2>
<p>In set theoretic applications it is common to use pitch-class
representations. The <a href="#id133"><span class="problematic" id="id134">`**pc**`_</span></a> command can be used to transform pitch-related
representations (such as <a href="#id1"><span class="problematic" id="id2">``</span></a><strong>pitch``_, ``**freq``_ and **kern_) to
a conventional pitch-class notation where pitch-class C is represented by the
value zero. With the **-a</strong> option, <strong>pc</strong> will generate outputs where the pc
values <a href="#id3"><span class="problematic" id="id4">`</span></a>10&#8217; and <a href="#id5"><span class="problematic" id="id6">`</span></a>11&#8217; are rendered by the alphabetic characters <a href="#id7"><span class="problematic" id="id8">`</span></a>A&#8217; and <a href="#id9"><span class="problematic" id="id10">`</span></a>B&#8217;
respectively. Using the alpha-numeric pc representation is recommended; it
proves to be especially convenient for searching tasks since, otherwise, the
characters 1 and 0 do not uniquely specify a single pitch-class type.</p>
</div>
<div class="section" id="the-pcset-command">
<h2>The <em>pcset</em> Command<a class="headerlink" href="#the-pcset-command" title="Permalink to this headline">¶</a></h2>
<p>A common set theoretic task is identifying occurrences of various pitch-class
set forms. Figure 34.1 identifies the set forms for several sample vertical
sonorities. These forms are identified using standard numerical designations
(see Forte, 1973; Rahn, 1980). Set forms are insensitive to transposition,
pitch-inversion, and pitch spelling so all major and minor triads are
identified as pitch-class set 3-11. Similarly, the dominant seventh chord and
<a href="#id11"><span class="problematic" id="id12">`</span></a>Tristan&#8217; chord are similarly related by inversion so both are identified as
pc set 4-27.</p>
<p>Figure 34.1. Examples of PC set forms.</p>
<p>&gt; .. image:: guide.figures/ch34.1.gif</p>
<p>The <a href="#id135"><span class="problematic" id="id136">`**pcset**`_</span></a> command identifies pitch-class sets from <a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">**</span></a>pc``_ or
<a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">**</span></a>semits``_ input. Illustrated below are the corresponding **kern_,
<a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">**</span></a>pc``_ and <a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">**</span></a>pcset``_ representations for Example 34.1.</p>
<p>**kern**pc``**pcset
<tt class="docutils literal"><span class="pre">4c``0``1-1</span>
<span class="pre">``4c</span> <span class="pre">4d``0</span> <span class="pre">2``2-2</span>
<span class="pre">``4c</span> <span class="pre">4e</span> <span class="pre">4g``0</span> <span class="pre">4</span> <span class="pre">7``3-11</span>
<span class="pre">``4e</span> <span class="pre">4g</span> <span class="pre">4cc``4</span> <span class="pre">7</span> <span class="pre">0``3-11</span>
<span class="pre">``4g</span> <span class="pre">4cc</span> <span class="pre">4ee``7</span> <span class="pre">0</span> <span class="pre">4``3-11</span>
<span class="pre">``4c</span> <span class="pre">4e-</span> <span class="pre">4g``0</span> <span class="pre">3</span> <span class="pre">7``3-11</span>
<span class="pre">``4c</span> <span class="pre">4e</span> <span class="pre">4g</span> <span class="pre">4b-``0</span> <span class="pre">4</span> <span class="pre">7</span> <span class="pre">10``4-27</span>
<span class="pre">``4c#</span> <span class="pre">4e#</span> <span class="pre">4g#</span> <span class="pre">4b``1</span> <span class="pre">5</span> <span class="pre">8</span> <span class="pre">11``4-27</span>
<span class="pre">``4f</span> <span class="pre">4b</span> <span class="pre">4dd#</span> <span class="pre">4gg#``5</span> <span class="pre">11</span> <span class="pre">3</span> <span class="pre">8</span> <span class="pre">``4-27</span>
<span class="pre">``*-``*-``*-</span></tt></p>
<p>Suppose we wanted to identify the pc sets for successive vertical sonorities
in the first movement of Webern&#8217;s Opus 24 concerto. First, we translate the
input to a pitch-class representation, and then we apply the <strong>pcset</strong>
command:</p>
<p><tt class="docutils literal"><span class="pre">pc</span> <span class="pre">opus24</span> <span class="pre">|</span> <span class="pre">pcset</span></tt></p>
<p>Of course this command will only identify the set forms for pitches that have
concurrent attacks. If any pitch is sustained, <a href="#id137"><span class="problematic" id="id138">`**pcset**`_</span></a> won&#8217;t know that
some null tokens indicate sustained pitch activity. We can rectify this by
using the <a href="#id139"><span class="problematic" id="id140">`**ditto**`_</span></a> command (<a href="#id141"><span class="problematic" id="id142">`Chapter 15`_</span></a>) to fill-out the null tokens:</p>
<p><tt class="docutils literal"><span class="pre">pc</span> <span class="pre">opus24</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">^=</span> <span class="pre">|</span> <span class="pre">pcset</span></tt></p>
<p>If we wanted, we could assemble the resulting <tt class="docutils literal"><span class="pre">**pcset``_</span> <span class="pre">spine</span> <span class="pre">to</span> <span class="pre">the</span>
<span class="pre">original</span> <span class="pre">input.</span> <span class="pre">This</span> <span class="pre">would</span> <span class="pre">allow</span> <span class="pre">us</span> <span class="pre">to</span> <span class="pre">search</span> <span class="pre">for</span> <span class="pre">particular</span> <span class="pre">patterns</span> <span class="pre">that</span>
<span class="pre">are</span> <span class="pre">coordinated</span> <span class="pre">with</span> <span class="pre">certain</span> <span class="pre">pitch-class</span> <span class="pre">sets.</span> <span class="pre">For</span> <span class="pre">example,</span> <span class="pre">we</span> <span class="pre">might</span> <span class="pre">be</span>
<span class="pre">interested</span> <span class="pre">in</span> <span class="pre">comparing</span> <span class="pre">the</span> <span class="pre">pitch-class</span> <span class="pre">sets</span> <span class="pre">that</span> <span class="pre">coincide</span> <span class="pre">with</span> <span class="pre">the</span>
<span class="pre">beginnings</span> <span class="pre">of</span> <span class="pre">slurs/phrases</span> <span class="pre">versus</span> <span class="pre">those</span> <span class="pre">pitch-class</span> <span class="pre">sets</span> <span class="pre">coinciding</span> <span class="pre">with</span> <span class="pre">the</span>
<span class="pre">ends</span> <span class="pre">of</span> <span class="pre">slurs/phrases.</span> <span class="pre">First</span> <span class="pre">we</span> <span class="pre">generate</span> <span class="pre">the</span> <span class="pre">``**pcset</span></tt> spine:</p>
<p><tt class="docutils literal"><span class="pre">pc</span> <span class="pre">opus24</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">^=</span> <span class="pre">|</span> <span class="pre">pcset</span> <span class="pre">&gt;</span> <span class="pre">opus24.pcs</span></tt></p>
<p>Then we assemble this spine to the original input score:</p>
<p><tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">opus24</span> <span class="pre">opus24.pcs</span> <span class="pre">&gt;</span> <span class="pre">opus24.all</span></tt></p>
<p>Now we can search for data records containing phrase (<a href="#id143"><span class="problematic" id="id144">`{}&#8217;) or slur (&#8216;()&#8217;)
markers. Using `**yank**`_</span></a> <strong>-m ... -r 0</strong> rather than <strong>grep</strong> assures that
the output retains the Humdrum syntax (see <a href="#id145"><span class="problematic" id="id146">`Chapter 12`_</span></a>). Maintaining the
Humdrum syntax will allow us to use <a href="#id147"><span class="problematic" id="id148">`**extract**`_</span></a> to isolate just the
<tt class="docutils literal"><span class="pre">**pcset</span></tt> data. Finally, we create an inventory of the pc sets. The process
is repeated &#8211; once for beginning slurs/phrases, and once for ends of
slurs/phrases.</p>
<p><tt class="docutils literal"><span class="pre">yank</span> <span class="pre">-m</span> <span class="pre">'[{(]'</span> <span class="pre">-r</span> <span class="pre">0</span> <span class="pre">opus24.all</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**pcset'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">|</span> <span class="pre">uniq</span> <span class="pre">-c</span></tt>
&gt;
<tt class="docutils literal"><span class="pre">yank</span> <span class="pre">-m</span> <span class="pre">'[)}]'</span> <span class="pre">-r</span> <span class="pre">0</span> <span class="pre">opus24.all</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**pcset'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">|</span> <span class="pre">uniq</span> <span class="pre">-c</span></tt></p>
<p>Two pitch-class set inventories will be generated: one inventory for the
beginnings of phrases/slurs and one for phrase/slur endings.</p>
<p>Incidentally, the <strong>pcset</strong> command supports a <strong>-c</strong> option that can be used
to generate the set <em>complement</em> rather than the principal set form.</p>
</div>
<div class="section" id="prime-form-and-normal-form">
<h2>Prime Form and Normal Form<a class="headerlink" href="#prime-form-and-normal-form" title="Permalink to this headline">¶</a></h2>
<p>The 3-11 set form designates both the major and minor chords (since they are
symmetrical). In order to distinguish symmetrical forms, it is sometimes
useful to represent pitch-class sets using either <em>prime form</em> (the <a href="#id149"><span class="problematic" id="id150">`**pf**`_</span></a>
command) or <em>normal form</em> (the <a href="#id151"><span class="problematic" id="id152">`**nf**`_</span></a> command).</p>
<p>Suppose we wanted to count the proportion of phrase endings in music by Alban
Berg where the phrase ends on either a major or minor chord. First, we locate
all works composed by Berg:</p>
<p><tt class="docutils literal"><span class="pre">BERG=`find</span> <span class="pre">/scores</span> <span class="pre">-type</span> <span class="pre">f</span> <span class="pre">-exec</span> <span class="pre">grep</span> <span class="pre">-l</span> <span class="pre">'!!!COM.*Berg,'</span> <span class="pre">&quot;{}&quot;</span> <span class="pre">&quot;;&quot;</span></tt></p>
<p>Let&#8217;s put all the Berg works in a single temporary file:</p>
<p><tt class="docutils literal"><span class="pre">cat</span> <span class="pre">$BERG</span> <span class="pre">&gt;</span> <span class="pre">AllBerg</span></tt></p>
<p>Next we generate the normal set forms:</p>
<p><tt class="docutils literal"><span class="pre">pc</span> <span class="pre">AllBerg</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">^=</span> <span class="pre">|</span> <span class="pre">nf</span> <span class="pre">&gt;</span> <span class="pre">AllBerg.nf</span></tt></p>
<p>Assemble the <a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">**</span></a>nf``_ spine with the original scores:</p>
<p><tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">AllBerg</span> <span class="pre">AllBerg.nf</span> <span class="pre">&gt;</span> <span class="pre">AllBerg.all</span></tt></p>
<p>Now we&#8217;re ready to count the number of phrases that match the appropriate
patterns. First, count the total number of phrases:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-c</span> <span class="pre">'}'</span> <span class="pre">AllBerg.all</span></tt></p>
<p>Count the number of phrases that end with a major chord:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-c</span> <span class="pre">'}.*\t(047)'</span> <span class="pre">AllBerg.all</span></tt></p>
<p>And count the number of phrases that end with a minor chord:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-c</span> <span class="pre">'}.*\t(037)'</span> <span class="pre">AllBerg.all</span></tt></p>
</div>
<div class="section" id="interval-vectors-using-the-iv-command">
<h2>Interval Vectors Using the <em>iv</em> Command<a class="headerlink" href="#interval-vectors-using-the-iv-command" title="Permalink to this headline">¶</a></h2>
<p>Interval vectors identify the frequency of occurrence of various interval-
classes for a given pitch-class set. The <a href="#id153"><span class="problematic" id="id154">`**iv**`_</span></a> command generates the six-
element interval vector for any of several types of inputs &#8211; including
semitones (<a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">**</span></a>semits``_), pitch-class (<a href="#id37"><span class="problematic" id="id38">``</span></a><a href="#id39"><span class="problematic" id="id40">**</span></a>pc``_), normal form
(<a href="#id41"><span class="problematic" id="id42">``</span></a><a href="#id43"><span class="problematic" id="id44">**</span></a>nf``_), prime form (<a href="#id45"><span class="problematic" id="id46">``</span></a><a href="#id47"><span class="problematic" id="id48">**</span></a>pf``_), and pitch-class set
(<a href="#id49"><span class="problematic" id="id50">``</span></a><a href="#id51"><span class="problematic" id="id52">**</span></a>pcset``_). The following example shows several different pitch-class
sets, their corresponding pitch-class sets and (right-most spine), the
associated interval vector.</p>
<p><tt class="docutils literal"><span class="pre">`**pc``**pcset``**name**iv</span>
<span class="pre">``0``1-1``tone``&lt;000000&gt;</span>
<span class="pre">``0</span> <span class="pre">2``2-2``major</span> <span class="pre">second&lt;010000&gt;</span>
<span class="pre">``0</span> <span class="pre">3</span> <span class="pre">7``3-11``minor</span> <span class="pre">triad&lt;001110&gt;</span>
<span class="pre">``0</span> <span class="pre">4</span> <span class="pre">7``3-11``major</span> <span class="pre">triad&lt;001110&gt;</span>
<span class="pre">``0</span> <span class="pre">4</span> <span class="pre">7</span> <span class="pre">10``4-27``dominant</span> <span class="pre">seventh&lt;012111&gt;</span>
<span class="pre">``1</span> <span class="pre">5</span> <span class="pre">8</span> <span class="pre">11``4-27``dominant</span> <span class="pre">seventh&lt;012111&gt;</span>
<span class="pre">&gt;</span> <span class="pre">*-*-``*-``*-</span></tt></p>
<p>Suppose we wanted to determine whether Arnold Schoenberg tended to use
simultaneities that have more semitone (interval-class 1) relations and fewer
tritone (interval-class 6) relations. As before, we might translate his
scores to pitch-class notation, fill-out the sonorities using <strong>ditto</strong>, and
then determine the associated interval vectors for each sonority. Interval
vectors without semitone relations will have a zero in the first vector
position (i.e., &lt;0.....&gt;) whereas interval vectors without tritone relations
will have a zero in the last position (i.e., &lt;.....0&gt;).</p>
<p><tt class="docutils literal"><span class="pre">pc</span> <span class="pre">schoenberg*</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">^=</span> <span class="pre">|</span> <span class="pre">iv</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-c</span> <span class="pre">'&lt;0.....&gt;'</span></tt>
<tt class="docutils literal"><span class="pre">pc</span> <span class="pre">schoenberg*</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">^=</span> <span class="pre">|</span> <span class="pre">iv</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-c</span> <span class="pre">'&lt;.....0&gt;'</span></tt></p>
</div>
<div class="section" id="segmentation-using-the-context-command">
<h2>Segmentation Using the <em>context</em> Command<a class="headerlink" href="#segmentation-using-the-context-command" title="Permalink to this headline">¶</a></h2>
<p>So far, we have processed only &#8220;vertical&#8221; sets of concurrent pitches. In set-
theory analyses, there are many other important ways of &#8220;segmenting&#8221; the
musical pitches into pitch-class sets. As we saw in <a href="#id155"><span class="problematic" id="id156">`Chapter 19,`_</span></a> the
<a href="#id157"><span class="problematic" id="id158">`**context**`_</span></a> command provides a useful way of grouping together successive
data tokens.</p>
<p>Suppose, for example, we wanted to analyze set forms in Claude Debussy&#8217;s
<em>Syrinx</em> for solo flute. The opening measures are shown in Example 34.1.</p>
<p><strong>Example 34.1.</strong> From Claude Debussy, <em>Syrinx</em> for flute.</p>
<p>&gt; .. image:: guide.figures/ch34.2.gif</p>
<p>There are a number of ways we might want to try segmenting the melodic line.
One possibility is to regard slurs or phrases as indicating appropriate
groups. Recall that the <strong>-b</strong> and <strong>-e</strong> options for <a href="#id159"><span class="problematic" id="id160">`**context**`_</span></a> are used
to specify regular expressions that match the beginning and end
(respectively) of the context group: We can invoke an appropriate <strong>context</strong>
command, translate the output to a pitch-class representation, and then use
the <a href="#id161"><span class="problematic" id="id162">`**pcset**`_</span></a> command to identify the set names:</p>
<p><tt class="docutils literal"><span class="pre">context</span> <span class="pre">-b</span> <span class="pre">'[{(]'</span> <span class="pre">-e</span> <span class="pre">'[})]'</span> <span class="pre">syrinx</span> <span class="pre">|</span> <span class="pre">pc</span> <span class="pre">|</span> <span class="pre">pcset</span></tt></p>
<p>Perhaps we might consider gathering groups of three successive notes
together, and then generating an inventory of the set forms associated with
such a segmentation:</p>
<p><tt class="docutils literal"><span class="pre">context</span> <span class="pre">-n</span> <span class="pre">3</span> <span class="pre">-o</span> <span class="pre">'[=r]'</span> <span class="pre">syrinx</span> <span class="pre">|</span> <span class="pre">pc</span> <span class="pre">|</span> <span class="pre">pcset</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">|</span> <span class="pre">uniq</span> <span class="pre">-c</span></tt></p>
<p>Another possibility is to treat rests as segmentation boundaries.</p>
<p><tt class="docutils literal"><span class="pre">context</span> <span class="pre">-e</span> <span class="pre">r</span> <span class="pre">syrinx</span> <span class="pre">|</span> <span class="pre">pc</span> <span class="pre">|</span> <span class="pre">pcset</span></tt></p>
<p>When a work consists of more than one instrument or part, useful
segmentations can be made by extracting each instrument individually, using
<a href="#id163"><span class="problematic" id="id164">`**context**`_</span></a> to generate musically-pertinent sets, and then assembling all
of the <a href="#id53"><span class="problematic" id="id54">``</span></a><a href="#id55"><span class="problematic" id="id56">**</span></a>pcset``_ spines into a single file.</p>
</div>
<div class="section" id="the-reihe-command">
<h2>The <em>reihe</em> Command<a class="headerlink" href="#the-reihe-command" title="Permalink to this headline">¶</a></h2>
<p>Twelve-tone music raises additional analysis issues. Variants of a tone-row
can be generated using the <a href="#id165"><span class="problematic" id="id166">`**reihe**`_</span></a> command. Given some input, <strong>reihe</strong>
will output a user-specified transformation. Options are provided for prime
transpositions (<strong>-P</strong> option), for inversions (<strong>-I</strong> option), for
retrogrades (<strong>-R</strong> option) and for retrograde-inversions (<strong>-RI</strong> option).</p>
<p>Inputs do not have to be 12-tone rows. The 5-tone row used in Igor
Stravinsky&#8217;s &#8220;Dirge-Canons&#8221; from <em>In Memoriam Dylan Thomas</em> is as follows:</p>
<p><tt class="docutils literal"><span class="pre">**pc</span>
<span class="pre">``2</span>
<span class="pre">``3</span>
<span class="pre">``6</span>
<span class="pre">``5</span>
<span class="pre">``4</span>
<span class="pre">``*-</span></tt></p>
<p>The following command will generate a prime transposition of the tone-row so
that it begins on pitch-class 6:</p>
<p><tt class="docutils literal"><span class="pre">reihe</span> <span class="pre">-P</span> <span class="pre">6</span> <span class="pre">memoriam</span></tt></p>
<p>The result is:</p>
<p><tt class="docutils literal"><span class="pre">**pc</span>
<span class="pre">``6</span>
<span class="pre">``7</span>
<span class="pre">``10</span>
<span class="pre">``9</span>
<span class="pre">``8</span>
<span class="pre">``*-</span></tt></p>
<p>Generating the inversion beginning at pitch-class 2 would be carried out
using the following command.</p>
<p><tt class="docutils literal"><span class="pre">reihe</span> <span class="pre">-a</span> <span class="pre">-I</span> <span class="pre">2</span> <span class="pre">memoriam</span></tt></p>
<p>The <strong>-a</strong> option causes the values <a href="#id57"><span class="problematic" id="id58">`</span></a>10&#8217; and <a href="#id59"><span class="problematic" id="id60">`</span></a>11&#8217; to be rendered
alphabetically as <a href="#id61"><span class="problematic" id="id62">`</span></a>A&#8217; and <a href="#id63"><span class="problematic" id="id64">`</span></a>B&#8217;.</p>
<p>The <a href="#id167"><span class="problematic" id="id168">`**reihe**`_</span></a> command also provides a <em>shift</em> operation (<strong>-S</strong>) that is
useful for shifting the serial order of data tokens forward or backward.
Consider the following command:</p>
<p><tt class="docutils literal"><span class="pre">reihe</span> <span class="pre">-S</span> <span class="pre">-1</span> <span class="pre">memoriam</span></tt></p>
<p>This shifts all of the data tokens back one position so the data begins with
the second value in the input, and the first value is moved to the end:</p>
<p><tt class="docutils literal"><span class="pre">**pc</span>
<span class="pre">``3</span>
<span class="pre">``6</span>
<span class="pre">``5</span>
<span class="pre">``4</span>
<span class="pre">``2</span>
<span class="pre">``*-</span></tt></p>
<p>The shift option for <strong>reihe</strong> can be used to shift <em>any</em> type of data &#8211; not
just pitches of pitch-classes. For example, one might use the shift option to
rotationally permute dynamic markings, text, durations, articulation marks,
or any other type of Humdrum data. In <a href="#id169"><span class="problematic" id="id170">`Chapter 38`_</span></a> we will see how the shift
option for <strong>reihe</strong> can be effectively used in many applications apart from
serial analysis.</p>
</div>
<div class="section" id="generating-a-set-matrix">
<h2>Generating a Set Matrix<a class="headerlink" href="#generating-a-set-matrix" title="Permalink to this headline">¶</a></h2>
<p>The first step in automated row-finding is to generate a set matrix of all
the set variants. Typically, the user begins with a hypothesized tone row.
Suppose the tone-row was stored in a file called <tt class="docutils literal"><span class="pre">primerow</span></tt>. From this we
can generate the entire set matrix. There is a Humdrum <strong>matrix</strong> command
that automatically generates a set matrix, but let&#8217;s create our own script to
see how this can be done.</p>
<p>The following script uses the <a href="#id171"><span class="problematic" id="id172">`**reihe**`_</span></a> command to generate each set form.
Each form is stored in a separate file with names such as <tt class="docutils literal"><span class="pre">I8</span></tt> and <tt class="docutils literal"><span class="pre">RI3</span></tt>.
There are two noteworthy features to this script. Notice that the
alphanumeric system (<strong>-a</strong> option) is used &#8211; so the values <a href="#id65"><span class="problematic" id="id66">`</span></a>A&#8217; and <a href="#id67"><span class="problematic" id="id68">`</span></a>B&#8217; are
used rather than <a href="#id69"><span class="problematic" id="id70">`</span></a>10&#8217; and <a href="#id71"><span class="problematic" id="id72">`</span></a>11&#8217;; this will facilitate searching. Also notice
that our script provides an option that allows us to specify <em>partial</em> rows:
that is, we can store (say) only the first 5 notes in each tone row file.
This feature will also prove useful when doing an automatic search.</p>
<p>&gt;
<a href="#id73"><span class="problematic" id="id74">``</span></a>###################################################################
# MATRIX
# This script generates a tone-row matrix for a specified prime row.
# The -n option is used to specify the number of pitches to be out-
# put in each row-file (e.g. the first 7 pitches of a 12-tone row).
#
# Usage: matrix -n N primerowfile
#
if [ &#8220;x$1&#8221; != &#8220;x-n&#8221; ]
then
echo &#8220;-n option must be specified.&#8221;
echo &#8220;USAGE: matrix -n number primerowfile&#8221;
exit
fi
if [ ! -f $3 ]
then
echo &#8220;File $3 not found.&#8221;
echo &#8220;USAGE: matrix -n number row-file&#8221;
exit
fi
# Generate the primes, inversions, retrograde, etc:</p>
<p>X=0
while [ $X -ne 12 ]
do
reihe -a -P $X $3 | rid -GLId | head -$2 &gt; P$X
reihe -a -I $X $3 | rid -GLId | head -$2 &gt; I$X
reihe -a -R $X $3 | rid -GLId | head -$2 &gt; R$X
reihe -a -RI $X $3 | rid -GLId | head -$2 &gt; RI$X
let X=$X+1
done``</p>
<p>For any given input, the above script produces 48 short files named P0, P1,
... I0, I1 ... R0, R1 ... RI10, RI11.</p>
</div>
<div class="section" id="locating-and-identifying-tone-rows">
<h2>Locating and Identifying Tone-Rows<a class="headerlink" href="#locating-and-identifying-tone-rows" title="Permalink to this headline">¶</a></h2>
<p>Each of the row variant files can be used as a template for the <a href="#id173"><span class="problematic" id="id174">`**patt**`_</span></a>
command (see <a href="#id175"><span class="problematic" id="id176">`Chapter 21`_</span></a>). The following &#8220;rowfind&#8221; script shows how the
Humdrum tools can be coordinated to carry out an automatic search and
identification of tone row variants for some score.</p>
<p>The first part of the script simply checks to ensure that all of the row
variant files are present:</p>
<p>&gt;
<tt class="docutils literal"><span class="pre">###################################################################</span>
<span class="pre">#</span> <span class="pre">ROWFIND</span>
<span class="pre">#</span>
<span class="pre">#</span> <span class="pre">This</span> <span class="pre">script</span> <span class="pre">carries</span> <span class="pre">a</span> <span class="pre">preliminary</span> <span class="pre">tone-row</span> <span class="pre">search</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">specified</span>
<span class="pre">#</span> <span class="pre">score.</span> <span class="pre">It</span> <span class="pre">assumes</span> <span class="pre">that</span> <span class="pre">a</span> <span class="pre">complete</span> <span class="pre">set</span> <span class="pre">of</span> <span class="pre">set-variant</span> <span class="pre">files</span> <span class="pre">exists</span>
<span class="pre">#</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">current</span> <span class="pre">directory,</span> <span class="pre">named</span> <span class="pre">P0-P11,</span> <span class="pre">I0-I11,</span> <span class="pre">R0-R11,</span> <span class="pre">and</span> <span class="pre">RI0-RI11.</span>
<span class="pre">#</span>
<span class="pre">#</span> <span class="pre">This</span> <span class="pre">script</span> <span class="pre">puts</span> <span class="pre">a</span> <span class="pre">file</span> <span class="pre">named</span> <span class="pre">&quot;analysis&quot;</span> <span class="pre">which</span> <span class="pre">may</span> <span class="pre">be</span> <span class="pre">assembled</span>
<span class="pre">#</span> <span class="pre">with</span> <span class="pre">the</span> <span class="pre">original</span> <span class="pre">input</span> <span class="pre">file.</span>
<span class="pre">#</span>
<span class="pre">#</span> <span class="pre">Invoke:</span>
<span class="pre">#</span> <span class="pre">rowfind</span> <span class="pre">scorefile</span>
<span class="pre">#</span>
<span class="pre">#</span> <span class="pre">Check</span> <span class="pre">that</span> <span class="pre">the</span> <span class="pre">specified</span> <span class="pre">input</span> <span class="pre">file</span> <span class="pre">exists:</span>
<span class="pre">if</span> <span class="pre">[</span> <span class="pre">!</span> <span class="pre">-f</span> <span class="pre">$1</span> <span class="pre">]</span>
<span class="pre">then</span>
<span class="pre">echo</span> <span class="pre">&quot;rowfind:</span> <span class="pre">ERROR:</span> <span class="pre">Input</span> <span class="pre">score</span> <span class="pre">file</span> <span class="pre">$1</span> <span class="pre">not</span> <span class="pre">found.&quot;</span>
<span class="pre">exit</span>
<span class="pre">fi</span>
<span class="pre">#</span> <span class="pre">Also</span> <span class="pre">check</span> <span class="pre">that</span> <span class="pre">the</span> <span class="pre">row-variant</span> <span class="pre">files</span> <span class="pre">exist:</span>
<span class="pre">X=11</span>
<span class="pre">while</span> <span class="pre">[</span> <span class="pre">$X</span> <span class="pre">-ne</span> <span class="pre">-1</span> <span class="pre">]</span>
<span class="pre">do</span>
<span class="pre">if</span> <span class="pre">[</span> <span class="pre">!</span> <span class="pre">-f</span> <span class="pre">P$X</span> <span class="pre">]</span>
<span class="pre">then</span>
<span class="pre">echo</span> <span class="pre">&quot;rowfind:</span> <span class="pre">ERROR:</span> <span class="pre">Row</span> <span class="pre">file</span> <span class="pre">P$X</span> <span class="pre">not</span> <span class="pre">found.&quot;</span>
<span class="pre">exit</span>
<span class="pre">fi</span>
<span class="pre">if</span> <span class="pre">[</span> <span class="pre">!</span> <span class="pre">-f</span> <span class="pre">I$X</span> <span class="pre">]</span>
<span class="pre">then</span>
<span class="pre">echo</span> <span class="pre">&quot;rowfind:</span> <span class="pre">ERROR:</span> <span class="pre">Row</span> <span class="pre">file</span> <span class="pre">I$X</span> <span class="pre">not</span> <span class="pre">found.&quot;</span>
<span class="pre">exit</span>
<span class="pre">fi</span>
<span class="pre">if</span> <span class="pre">[</span> <span class="pre">!</span> <span class="pre">-f</span> <span class="pre">R$X</span> <span class="pre">]</span>
<span class="pre">then</span>
<span class="pre">echo</span> <span class="pre">&quot;rowfind:</span> <span class="pre">ERROR:</span> <span class="pre">Row</span> <span class="pre">file</span> <span class="pre">R$X</span> <span class="pre">not</span> <span class="pre">found.&quot;</span>
<span class="pre">exit</span>
<span class="pre">fi</span>
<span class="pre">if</span> <span class="pre">[</span> <span class="pre">!</span> <span class="pre">-f</span> <span class="pre">RI$X</span> <span class="pre">]</span>
<span class="pre">then</span>
<span class="pre">echo</span> <span class="pre">&quot;rowfind:</span> <span class="pre">ERROR:</span> <span class="pre">Row</span> <span class="pre">file</span> <span class="pre">RI$X</span> <span class="pre">not</span> <span class="pre">found.&quot;</span>
<span class="pre">exit</span>
<span class="pre">fi</span>
<span class="pre">let</span> <span class="pre">X=$X-1</span>
<span class="pre">done</span></tt></p>
<p>The following two lines of the script prepare the input score for searching.
Specifically, the score is transformed to pitch-class notation (using <strong>pc</strong>)
and then all rests are changed to null tokens using the <a href="#id177"><span class="problematic" id="id178">`**humsed**`_</span></a>
command. Notice the use of the <strong>-a</strong> option for <a href="#id179"><span class="problematic" id="id180">`**pc**`_</span></a> in order to use
the alpha-numeric pitch-class representation.</p>
<p><tt class="docutils literal"><span class="pre">pc</span> <span class="pre">-at</span> <span class="pre">$1</span> <span class="pre">&gt;</span> <span class="pre">temp.pc</span>
<span class="pre">humsed</span> <span class="pre">'s/r/./g'</span> <span class="pre">temp.pc</span> <span class="pre">&gt;</span> <span class="pre">score.tmp</span></tt></p>
<p>The main searching task is done by <strong>patt</strong>. The <a href="#id181"><span class="problematic" id="id182">`**patt**`_</span></a> command is
executed 48 times &#8211; once for each row variant. The <strong>-t</strong> (tag) option is
used so that a <tt class="docutils literal"><span class="pre">**patt</span></tt> output is generated. Each time a match is made the
appropriate name (e.g. P4) is output in the spine. The <strong>-s</strong> option is used
to skip barlines and null data records when matching patterns. The <strong>-m</strong>
option invokes the multi-record matching mode &#8211; which allows <strong>patt</strong> to
recognize row statements where several nominally successive pitches are
collapsed into a vertical chord:</p>
<p><a href="#id75"><span class="problematic" id="id76">``</span></a># Search for instances of each tone-row variant.
X=0
while [ $X -ne 12 ]
do</p>
<div class="section" id="id77">
<h3>&gt;<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h3>
<p>patt -s &#8216;=|^.(t.)*$&#8217; -f P$X -m score.tmp -t P$X </p>
</div>
<div class="section" id="id78">
<h3>&gt;&gt;<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">extract -i &#8216;<a href="#id79"><span class="problematic" id="id80">**</span></a>patt&#8217; &gt; P$X.pat</div>
</div>
</div>
<div class="section" id="id81">
<h3>&gt;&gt;<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<p>patt -s &#8216;=|^.(t.)*$&#8217; -f I$X -m score.tmp -t I$X </p>
</div>
<div class="section" id="id82">
<h3>&gt;&gt;<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">extract -i &#8216;<a href="#id83"><span class="problematic" id="id84">**</span></a>patt&#8217; &gt; I$X.pat</div>
</div>
</div>
<div class="section" id="id85">
<h3>&gt;&gt;<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h3>
<p>patt -s &#8216;=|^.(t.)*$&#8217; -f R$X -m score.tmp -t R$X </p>
</div>
<div class="section" id="id86">
<h3>&gt;&gt;<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">extract -i &#8216;<a href="#id87"><span class="problematic" id="id88">**</span></a>patt&#8217; &gt; R$X.pat</div>
</div>
</div>
<div class="section" id="id89">
<h3>&gt;&gt;<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h3>
<p>patt -s &#8216;=|^.(t.)*$&#8217; -f RI$X -m score.tmp -t RI$X </p>
</div>
<div class="section" id="id90">
<h3>&gt;&gt;<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">extract -i &#8216;<a href="#id91"><span class="problematic" id="id92">**</span></a>patt&#8217; &gt; RI$X.pat</div>
</div>
</div>
<div class="section" id="id93">
<h3>&gt;&gt;<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h3>
<p>let X=$X+1</p>
</div>
<div class="section" id="id94">
<h3>&gt;<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h3>
<p>done``</p>
<p>Each of the above 48 <strong>patt</strong> searches resulted in a separate temporary
output file. It would be convenient to reduce all 48 <tt class="docutils literal"><span class="pre">**patt</span></tt> spines into a
single aggregate spine. This can be done using the <a href="#id183"><span class="problematic" id="id184">`**assemble**`_</span></a> and
<a href="#id185"><span class="problematic" id="id186">`**cleave**`_</span></a> commands:</p>
<p><a href="#id95"><span class="problematic" id="id96">``</span></a># Now we have a lot of files to assemble:
assemble P*.pat &gt; prime.pat
cleave -d &#8216; &#8216; -i &#8216;<a href="#id97"><span class="problematic" id="id98">**</span></a>patt&#8217; -o &#8216;<a href="#id99"><span class="problematic" id="id100">**</span></a>rows&#8217; prime.pat &gt; analysis.1</p>
<p>assemble I*.pat &gt; inversion.pat
cleave -d &#8216; &#8216; -i &#8216;<a href="#id101"><span class="problematic" id="id102">**</span></a>patt&#8217; -o &#8216;<a href="#id103"><span class="problematic" id="id104">**</span></a>rows&#8217; inversion.pat &gt; analysis.2</p>
<p>assemble R*.pat &gt; retro.pat
cleave -d &#8216; &#8216; -i &#8216;<a href="#id105"><span class="problematic" id="id106">**</span></a>patt&#8217; -o &#8216;<a href="#id107"><span class="problematic" id="id108">**</span></a>rows&#8217; retro.pat &gt; analysis.3</p>
<p>assemble RI*.pat &gt; retroinv.pat
cleave -d &#8216; &#8216; -i &#8216;<a href="#id109"><span class="problematic" id="id110">**</span></a>patt&#8217; -o &#8216;<a href="#id111"><span class="problematic" id="id112">**</span></a>rows&#8217; retroinv.pat &gt; analysis.4</p>
<p>assemble analysis.[1-4] &gt; temp
cleave -d &#8216; &#8216; -i &#8216;<a href="#id113"><span class="problematic" id="id114">**</span></a>rows&#8217; -o &#8216;<a href="#id115"><span class="problematic" id="id116">**</span></a>rows&#8217; temp &gt; analysis.out</p>
<p># Finally, clean up some temporary files:</p>
<p>rm [PRI][0-9].pat [PRI]1[01].pat RI[0-9]*.pat temp.pat
rm analysis.[1-4] temp temp.pc score.tmp``</p>
<p>There are a few subtleties and problems that deserve mention about our
<strong>rowfind</strong> script. In general, shorter patterns are easier to find than
longer patterns. Since row statements tend to be unique after the first 4 or
5 notes, it is preferable to clip the row patterns used as templates.
Reducing the length of the templates can lead to &#8220;false hits&#8221; &#8211; but these
tend to be infrequent and are easily recognized.</p>
<p>Applied to an entire multi-part score, <strong>rowfind</strong> may miss concurrent row
statements due to interposed notes appearing in an irrelevant instrument or
part. This problem can be avoided by first extracting individual parts and
running <strong>rowfind</strong> on each part separately. (The results can then be
amalgamated using <strong>assemble</strong> and <strong>cleave</strong>.) On the other hand, searching
instruments separately can mean that row statements crossing between
instruments may be missed. This problem can be addressed by extracting pairs
and groups of instruments and analyzing them together.</p>
<p>For a complex work like Webern&#8217;s Opus 24 Concerto, this strategy of analyzing
both individual instruments and groups of instruments works very well.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="reprise">
<h2>Reprise<a class="headerlink" href="#reprise" title="Permalink to this headline">¶</a></h2>
<p>In this chapter we have discussed several tools related to set theory
analysis. These include the <a href="#id187"><span class="problematic" id="id188">`**pc**`_</span></a> (pitch-class) command, the <a href="#id189"><span class="problematic" id="id190">`**pcset**`_</span></a>
command (for identifying set-forms), and the <a href="#id191"><span class="problematic" id="id192">`**reihe**`_</span></a> command (for
generating set variants).</p>
<p>We have seen how general tools like <a href="#id193"><span class="problematic" id="id194">`**context**`_</span></a> can be used to carry out
segmentation of some score. Similarly, we have seen how the <a href="#id195"><span class="problematic" id="id196">`**patt**`_</span></a>
command can be used to identify tone-row statements.</p>
<p>Two scripts were described in this chapter: <strong>matrix</strong> and <strong>rowfind.</strong> These
demonstrated how the tools may be coordinated to carry out various automated
processes.</p>
<p>This chapter has only scratched the surface regarding the types of pertinent
serial-related manipulations that might be pursued. For example, much more
sophisticated approaches to segmentation can be created by using some of the
layer techniques described in the <a href="#id197"><span class="problematic" id="id198">`next Chapter.`_</span></a> Similarly, the pattern
searches could easily be expanded to look at other parameters typical of
&#8220;complete serialism&#8221; &#8211; such as durations, dynamics, articulation marks, and
so on.</p>
</div>
</div>


          </div>
          <footer>
  <hr/>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <center><a href="../ch35/" class="btn btn-neutral float-right" title="Chapter 35: Layers">Next <span class="fa fa-arrow-circle-right"></span></a></center>
      
      
        <a href="../ch33/" class="btn btn-neutral" title="&lt;no title&gt;"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
      
             <center><a href="../../_sources/guide/ch34.txt" rel="nofollow"> View page source</a></center>
      
    </div>
  



  <div role="contentinfo">
    <p>
    </p>
  </div>


</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
   
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-52162357-1', 'humdrum.org');
  ga('send', 'pageview');
</script>



</body>
</html>