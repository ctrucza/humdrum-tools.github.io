

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter 29: Differences and Commonalities &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../../"/>
        <link rel="up" title="The Humdrum User Guide" href="../"/>
        <link rel="next" title="Chapter 30:MIDI Input Tools" href="../ch30/"/>
        <link rel="prev" title="&lt;no title&gt;" href="../ch28/"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installationguide/">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installationguide/downloading/">Downloading Humdrum</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../"><em>The Humdrum User Guide</em></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ch01/">Chapter 1: Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch02/">Chapter 2: Representing Music Using kern (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch03/">Chapter 3: Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch04/">Chapter 4:Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch05/">Chapter 5: The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch06/">Chapter 6: Representing Music Using ***kern*(II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch07/">Chapter 7: MIDI Output Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch08/">Chapter 8: The Shell (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch09/">Chapter 9: Searching with Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch10/">Chapter 10: Musical Uses of Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/">Chapter 11: Melodic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch12/">Chapter 12: Selecting Musical Parts and Passages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch13/">Chapter 13: Assembling Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch14/">Chapter 14: Stream Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch15/">Chapter 15: Harmonic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch16/">Chapter 16: The Shell (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch17/">Chapter 17: Creating Inventories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch18/">Chapter 18: Fingers, Footsteps and Frets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch19/">Chapter 19: Musical Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch20/">Chapter 20: Strophes, Verses, and Repeats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch21/">Chapter 21: Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch22/">Chapter 22: Classifying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch23/">Chapter 23: Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch24/">Chapter 24: The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch25/">Chapter 25: Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch26/">Chapter 26: Moving Signifiers Between Spines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch27/">Chapter 27: Text and Lyrics</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Chapter 29: Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch30/">Chapter 30:MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch31/">Chapter 31: Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch32/">Chapter 32: The Shell (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch34/">Chapter 34: Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch35/">Chapter 35: Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch37/">Chapter 37: Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch38/">Chapter 38: Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch39/">Chapter 39: Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch40/">Chapter 40: Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.more/">Supplementary Humdrum Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands.toc/">Humdrum Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../humdrum.problems/">HUMDRUM PROBLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux.perform/">Installing and Using the Humdrum &#8220;perform&#8221; Command under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual.bibliog/#bibliography">Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07/">Humdrum Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#humdrum-representation-development">Humdrum Representation Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#representation-assumptions">Representation Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#creating-new-humdrum-representations">Creating New Humdrum Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07a/#defining-a-new-humdrum-interpretation-a-sample-problem">Defining a New Humdrum Interpretation: A Sample Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/#humdrum-software-development">Humdrum Software Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual07b/#standard-program-skeleton">Standard Program Skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#how-to-translate-musedata-files-to-humdrum">How To Translate MuseData Files to Humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../musedata2kern/#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/">Sample Research Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../representations.toc/">Humdrum Representation Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources/">Online Resources:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sample.problems/">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../extras/">Humdrum Extras</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../extras/intro/">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/dataEntry/">Data Entry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/melody/">Melody Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/harmony/">Harmony</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/rhythm/">Rhythm Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/musicSearching/">Music Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/MIDIrendering/">MIDI Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/graphicalNotation/">Graphical Musical Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/otherUtilities/">Other Useful Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extras/programmingTutorial/">Programming Tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/vimHighlighting/">Syntax Coloring in Vim</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../referencemanual/">Humdrum Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/assemble/">Assemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/hint/">hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/mint/">mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../referencemanual/key/">key</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../">Docs</a> &raquo;</li>
      
          <li><a href="../"><em>The Humdrum User Guide</em></a> &raquo;</li>
      
    <li>Chapter 29: Differences and Commonalities</li>
      <li class="wy-breadcrumbs-aside">
        
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="chapter-29-differences-and-commonalities">
<h1>Chapter 29: Differences and Commonalities<a class="headerlink" href="#chapter-29-differences-and-commonalities" title="Permalink to this headline">¶</a></h1>
<p>In <a href="#id13"><span class="problematic" id="id14">`Chapter 25`_</span></a> we introduced the problem of similarity via the Humdrum
<a href="#id15"><span class="problematic" id="id16">`**simil**`_</span></a> and <a href="#id17"><span class="problematic" id="id18">`**correl**`_</span></a> commands. This chapter revisits the problem of
similarity by focussing on differences and commonalities. Specifically, this
chapter introduces three additional tools, the UNIX <strong>cmp</strong>, <strong>diff</strong> and
<strong>comm</strong> commands. Although these commands are less sophisticated than the
<strong>simil</strong> and <strong>correl</strong> commands, they nevertheless provide convenient tools
for quickly determining the relationship between two or more inputs.</p>
<p>Comparing Files Using <em>cmp</em>
&#8212;</p>
<p>The <strong>cmp</strong> command does a character-by-character comparison and indicates
whether or not two files are identical.</p>
<p><tt class="docutils literal"><span class="pre">cmp</span> <span class="pre">file1</span> <span class="pre">file2</span></tt></p>
<p>If the two files differ, <strong>cmp</strong> generates a message indicating the first
point where the two files differ. E.g.,</p>
<p><tt class="docutils literal"><span class="pre">file1</span> <span class="pre">file2</span> <span class="pre">differ:</span> <span class="pre">char</span> <span class="pre">4,</span> <span class="pre">line</span> <span class="pre">10</span></tt></p>
<p>If the two files are identical, <strong>cmp</strong> simply outputs nothing (&#8220;silence is
golden&#8221;).</p>
<p>Sometimes files differ in ways that may be uninteresting. For example, we may
suspect that a single work has been attributed to two different composers.
The encoded files may differ only in that the <tt class="docutils literal"><span class="pre">!!!COM:</span></tt> reference records
are different. We can pre-process the files using <a href="#id19"><span class="problematic" id="id20">`**rid**`_</span></a> in order to
determine whether the scores are otherwise identical.</p>
<p><tt class="docutils literal"><span class="pre">rid</span> <span class="pre">-G</span> <span class="pre">file1</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
<tt class="docutils literal"><span class="pre">rid</span> <span class="pre">-G</span> <span class="pre">file2</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt>
<tt class="docutils literal"><span class="pre">cmp</span> <span class="pre">temp1</span> <span class="pre">temp2</span></tt></p>
<p>Of course one of the works might be transposed with respect to the other. We
can circumvent this problem by translating the data to some key-independent
representation such as <tt class="docutils literal"><span class="pre">solfa</span></tt> or <tt class="docutils literal"><span class="pre">deg</span></tt>:</p>
<p><tt class="docutils literal"><span class="pre">rid</span> <span class="pre">-GL</span> <span class="pre">file1</span> <span class="pre">|</span> <span class="pre">solfa</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
<tt class="docutils literal"><span class="pre">rid</span> <span class="pre">-GL</span> <span class="pre">file2</span> <span class="pre">|</span> <span class="pre">solfa</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt>
<tt class="docutils literal"><span class="pre">cmp</span> <span class="pre">temp1</span> <span class="pre">temp2</span></tt></p>
<p>Two songs might have different melodies but employ the same lyrics. We can
test whether they are identical by extracting and comparing any text-related
spines. Since there may be differences due to melismas, we might also use
<strong>rid -d</strong> to eliminate null data records.</p>
<p><tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">file</span> <span class="pre">1</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLd</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
<tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">file</span> <span class="pre">2</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLd</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt>
<tt class="docutils literal"><span class="pre">cmp</span> <span class="pre">temp1</span> <span class="pre">temp2</span></tt></p>
<p>Similarly, two works might have identical harmonies:</p>
<p><tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**harm'</span> <span class="pre">file</span> <span class="pre">1</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLd</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
<tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**harm'</span> <span class="pre">file</span> <span class="pre">2</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLd</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt>
<tt class="docutils literal"><span class="pre">cmp</span> <span class="pre">temp1</span> <span class="pre">temp2</span></tt></p>
<p>By further reducing the inputs, we can focus on quite specific elements, such
as whether two songs have the same rhythm. In the following script, we first
eliminate bar numbers, and then eliminate all data except for durations and
barlines.</p>
<p><tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**kern'</span> <span class="pre">file</span> <span class="pre">1</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'/=/s/[0-9]//;</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">s/[^0-9.=]//g'</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLd</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
&gt;
&gt;
<tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**kern'</span> <span class="pre">file</span> <span class="pre">1</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'/=/s/[0-9]//;</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">s/[^0-9.=]//g'</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLd</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt>
&gt;
&gt;
<tt class="docutils literal"><span class="pre">cmp</span> <span class="pre">temp1</span> <span class="pre">temp2</span></tt></p>
<p>For some tasks, we might focus on just a handful of records. For example, we
might ask whether two works have the same changes of key.</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">'^*[a-gA-G][#-]*:'</span> <span class="pre">file</span> <span class="pre">1</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
<tt class="docutils literal"><span class="pre">grep</span> <span class="pre">'^*[a-gA-G][#-]*:'</span> <span class="pre">file</span> <span class="pre">2</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt>
<tt class="docutils literal"><span class="pre">cmp</span> <span class="pre">temp1</span> <span class="pre">temp2</span></tt></p>
<p>In the extreme case, we might compare just a single line of information. For
example, we might identify whether two works have identical instrumentation:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">'^!!!AIN:'</span> <span class="pre">file</span> <span class="pre">1</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
<tt class="docutils literal"><span class="pre">grep</span> <span class="pre">'^!!!AIN:'</span> <span class="pre">file</span> <span class="pre">2</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt>
<tt class="docutils literal"><span class="pre">cmp</span> <span class="pre">temp1</span> <span class="pre">temp2</span></tt></p>
<div class="section" id="comparing-files-using-diff">
<h2>Comparing Files Using <em>diff</em><a class="headerlink" href="#comparing-files-using-diff" title="Permalink to this headline">¶</a></h2>
<p>The problem with <strong>cmp</strong> is that it is unable to distinguish whether the
difference between two files is profound or superficial. A useful alternative
to the <strong>cmp</strong> command is the UNIX <strong>diff</strong> command. The <strong>diff</strong> command
attempts to determine the minimum set of changes needed to convert one file
to another file. The output from <strong>diff</strong> entails editing commands
reminiscent of the <strong>ed</strong> text editor. For example, two latin texts that
differ at line 40, might generate the following output:</p>
<p><tt class="docutils literal"><span class="pre">40c40</span>
<span class="pre">&lt;</span> <span class="pre">es</span> <span class="pre">quiambulas</span>
<span class="pre">---</span>
<span class="pre">&gt;</span> <span class="pre">es</span> <span class="pre">quisedes</span></tt></p>
<p>Let&#8217;s consider again the question of whether two works have essentially the
same lyrics. Many otherwise similar texts might differ in trivial ways. For
example, texts may differ in punctuation or in the use of upper- and lower-
case characters. The <strong>diff</strong> command provides a <strong>-i</strong> option that ignores
distinctions between upper- and lower-case characters. Punctuation marks can
be eliminated by adding a suitable <a href="#id21"><span class="problematic" id="id22">`**humsed**`_</span></a> filter.</p>
<p><tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">file1</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'s/[^a-zA-Z</span> <span class="pre">]//g'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">&gt;</span> <span class="pre">temp1</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">file2</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'s/[^a-zA-Z</span> <span class="pre">]//g'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">&gt;</span> <span class="pre">temp2</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;</span> <span class="pre">diff</span> <span class="pre">-i</span> <span class="pre">file1</span> <span class="pre">file2</span></tt></p>
<p>Every time <strong>diff</strong> encounters a difference between the two files, it will
output several lines identify the location of the difference and showing the
conflicting lines in the two files. The <strong>diff</strong> command is line-oriented.
Two lines need only differ by a single character in order for <strong>diff</strong> to
generate an output.</p>
<p>When there are more than a dozen or so differences, the output becomes
cumbersome to read. A useful alternative is to avoid looking at the raw
output from <strong>diff</strong>; instead, we might simply count the number of lines of
output (using <strong>wc -l</strong>). When compared with the total length of the input,
the number of output lines can provide a rough estimate of the magnitude of
the differences between the two files. A suitable revision to the last line
of the above script would be:</p>
<p><tt class="docutils literal"><span class="pre">diff</span> <span class="pre">-i</span> <span class="pre">file1</span> <span class="pre">file2</span> <span class="pre">|</span> <span class="pre">wc</span> <span class="pre">-l</span></tt></p>
<p>One problem with this approach is that it assumes that we know which two
files we want to compare. A more common problem is looking for <em>any</em> work
that is somewhat similar to some given work. We can automate this task by
embedding the above script in a loop so that the comparison (second) file
cycles through a series of possibilities. A simple <strong>while</strong> loop will enable
us to do this. Since our script may process a large number of scores, we
ought to format our output for ease of reading. The <strong>echo</strong> command in our
script outputs each filename in turn with the a count of the number of output
lines generated by <strong>diff</strong>.</p>
<p>&gt;
<a href="#id1"><span class="problematic" id="id2">``</span></a>extract -i &#8216;<a href="#id3"><span class="problematic" id="id4">**</span></a>silbe&#8217; $1 | text | humsed &#8216;s/[^a-zA-Z ]//g&#8217; </p>
<div class="section" id="id5">
<h3>&gt;<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">rid -GLId &gt; temp1</div>
</div>
</div>
<div class="section" id="id6">
<h3>&gt;<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>shift
while [ $# -ne 0 ]
do</p>
</div>
<div class="section" id="id7">
<h3>&gt;<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>extract -i &#8216;<a href="#id8"><span class="problematic" id="id9">**</span></a>silbe&#8217; $1 | text | humsed &#8216;s/[^a-zA-Z ]//g&#8217; </p>
</div>
<div class="section" id="id10">
<h3>&gt;&gt;<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">rid -GLId &gt; temp2</div>
</div>
</div>
<div class="section" id="id11">
<h3>&gt;&gt;<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>CHANGES=`diff -i temp1 temp2 | wc -l`
echo $1 &#8221;: &#8221; $CHANGES
shift</p>
</div>
<div class="section" id="id12">
<h3>&gt;<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>done
rm temp[12]``</p>
<p>Of course this same approach may be applied to other musical aspects apart
from musical texts. For example, with suitable changes in the processing, one
could identify works that have similar rhythms, melodic contours, harmonies,
rhyme schemes, and so on.</p>
</div>
</div>
<div class="section" id="comparing-inventories-the-comm-command">
<h2>Comparing Inventories &#8211; The <em>comm</em> Command<a class="headerlink" href="#comparing-inventories-the-comm-command" title="Permalink to this headline">¶</a></h2>
<p>The <strong>diff</strong> command is sensitive to the order of data. Suppose that texts
for two songs differ only in that one song reverses the order of verses 3 and
4. Comparing the &#8220;wrong&#8221; verses will tend to exaggerate what are really minor
differences between the two songs. In addition, the above approach is too
sensitive to word or phrase repetition. Many works &#8211; especially polyphonic
vocal works &#8211; use extensive repetitions (e.g., &#8220;on the bank, on the bank, on
the bank of the river&#8221;). Short texts (such as for the <em>Kyrie</em> of the Latin
mass) are especially prone to use highly distinctive repetition. How can we
tell whether one work has pretty much the same lyrics as another?</p>
<p>Fortunately, most texts tend to have unique word inventories. Although words
may be repeated or re-ordered, phrases interrupted, and verses re-arranged,
the basic vocabulary for similar texts are often much the same. A useful
technique is to focus on the similarity of the word inventories. In the
following script, we simply create a list of words used in both the original
and comparison files.</p>
<p><tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">file1</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'s/[.,;:!?]//g'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">|</span> <span class="pre">tr</span> <span class="pre">A-Z</span> <span class="pre">a-z</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-d</span> <span class="pre">&gt;</span> <span class="pre">inventory1</span></tt>
&gt;
<tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">file2</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'s/[.,;:!?]//g'</span> <span class="pre">|</span> <span class="pre">tr</span> <span class="pre">A-Z</span> <span class="pre">a-z</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">|</span> <span class="pre">uniq</span> <span class="pre">-c</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-nr</span> <span class="pre">&gt;</span> <span class="pre">inventory2</span></tt></p>
<p>Suppose that our two vocabulary inventories appear as follows:</p>
<p>&gt; <strong>Inventory 1:****Inventory 2:</strong>
&gt; dominea
&gt; etcoronasti
&gt; eumdomine
&gt; filioet
&gt; gloriaeum
&gt; infilio
&gt; jerusalemgloria
&gt; orieturhonore
&gt; patrimanuum
&gt; sanctooper
&gt; spirituipatri
&gt; supersancto
&gt; tespiritui
&gt; videbitursuper
&gt; tuarum</p>
<p>Notice that a number of words are present in both texts, such as <em>domine</em>,
<em>et</em>, <em>eum</em>, <em>filio</em>, and so on. Identifying the common vocabulary items is
easily done by the UNIX <strong>comm</strong> command; <strong>comm</strong> compares two sorted files
and identifies which lines are shared in common and which lines are unique to
one file or the other.</p>
<p>The <strong>comm</strong> command outputs three columns: the first column identifies only
those lines that are present in the first file, the second column identifies
only those lines that are present in the second file, and the third column
identifies those lines that are present in both files. In the case of our two
Latin texts, the command:</p>
<p><tt class="docutils literal"><span class="pre">comm</span> <span class="pre">inventory1</span> <span class="pre">inventory2</span></tt></p>
<p>will produce the following output. The first and second columns identify
words unique to <tt class="docutils literal"><span class="pre">inventory1</span></tt> and <tt class="docutils literal"><span class="pre">inventory1</span></tt>, respectively. The third
column identifies the common lines:</p>
<p><tt class="docutils literal"><span class="pre">a</span>
<span class="pre">&gt;</span> <span class="pre">coronasti</span>
<span class="pre">&gt;</span> <span class="pre">domine</span>
<span class="pre">&gt;</span> <span class="pre">et</span>
<span class="pre">&gt;</span> <span class="pre">eum</span>
<span class="pre">&gt;</span> <span class="pre">filio</span>
<span class="pre">&gt;</span> <span class="pre">gloria</span>
<span class="pre">&gt;</span> <span class="pre">honore</span>
<span class="pre">&gt;</span> <span class="pre">in</span>
<span class="pre">&gt;</span> <span class="pre">jerusalem</span>
<span class="pre">&gt;</span> <span class="pre">manuum</span>
<span class="pre">&gt;</span> <span class="pre">oper</span>
<span class="pre">&gt;</span> <span class="pre">orietur</span>
<span class="pre">&gt;</span> <span class="pre">patri</span>
<span class="pre">&gt;</span> <span class="pre">sancto</span>
<span class="pre">&gt;</span> <span class="pre">spiritui</span>
<span class="pre">&gt;</span> <span class="pre">super</span>
<span class="pre">&gt;</span> <span class="pre">te</span>
<span class="pre">&gt;</span> <span class="pre">tuarum</span>
<span class="pre">&gt;</span> <span class="pre">videbitur</span></tt></p>
<p>In the above case, five words are unique to <tt class="docutils literal"><span class="pre">inventory1</span></tt>, six words are
unique to <tt class="docutils literal"><span class="pre">inventory2</span></tt> and nine words are common to both.</p>
<p>The <strong>comm</strong> command provides numbered options that suppress specified
columns. For example, the command <strong>comm -13</strong> will suppress columns one and
three (outputing column two). (Empty lines are also suppressed with these
options.) A convenient measure of similarity is to express the shared
vocabulary items as a percentage of the total combined vocabularies. We can
do this using the word-count command, <strong>wc</strong>. The first command counts the
total number of words and the second command counts the total number of
shared words:</p>
<p><tt class="docutils literal"><span class="pre">comm</span> <span class="pre">inventory1</span> <span class="pre">inventory2</span> <span class="pre">|</span> <span class="pre">wc</span> <span class="pre">-l</span></tt>
<tt class="docutils literal"><span class="pre">comm</span> <span class="pre">-3</span> <span class="pre">inventory1</span> <span class="pre">inventory2</span> <span class="pre">|</span> <span class="pre">wc</span> <span class="pre">-l</span></tt></p>
<p>An important point about <strong>comm</strong> is that the order of materials is important
in the input files. If the word <em>filio</em> occurs near the beginning of
<tt class="docutils literal"><span class="pre">inventory1</span></tt> but near the end of <tt class="docutils literal"><span class="pre">inventory2</span></tt> then <strong>comm</strong> will not
consider the record common to both files. This is the reason why we used an
alphabetical sort (<strong>sort -d</strong>) in our original processing.</p>
<p>On the other hand, there are sometimes good reasons to order the vocabulary
lists non-alphabetically. For example, suppose we created our inventories
according to the frequency of occurrence of the words. That is, suppose we
use <strong>uniq -c | sort -nr</strong> to generate a vocabulary list ordered by how
common each word is. Our inventory files might now appear as follows:</p>
<p>&gt; <strong>Inventory 1:</strong>
&gt;
&gt;``3et
&gt;&gt; 2te
&gt;&gt; 2gloria
&gt;&gt; 1videbitur
&gt;&gt; 1super
&gt;&gt; 1spiritui
&gt;&gt; 1sancto
&gt;&gt; 1patri
&gt;&gt; 1orietur
&gt;&gt; 1jerusalem
&gt;&gt; 1in
&gt;&gt; 1filio
&gt;&gt; 1eum
&gt;&gt; 1domine``
&gt;
&gt; <strong>Inventory 2:</strong>
&gt;
&gt;``4et
&gt;&gt; 2gloria
&gt;&gt; 2eum
&gt;&gt; 1tuarum
&gt;&gt; 1super
&gt;&gt; 1spiritui
&gt;&gt; 1sancto
&gt;&gt; 1patri
&gt;&gt; 1oper
&gt;&gt; 1manuum
&gt;&gt; 1honore
&gt;&gt; 1filio
&gt;&gt; 1domine
&gt;&gt; 1coronasti
&gt;&gt; 1a``</p>
<p>Comparing these two inventories will produce little in common due to the
presence of the numbers. For example, the records &#8220;<tt class="docutils literal"><span class="pre">3</span> <span class="pre">et</span></tt>&#8221; and &#8220;<tt class="docutils literal"><span class="pre">4</span> <span class="pre">et</span></tt>&#8221;
will be deemed entirely different. However, we can eliminate the numbers
using an appropriate <strong>sed</strong> command leaving us with vocabulary lists that
are ordered according to the frequency of occurrence of the words. If we
apply the <strong>comm</strong> command to these lists then the commonality measures will
be sensitive to the relative frequency of words within the vocabularies.</p>
</div>
<hr class="docutils" />
<div class="section" id="reprise">
<h2>Reprise<a class="headerlink" href="#reprise" title="Permalink to this headline">¶</a></h2>
<p>In this chapter we have introduced the UNIX <strong>cmp</strong>, <strong>diff</strong> and <strong>comm</strong>
commands. The <strong>cmp</strong> command determines whether two files as are the same or
different. The <strong>diff</strong> command identifies how two files differ. The <strong>comm</strong>
command identifies which (sorted) lines two files share in common; <strong>comm</strong>
also allows us to identify which lines are unique to just one of the files.</p>
<p>The value of these tools is amplified when the inputs are pre-processed to
eliminate unwanted or distracting data, and when post-processing is done
(using <strong>wc</strong>) to estimate the magnitude of the differences or commonalities.</p>
<p>Together with the <a href="#id23"><span class="problematic" id="id24">`**simil**`_</span></a> and <a href="#id25"><span class="problematic" id="id26">`**correl**`_</span></a> commands discussed in
<a href="#id27"><span class="problematic" id="id28">`Chapter 25,`_</span></a> these five tools provide a variety of means for characterizing
differences, commonalities, and similarities.</p>
</div>
</div>


          </div>
          <footer>
  <hr/>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <center><a href="../ch30/" class="btn btn-neutral float-right" title="Chapter 30:MIDI Input Tools">Next <span class="fa fa-arrow-circle-right"></span></a></center>
      
      
        <a href="../ch28/" class="btn btn-neutral" title="&lt;no title&gt;"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
      
             <center><a href="../../_sources/guide/ch29.txt" rel="nofollow"> View page source</a></center>
      
    </div>
  



  <div role="contentinfo">
    <p>
    </p>
  </div>


</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
   
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-52162357-1', 'humdrum.org');
  ga('send', 'pageview');
</script>



</body>
</html>