


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter27 &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../index.html"/>
        <link rel="up" title="The Humdrum User Guide" href="index.html"/>
        <link rel="next" title="&lt;no title&gt;" href="guide28.html"/>
        <link rel="prev" title="Chapter26" href="guide26.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html"><em>The Humdrum User Guide</em></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="guide01.html">Chapter1</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide01.html#humdrum-a-brief-tour">Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide02.html">Chapter2</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide02.html#representing-music-using-kern-i">Representing Music Using <strong>***kern*</strong> (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide03.html">Chapter3</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide03.html#some-initial-processing">Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide04.html">Chapter4</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide04.html#basic-pitch-translations">Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide05.html">Chapter5</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide05.html#the-humdrum-syntax">The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide06.html">Chapter6</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide06.html#representing-music-using-kern-ii">Representing Music Using ***kern*(II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide06.html#tuplets">Tuplets</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide07.html">Chapter7</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide08.html">Chapter8</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide09.html">Chapter9</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide10.html">Chapter10</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide11.html">Chapter11</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide12.html">Chapter12</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide13.html">Chapter13</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide14.html">Chapter14</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide15.html">Chapter15</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide16.html">Chapter16</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide17.html">Chapter17</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide18.html">Chapter18</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide19.html">Chapter19</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide20.html">Chapter20</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide21.html">Chapter21</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide21.html#searching-for-patterns">Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide22.html">Chapter22</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide23.html">Chapter23</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide23.html#rhythm">Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide24.html">Chapter24</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide24.html#the-shell-iii">The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide25.html">Chapter25</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide25.html#similarity">Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide26.html">Chapter26</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide26.html#moving-signifiers-between-spines">Moving Signifiers Between Spines</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Chapter27</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide29.html">Chapter29</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide29.html#differences-and-commonalities">Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide30.html">Chapter30</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide30.html#midi-input-tools">MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide31.html">Chapter31</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide31.html#repertories-and-links">Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide32.html">Chapter32</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide32.html#the-shell-iv">The Shell (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide34.html">Chapter34</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide34.html#serial-processing">Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide35.html">Chapter35</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide35.html#layers">Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide37.html">Chapter37</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide37.html#electronic-music-editing">Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide38.html">Chapter38</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide38.html#systematic-musicology">Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide39.html">Chapter39</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide39.html#trouble-shooting">Trouble-Shooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide40.html">Chapter40</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide40.html#conclusion">Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibliography.html">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.more.html">Supplementary Humdrum Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.toc.html">Humdrum Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="humdrum.problems.html">HUMDRUM PROBLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux.perform.html">Installing and Using the Humdrum &#8220;perform&#8221; Command under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual.bibliog.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="manual.bibliog.html#bibliography">Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07.html">Humdrum Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#humdrum-representation-development">Humdrum Representation Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#representation-assumptions">Representation Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#creating-new-humdrum-representations">Creating New Humdrum Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#defining-a-new-humdrum-interpretation-a-sample-problem">Defining a New Humdrum Interpretation: A Sample Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07b.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07b.html#humdrum-software-development">Humdrum Software Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07b.html#standard-program-skeleton">Standard Program Skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="musedata2kern.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="musedata2kern.html#how-to-translate-musedata-files-to-humdrum">How To Translate MuseData Files to Humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="musedata2kern.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="problems.html">Sample Problems Using the Humdrum Toolkit</a></li>
<li class="toctree-l2"><a class="reference internal" href="projects.html">Sample Research Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="representations.toc.html">Humdrum Representation Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="resources.html">Online Resources:</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample.problems.html">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sappExtras.html">Humdrum Extras</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cookbook.html">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbook.html#syntax-coloring-in-vim">Syntax Coloring in Vim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook.html#projects-using-humdrum">Projects using Humdrum</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html"><em>The Humdrum User Guide</em></a> &raquo;</li>
      
    <li>Chapter27</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/guide/guide27.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="chapter27">
<h1>Chapter27<a class="headerlink" href="#chapter27" title="Permalink to this headline">¶</a></h1>
<div class="section" id="text-and-lyrics">
<h2>Text and Lyrics<a class="headerlink" href="#text-and-lyrics" title="Permalink to this headline">¶</a></h2>
<p>Musical texts include lyrics, librettos, stage directions, recitativo and
other collections of words. It goes without saying that words provide
important information related to semantics, imagery, similes, allusion,
irony, parody, word painting, and emotion. In addition, words can add to the
sonorous dimension of music, including rhyme schemes, word-rhythms, and
phonetic and syllabic effects such as alliteration, vowel-coloration.</p>
<p>Humdrum provides three pre-defined representations pertinent to text or
lyrics. The <tt class="docutils literal"><span class="pre">`**text```_</span> <span class="pre">representation</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">to</span> <span class="pre">represent</span> <span class="pre">*words*;</span>
<span class="pre">the</span> <span class="pre">```**silbe```_</span> <span class="pre">representation</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">to</span> <span class="pre">represent</span> <span class="pre">*syllables*;</span> <span class="pre">and</span>
<span class="pre">the</span> <span class="pre">```**IPA```_</span> <span class="pre">representation</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">to</span> <span class="pre">represent</span> <span class="pre">*phonemes*</span> <span class="pre">(via</span> <span class="pre">the</span>
<span class="pre">International</span> <span class="pre">Phonetic</span> <span class="pre">Alphabet).</span> <span class="pre">Discussion</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">``**IPA</span></tt> representation
will be delayed until <a class="reference external" href="guide34.html">Chapter 34.</a> In this chapter we will look at various
representational and processing issues related to the manipulation of words
and syllables.</p>
</div>
<div class="section" id="the-text-and-silbe-representations">
<h2>The <a href="#id1"><span class="problematic" id="id2">**</span></a><em>text</em> and <a href="#id3"><span class="problematic" id="id4">**</span></a><em>silbe</em> Representations<a class="headerlink" href="#the-text-and-silbe-representations" title="Permalink to this headline">¶</a></h2>
<p>Syllable- and word-oriented representations are illustrated in the following
excerpt from a motet by Byrd (Example 27.1). The encoded Humdrum data
includes three spines: <tt class="docutils literal"><span class="pre">**text</span></tt>, <tt class="docutils literal"><span class="pre">**silbe</span></tt> and <tt class="docutils literal"><span class="pre">**kern</span></tt>. Normally, only
the <tt class="docutils literal"><span class="pre">**silbe</span></tt> and <tt class="docutils literal"><span class="pre">**kern</span></tt> data would be encoded &#8211; since the <tt class="docutils literal"><span class="pre">**text</span></tt>
spine can be generated from the <tt class="docutils literal"><span class="pre">**silbe</span></tt> representation.</p>
<p><strong>Example 27.1.</strong> From William Byrd, <em>Why Do I use my paper ink and pen.</em></p>
<p>&gt; .. image:: guide.figures/guide27.1.gif</p>
<p>&gt;
&gt;&gt; <tt class="docutils literal"><span class="pre">!!!COM:</span> <span class="pre">Byrd,</span> <span class="pre">William</span>
<span class="pre">&gt;&gt;</span> <span class="pre">!!!OTL:</span> <span class="pre">Why</span> <span class="pre">do</span> <span class="pre">I</span> <span class="pre">use</span> <span class="pre">my</span> <span class="pre">paper</span> <span class="pre">ink</span> <span class="pre">and</span> <span class="pre">pen.</span>
<span class="pre">&gt;&gt;</span> <span class="pre">**text**silbe**kern</span>
<span class="pre">&gt;&gt;</span> <span class="pre">*LEnglish*LEnglish*</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=11=11=11</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``..2r</span>
<span class="pre">&gt;&gt;</span> <span class="pre">WhyWhy2g</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=12=12=12</span>
<span class="pre">&gt;&gt;</span> <span class="pre">dodo2b-</span>
<span class="pre">&gt;&gt;</span> <span class="pre">II2a</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=13=13=13</span>
<span class="pre">&gt;&gt;</span> <span class="pre">useuse4g</span>
<span class="pre">&gt;&gt;</span> <span class="pre">mymy4g</span>
<span class="pre">&gt;&gt;</span> <span class="pre">paperpa-[2dd</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=14=14=14</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|2dd]</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.-per2cc</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=15=15=15</span>
<span class="pre">&gt;&gt;</span> <span class="pre">inkink2.ff</span>
<span class="pre">&gt;&gt;</span> <span class="pre">andand(4ee</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=16=16=16</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|4dd</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|4cc</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|4b-</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|4cc</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=17=17=17</span>
<span class="pre">&gt;&gt;</span> <span class="pre">pen,pen,1dd</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=18=18=18</span>
<span class="pre">&gt;&gt;</span> <span class="pre">andand1dd</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=19=19=19</span>
<span class="pre">&gt;&gt;</span> <span class="pre">pen,pen,1dd</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=20=20=20</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``..2r</span>
<span class="pre">&gt;&gt;</span> <span class="pre">andand2ff</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=21=21=21</span>
<span class="pre">&gt;&gt;</span> <span class="pre">callcall2.ee</span>
<span class="pre">&gt;&gt;</span> <span class="pre">mymy4dd</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=22=22=22</span>
<span class="pre">&gt;&gt;</span> <span class="pre">witswits1cc#</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=23=23=23</span>
<span class="pre">&gt;&gt;</span> <span class="pre">toto2ee</span>
<span class="pre">&gt;&gt;</span> <span class="pre">counselcoun-[2aa</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=24=24=24</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.-sel4aa]</span>
<span class="pre">&gt;&gt;</span> <span class="pre">whatwhat4ff</span>
<span class="pre">&gt;&gt;</span> <span class="pre">toto(8ee</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|8dd</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=25=25=25</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|4cc</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|4dd</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|4.ee</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|8dd</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=26=26=26</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|4ee</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|4ee</span>
<span class="pre">&gt;&gt;</span> <span class="pre">``.|2dd)</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=27=27=27</span>
<span class="pre">&gt;&gt;</span> <span class="pre">say,say,1cc#</span>
<span class="pre">&gt;&gt;</span> <span class="pre">=28=28=28</span>
<span class="pre">&gt;&gt;</span> <span class="pre">*-*-*-</span></tt></p>
<p>Note that all three representations in Example 27.1 make use of the common
system for representing barlines. In the <a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id107"><span class="problematic" id="id108">`**text```_</span></a> representation tokens
represent individual words. In some scores, several words will be associated
with a single moment (or pitch), as in the case of <em>recitativo</em> passages.
Multi-word tokens are encoded as Humdrum multiple-stops with a space
separating each word on a record.</p>
<p>In the <tt class="docutils literal"><span class="pre">`**silbe```_</span> <span class="pre">representation</span> <span class="pre">tokens</span> <span class="pre">represent</span> <span class="pre">individual</span> <span class="pre">syllables.</span>
<span class="pre">In</span> <span class="pre">``**silbe</span></tt> the hyphen (-) is used explicitly to signify syllable
boundaries and the tilde (~) is used to signify boundaries between hyphenated
words (necessarily also a syllable boundary). In other words, four types of
syllables are distinguished by <tt class="docutils literal"><span class="pre">**silbe</span></tt>: (1) a single-syllable word, (2) a
word-initiating syllable, (3) a word-completing syllable, and (4) a mid-word
syllable. The following table illustrates how these signifiers are used:</p>
<p><strong>Table 26.1.</strong></p>
<p>&gt; <a href="#id7"><span class="problematic" id="id8">*</span></a>text*a single-syllable word
&gt; <a href="#id9"><span class="problematic" id="id10">*</span></a>text-<a href="#id11"><span class="problematic" id="id12">*</span></a>a word-initiating syllable
&gt; <a href="#id13"><span class="problematic" id="id14">*</span></a>-text*a word-completing syllable
&gt; <a href="#id15"><span class="problematic" id="id16">*</span></a>-text-<a href="#id17"><span class="problematic" id="id18">*</span></a>a mid-word syllable
&gt; <a href="#id19"><span class="problematic" id="id20">*</span></a>text~*a single-syllable word beginning a hyphenated multi-word
&gt; <a href="#id21"><span class="problematic" id="id22">*</span></a>~text*a single-syllable word completing a hyphenated multi-word
&gt; <a href="#id23"><span class="problematic" id="id24">*</span></a>~text~*a single-syllabe word continuing a hyphenated multi-word
&gt; <a href="#id25"><span class="problematic" id="id26">*</span></a>~text-<a href="#id27"><span class="problematic" id="id28">*</span></a>a word-initating syllable continuing a hyphenated multi-word
&gt; <a href="#id29"><span class="problematic" id="id30">*</span></a>-text~*a word-completing syllable &#8211; part of a hyphenated multi-word</p>
<p>Both the <tt class="docutils literal"><span class="pre">**text</span></tt> and <tt class="docutils literal"><span class="pre">**silbe</span></tt> representations are able to distinguish
different tones of voice such as spoken voice, whispered voice, laughing
voice, emotional voice, <em>Sprechstimme</em> and humming. In addition, there are
signifiers for indicating untexted laughter and untexted sobs or crys. Some
sample signifiers are shown in Table 26.2</p>
<p><strong>Table 26.2.</strong></p>
<p>&gt; <tt class="docutils literal"><span class="pre">A-Z``upper-case</span> <span class="pre">letters</span> <span class="pre">A</span> <span class="pre">to</span> <span class="pre">Z</span>
<span class="pre">&gt;</span> <span class="pre">``a-z``lower-case</span> <span class="pre">letters</span> <span class="pre">a-z</span>
<span class="pre">&gt;</span> <span class="pre">``(``open</span> <span class="pre">parenthesis</span>
<span class="pre">&gt;</span> <span class="pre">``)``closed</span> <span class="pre">parenthesis</span>
<span class="pre">&gt;</span> <span class="pre">``{``beginning</span> <span class="pre">of</span> <span class="pre">phrase</span>
<span class="pre">&gt;</span> <span class="pre">``}``end</span> <span class="pre">of</span> <span class="pre">phrase</span>
<span class="pre">&gt;</span> <span class="pre">``%``silence</span> <span class="pre">(rest)</span> <span class="pre">token</span> <span class="pre">(character</span> <span class="pre">by</span> <span class="pre">itself)</span>
<span class="pre">&gt;</span> <span class="pre">``M``humming</span> <span class="pre">voice</span> <span class="pre">(character</span> <span class="pre">by</span> <span class="pre">itself)</span>
<span class="pre">&gt;</span> <span class="pre">``[``beginning</span> <span class="pre">of</span> <span class="pre">spoken</span> <span class="pre">voice</span>
<span class="pre">&gt;</span> <span class="pre">``[[``beginning</span> <span class="pre">of</span> <span class="pre">whisper</span>
<span class="pre">&gt;</span> <span class="pre">``]``end</span> <span class="pre">of</span> <span class="pre">spoken</span> <span class="pre">voice</span>
<span class="pre">&gt;</span> <span class="pre">``]]``end</span> <span class="pre">of</span> <span class="pre">whisper</span>
<span class="pre">&gt;</span> <span class="pre">``&lt;*beginning</span> <span class="pre">of</span> <span class="pre">*Sprechstimme*</span>
<span class="pre">&gt;</span> <span class="pre">``&gt;**end</span> <span class="pre">of</span> <span class="pre">Sprechstimme*</span>
<span class="pre">&gt;</span> <span class="pre">``#``beginning</span> <span class="pre">of</span> <span class="pre">laughing</span> <span class="pre">voice</span>
<span class="pre">&gt;</span> <span class="pre">``##``end</span> <span class="pre">of</span> <span class="pre">laughing</span> <span class="pre">voice</span>
<span class="pre">&gt;</span> <span class="pre">``&#64;``laughter</span> <span class="pre">(no</span> <span class="pre">text)</span>
<span class="pre">&gt;</span> <span class="pre">``&amp;``sob</span> <span class="pre">or</span> <span class="pre">cry</span> <span class="pre">(no</span> <span class="pre">text)</span>
<span class="pre">&gt;</span> <span class="pre">````beginning</span> <span class="pre">of</span> <span class="pre">emotional</span> <span class="pre">voice</span>
<span class="pre">&gt;</span> <span class="pre">```end</span> <span class="pre">of</span> <span class="pre">emotional</span> <span class="pre">voice</span>
<span class="pre">&gt;</span> <span class="pre">``*``follows</span> <span class="pre">stressed</span> <span class="pre">word</span> <span class="pre">(``**test</span></tt>) or stressed syllable (<tt class="docutils literal"><span class="pre">**silbe</span></tt>)</p>
<p><em>Signifiers common to ****text*</em> and <strong>**silbe*</strong></p>
</div>
<div class="section" id="the-text-command">
<h2>The <em>text</em> Command<a class="headerlink" href="#the-text-command" title="Permalink to this headline">¶</a></h2>
<p>In most notated music, lyrics are written using a syllabic representation
rather than a word-oriented representation. The <tt class="docutils literal"><span class="pre">**silbe</span></tt> representation is
typically a better representation of the score than <tt class="docutils literal"><span class="pre">**text</span></tt>. However, for
many analytic applications, words often prove to be more convenient. The
Humdrum <strong>text</strong> command can be used to translate <tt class="docutils literal"><span class="pre">**silbe</span></tt> data to
`` <a href="#id31"><span class="problematic" id="id32">**</span></a>text`` data. In general, syllabic information is useful for addressing
questions related to rhythm and rhyme, whereas text information is more
useful for addressing questions related to semantics, metaphor, word-
painting, etc.</p>
<p>Invoking the <strong>text</strong> command is straightforward:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span> <span class="pre">inputfile</span> <span class="pre">&gt;</span> <span class="pre">outputfile</span></tt></p>
<p>A simple text-related task might be looking for occurrences of a particular
word, such as the German &#8220;Liebe&#8221; (love). If the lyrics are encoded in the
`` <a href="#id109"><span class="problematic" id="id110">`**text```_</span></a> representation, then a simple <strong>grep</strong> will suffice:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-n</span> <span class="pre">'Liebe'</span> <span class="pre">schubert</span></tt></p>
<p>Recall that the <strong>-n</strong> option gives the line number of any occurrences found.
If the input is encoded in the <a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id111"><span class="problematic" id="id112">`**silbe```_</span></a> representation, then the output
of <strong>text</strong> can be piped to <strong>grep</strong>:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">schubert</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-n</span> <span class="pre">'Liebe'</span></tt></p>
<p>Given a <tt class="docutils literal"><span class="pre">**silbe</span></tt> input, a inventory of words can be generated using
<strong>sort</strong> and <strong>uniq</strong> in the usual way:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">song</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">|</span> <span class="pre">uniq</span></tt></p>
<p>Frequently, it is useful to search for a group of words rather than
individual words. Suppose we are looking for the phrase &#8220;white Pangur.&#8221; The
<a href="#id113"><span class="problematic" id="id114">`**context**`_</span></a> command can be used to amalgamate words as multiple stops. If
we are looking for a phrase consisting of just two words, we might use the
<strong>-n 2</strong> option for <strong>context</strong>:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span> <span class="pre">barber</span> <span class="pre">|</span> <span class="pre">context</span> <span class="pre">-n</span> <span class="pre">2</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-i</span> <span class="pre">'white</span> <span class="pre">Pangur'</span></tt></p>
<p>Alternatively, we might amalgamate words so they form sentences, or at least
phrases. Puntuation marks provide a convenient marker for ending the
amalgamation process carried out by <strong>context</strong>. In the following command, we
have defined a regular expression with a character-class containing all of
the puntuation marks. The output from this command will display all
punctuated phrases (one per line) that contain the phrase &#8220;white Pangur.&#8221;</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span> <span class="pre">|</span> <span class="pre">context</span> <span class="pre">-e</span> <span class="pre">'[.,;?!]'</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-i</span> <span class="pre">'white</span> <span class="pre">Pangur'</span></tt></p>
</div>
<div class="section" id="the-fmt-command">
<h2>The <em>fmt</em> Command<a class="headerlink" href="#the-fmt-command" title="Permalink to this headline">¶</a></h2>
<p>Another common task is simply to provide a readable text of the text or
lyrics of a work. Given a <tt class="docutils literal"><span class="pre">**text</span></tt> representation, we can use the
<a href="#id115"><span class="problematic" id="id116">`**rid**`_</span></a> command to eliminate all records except non-null data records.
This will result in a list of words &#8211; one word per line. UNIX provides a
simple text formatter called <strong>fmt</strong> that will assemble words or lines into a
block text where all output lines are roughly the same width.  Consider the
Gregorian chant <em>A Solis Ortus</em> from the <em>Liber Usualis</em> (shown in Example
27.2.)</p>
<p><strong>Example 27.2.</strong> Beginning of chant <em>A Solis Ortus</em>.</p>
<p>&gt; .. image:: guide.figures/guide27.2.gif</p>
<p>The Latin text for this chant can be formatted as follows:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">chant12</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">|</span> <span class="pre">fmt</span> <span class="pre">-50</span></tt></p>
<p>The <strong>-50</strong> option tells <strong>fmt</strong> to place no more than 50 characters per
line. The default line-length is 72 characters. The above pipeline produces
the following output:</p>
<p>&gt;
`` A solis ortus cardine ad usque terrae limitem,
Christum canamus principem, natum Maria Virgine.
Beatus auctor saeculi servile corpus induit: ut
carne carnem liberans, ne perderet quos condidit.
Castae parentis viscera cae lestis intratgratia:
venter puellae bajulat secreta, quae non noverat.
Domus pudici pectoris tem plum repente fit Dei:
intacta nesciens virum, concepit alvo filium.``</p>
<p>Another useful output would have the text arranged with one sentence or
phrase on each line. As before we can use the <a href="#id117"><span class="problematic" id="id118">`**context**`_</span></a> command with the
<strong>-e</strong> option to amalgamate words, where each amalgamated line ends with a
punctuation mark:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">chant12</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">context</span> <span class="pre">-e</span> <span class="pre">'[.,;:?!]'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span></tt></p>
<p>The corresponding output is:</p>
<p>&gt;
`` A solis ortus cardine ad usque terrae limitem,
Christum canamus principem,
natum Maria Virgine.
Beatus auctor saeculi servile corpus induit:
ut carne carnem liberans,
ne perderet quos condidit.
Castae parentis viscera cae lestis intratgratia:
venter puellae bajulat secreta,
quae non noverat.
Domus pudici pectoris tem plum repente fit Dei:
intacta nesciens virum,
concepit alvo filium.``</p>
<p>Yet another way of arranging the text output would be to parse the text
according to explicit phrase marks in the <tt class="docutils literal"><span class="pre">`**kern```_</span> <span class="pre">data.</span> <span class="pre">This</span> <span class="pre">will</span>
<span class="pre">require</span> <span class="pre">a</span> <span class="pre">little</span> <span class="pre">more</span> <span class="pre">work,</span> <span class="pre">but</span> <span class="pre">it's</span> <span class="pre">worth</span> <span class="pre">going</span> <span class="pre">through</span> <span class="pre">the</span> <span class="pre">steps</span> <span class="pre">since</span> <span class="pre">the</span>
<span class="pre">same</span> <span class="pre">process</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">applied</span> <span class="pre">to</span> <span class="pre">any</span> <span class="pre">representation.</span> <span class="pre">First,</span> <span class="pre">we</span> <span class="pre">will</span> <span class="pre">need</span> <span class="pre">to</span>
<span class="pre">transfer</span> <span class="pre">the</span> <span class="pre">end-of-phrase</span> <span class="pre">signifier</span> <span class="pre">(`</span></tt>}``&#8217;) from the <tt class="docutils literal"><span class="pre">**kern</span></tt> spine to
the <tt class="docutils literal"><span class="pre">**silbe</span></tt> spine. This transfer entails four steps. (1) Extract the
monophonic <tt class="docutils literal"><span class="pre">**kern</span></tt> spine and eliminate all data signifiers except closing
curly braces (<tt class="docutils literal"><span class="pre">`}</span></tt>&#8216;). Store the result in a temporary file:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**kern'</span> <span class="pre">chant12</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'s/[^}]*//;</span> <span class="pre">s/^$/./'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt></p>
<p>Notice that <a href="#id119"><span class="problematic" id="id120">`**humsed**`_</span></a> has been given two substitution commands. The first
eliminates all data signifiers except the close curly brace. The second
substitution transforms empty output lines to null data records by adding a
single period.</p>
<p>(2) Extract the <tt class="docutils literal"><span class="pre">**silbe</span></tt> spine, translate it to <tt class="docutils literal"><span class="pre">**text</span></tt> and store the
result in another temporary file:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">chant12</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">&gt;</span> <span class="pre">temp2</span></tt></p>
<p>(3) Assemble the two temporary files together and use the <a href="#id121"><span class="problematic" id="id122">`**cleave**`_</span></a>
command to join the end-of-phrase marker to the syllable representation.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">temp1</span> <span class="pre">temp2</span> <span class="pre">|</span> <span class="pre">cleave</span> <span class="pre">-i</span> <span class="pre">'**kern,**text'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">-o</span> <span class="pre">'**text'</span> <span class="pre">&gt;</span> <span class="pre">temp3</span></tt></p>
<p>With this cleaved data we can now use the <strong>context</strong> command to amalgamate
phrase-related text. Finally, <strong>rid</strong> is used to eliminate everything but
non-null data records.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">context</span> <span class="pre">-o</span> <span class="pre">=</span> <span class="pre">-e</span> <span class="pre">}</span> <span class="pre">temp3</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span></tt></p>
<p>The result is as follows:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">A</span> <span class="pre">solis</span> <span class="pre">ortus</span> <span class="pre">cardine</span> <span class="pre">}</span>
<span class="pre">ad</span> <span class="pre">usque</span> <span class="pre">terrae</span> <span class="pre">limitem,</span> <span class="pre">}</span>
<span class="pre">Christum</span> <span class="pre">canamus</span> <span class="pre">principem,</span> <span class="pre">}</span>
<span class="pre">natum</span> <span class="pre">Maria</span> <span class="pre">Virgine.</span> <span class="pre">}</span>
<span class="pre">Beatus</span> <span class="pre">auctor</span> <span class="pre">saeculi</span> <span class="pre">}</span>
<span class="pre">servile</span> <span class="pre">corpus</span> <span class="pre">induit:</span> <span class="pre">}</span>
<span class="pre">ut</span> <span class="pre">carne</span> <span class="pre">carnem</span> <span class="pre">liberans,</span> <span class="pre">}</span>
<span class="pre">ne</span> <span class="pre">perderet</span> <span class="pre">quos</span> <span class="pre">condidit.</span> <span class="pre">}</span>
<span class="pre">Castae</span> <span class="pre">parentis</span> <span class="pre">viscera</span> <span class="pre">}</span>
<span class="pre">cae</span> <span class="pre">lestis</span> <span class="pre">intratgratia:</span> <span class="pre">}</span>
<span class="pre">venter</span> <span class="pre">puellae</span> <span class="pre">bajulat</span> <span class="pre">}</span>
<span class="pre">secreta,</span> <span class="pre">quae</span> <span class="pre">non</span> <span class="pre">noverat.</span> <span class="pre">}</span>
<span class="pre">Domus</span> <span class="pre">pudici</span> <span class="pre">pectoris</span> <span class="pre">}</span>
<span class="pre">tem</span> <span class="pre">plum</span> <span class="pre">repente</span> <span class="pre">fit</span> <span class="pre">Dei:</span> <span class="pre">}</span>
<span class="pre">intacta</span> <span class="pre">nesciens</span> <span class="pre">virum,</span> <span class="pre">}</span>
<span class="pre">concepit</span> <span class="pre">alvo</span> <span class="pre">filium.</span> <span class="pre">}</span></tt></p>
<p>We could clean up the output by using the <strong>sed</strong> command to remove the
trailing closed curly brace. We simple add the following to the pipeline:</p>
<p>&gt; `` . . . | sed &#8216;s/}//&#8217;``</p>
<p>You might have noticed that each of the above phrases seems to consist of
eight syllables. We can confirm this by returning to the syllabic rather than
word-oriented output. For the above command sequence, simply omit the
<strong>text</strong> command and replace <tt class="docutils literal"><span class="pre">**text</span></tt> with <tt class="docutils literal"><span class="pre">**silbe</span></tt>. The revised script
becomes:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**kern'</span> <span class="pre">chant12</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'s/[^}]*//;</span> <span class="pre">s/^$/./'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">&gt;</span> <span class="pre">temp1</span></tt>
&gt;
&gt;
`` extract -i &#8216;<a href="#id35"><span class="problematic" id="id36">**</span></a>silbe&#8217; chant12 &gt; temp2``
`` assemble temp1 temp2 | cleave -i &#8216;<a href="#id37"><span class="problematic" id="id38">**</span></a>kern,**silbe&#8217; &gt;
&gt;&gt; -o &#8216;<a href="#id39"><span class="problematic" id="id40">**</span></a>silbe&#8217; &gt; temp3``
&gt;
&gt; <tt class="docutils literal"><span class="pre">context</span> <span class="pre">-o</span> <span class="pre">=</span> <span class="pre">-e</span> <span class="pre">}</span> <span class="pre">temp3</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">|</span> <span class="pre">sed</span> <span class="pre">'s/}//'</span></tt></p>
<p>The corresponding output is:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">A</span> <span class="pre">so/-</span> <span class="pre">-lis</span> <span class="pre">or/-</span> <span class="pre">-tus</span> <span class="pre">car/-</span> <span class="pre">-di-</span> <span class="pre">-ne</span>
<span class="pre">ad</span> <span class="pre">us-</span> <span class="pre">-que</span> <span class="pre">ter/-</span> <span class="pre">-rae</span> <span class="pre">li/-</span> <span class="pre">-mi-</span> <span class="pre">-tem,</span>
<span class="pre">Chri/-</span> <span class="pre">-stum</span> <span class="pre">ca-</span> <span class="pre">-na/-</span> <span class="pre">-mus</span> <span class="pre">prin/-</span> <span class="pre">-ci-</span> <span class="pre">-pem,</span>
<span class="pre">na/-</span> <span class="pre">-tum</span> <span class="pre">Ma-</span> <span class="pre">-ri/-</span> <span class="pre">-a</span> <span class="pre">Vir/-</span> <span class="pre">-gi-</span> <span class="pre">-ne.</span>
<span class="pre">Be-</span> <span class="pre">-a/-</span> <span class="pre">-tus</span> <span class="pre">au/-</span> <span class="pre">-ctor</span> <span class="pre">sae/-</span> <span class="pre">-cu-</span> <span class="pre">-li</span>
<span class="pre">ser-</span> <span class="pre">-vi/-</span> <span class="pre">-le</span> <span class="pre">cor/-</span> <span class="pre">-pus</span> <span class="pre">in/-</span> <span class="pre">-du-</span> <span class="pre">-it:</span>
<span class="pre">ut</span> <span class="pre">car/-</span> <span class="pre">-ne</span> <span class="pre">car/-</span> <span class="pre">-nem</span> <span class="pre">li/-</span> <span class="pre">-be-</span> <span class="pre">-rans,</span>
<span class="pre">ne</span> <span class="pre">per/-</span> <span class="pre">-de-</span> <span class="pre">-ret</span> <span class="pre">quos</span> <span class="pre">con/-</span> <span class="pre">-di-</span> <span class="pre">-dit.</span>
<span class="pre">Ca/-</span> <span class="pre">-stae</span> <span class="pre">pa-</span> <span class="pre">-ren/-</span> <span class="pre">-tis</span> <span class="pre">vis/-</span> <span class="pre">-ce-</span> <span class="pre">-ra</span>
<span class="pre">cae/</span> <span class="pre">le/-</span> <span class="pre">-stis</span> <span class="pre">in/-</span> <span class="pre">-trat-</span> <span class="pre">-gra/-</span> <span class="pre">-ti-</span> <span class="pre">-a:</span>
<span class="pre">ven/-</span> <span class="pre">-ter</span> <span class="pre">pu-</span> <span class="pre">-el/-</span> <span class="pre">-lae</span> <span class="pre">ba/-</span> <span class="pre">-ju-</span> <span class="pre">-lat</span>
<span class="pre">se-</span> <span class="pre">-cre/-</span> <span class="pre">-ta,</span> <span class="pre">quae</span> <span class="pre">non</span> <span class="pre">no/-</span> <span class="pre">-ve-</span> <span class="pre">-rat.</span>
<span class="pre">Do/-</span> <span class="pre">-mus</span> <span class="pre">pu-</span> <span class="pre">-di-</span> <span class="pre">-ci</span> <span class="pre">pe/-</span> <span class="pre">-cto-</span> <span class="pre">-ris</span>
<span class="pre">tem/</span> <span class="pre">plum</span> <span class="pre">re-</span> <span class="pre">-pen/-</span> <span class="pre">-te</span> <span class="pre">fit</span> <span class="pre">De/-</span> <span class="pre">-i:</span>
<span class="pre">in-</span> <span class="pre">-ta/-</span> <span class="pre">-cta</span> <span class="pre">ne/-</span> <span class="pre">-sci-</span> <span class="pre">-ens</span> <span class="pre">vi/-</span> <span class="pre">-rum,</span>
<span class="pre">con-</span> <span class="pre">-ce/-</span> <span class="pre">-pit</span> <span class="pre">al/-</span> <span class="pre">-vo</span> <span class="pre">fi/-</span> <span class="pre">-li-</span> <span class="pre">-um.</span></tt></p>
<p>If we are looking for vocal texts that exhibit a recurring rhythm, we might
make a simple addition to the above script. Instead of outputting the actual
syllables in each phrase, we would output a count of the number of syllables
in each phrase. The standard <strong>awk</strong> utility allows us to write simple in-
line programs. The following <strong>awk</strong> script simply outputs the number of
fields (white-space separated text) in each input line:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">awk</span> <span class="pre">'{print</span> <span class="pre">NF}'</span></tt></p>
<p>If we add this to the end of our command sequence, then the output would
simply be a sequence of numbers &#8211; where each number indicates the number of
syllables in successive phrases. In the case of <em>O Solis Ortus</em> our output
would consist of a series of 8s indicating that each phrase contains
precisely eighth syllables.</p>
<p>By way of summary, we can generalize the above process so that
syllable/phrase schemes can be generated for any syllable-related input. The
following script counts the number of syllables in successive phrases for a
single input file.</p>
<p>&gt;
`` # SYLLABLE - count the number of syllables in each phrase
#
# Usage: syllable filename [ &gt; outputfile]
#
extract -i &#8216;<a href="#id41"><span class="problematic" id="id42">**</span></a>kern&#8217; $1 | humsed &#8216;s/[^}]*//; s/^$/./&#8217; &gt; temp1
extract -i &#8216;<a href="#id43"><span class="problematic" id="id44">**</span></a>silbe&#8217; $1 &gt; temp2
assemble temp1 temp2 | cleave -i &#8216;<a href="#id45"><span class="problematic" id="id46">**</span></a>kern,**silbe&#8217; -o &#8216;<a href="#id47"><span class="problematic" id="id48">**</span></a>silbe&#8217; </p>
<div class="section" id="id49">
<h3>&gt;<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">context -o = -e } | rid -GLId | sed &#8216;s/}//&#8217; | awk &#8216;{print NF}&#8217;</div>
</div>
</div>
<div class="section" id="id50">
<h3>&gt;<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<p>rm temp[12]``</p>
<p>Variations on this theme abound. For example, if we wish to determine the
number of syllables between successive punctuation marks, the following
pipeline could be used:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**silbe'</span> <span class="pre">|</span> <span class="pre">context</span> <span class="pre">-o</span> <span class="pre">=</span> <span class="pre">-e</span> <span class="pre">'[.,;:?!]'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLId</span> <span class="pre">|</span> <span class="pre">awk</span> <span class="pre">'{print</span> <span class="pre">NF}'</span></tt></p>
</div>
</div>
<div class="section" id="rhythmic-feet-in-text">
<h2>Rhythmic Feet in Text<a class="headerlink" href="#rhythmic-feet-in-text" title="Permalink to this headline">¶</a></h2>
<p>Another question related to rhythm is to identify rhythmic patterns. Once
again, we might look at the chant <em>O Solis Ortus.</em> Below we have recoded the
syllables in each phrase, where the value <tt class="docutils literal"><span class="pre">0</span></tt> indicates an unstressed
syllable and <tt class="docutils literal"><span class="pre">1</span></tt> indicates a stressed syllable:</p>
<p>&gt;
`` 0 1 0 1 0 1 0 0
0 0 0 1 0 1 0 0
1 0 0 1 0 1 0 0
1 0 0 1 0 1 0 0
0 1 0 1 0 1 0 0
0 1 0 1 0 1 0 0
0 1 0 1 0 1 0 0
0 1 0 0 0 1 0 0
1 0 0 1 0 1 0 0
1 1 0 1 0 1 0 0
1 0 0 1 0 1 0 0
0 1 0 0 0 1 0 0
1 0 0 0 0 1 0 0
1 0 0 1 0 0 1 0
0 1 0 1 0 0 1 0
0 1 0 1 0 1 0 0``</p>
<p>The above output was generated using the <a href="#id123"><span class="problematic" id="id124">`**humsed**`_</span></a> command. Any syllable
containing a trailing asterisk (<tt class="docutils literal"><span class="pre">*</span></tt>) is re-written as a <a href="#id51"><span class="problematic" id="id52">`</span></a>1&#8217;, otherwise as a
<a href="#id53"><span class="problematic" id="id54">`</span></a>0&#8217;.</p>
<p>&gt; `` . . . | humsed &#8216;s/[^ ][^ ]**/1/g; s/[^1][^1]*$/0/g&#8217;``</p>
<p>With the above output, we can generate an inventory of phrase-related text-
rhythms.</p>
<p>&gt; `` . . . | sort | uniq -c | sort``</p>
<p>With the following results:</p>
<p>&gt;
`` 5 0 1 0 1 0 1 0 0
4 1 0 0 1 0 1 0 0
2 0 1 0 0 0 1 0 0
1 0 1 0 1 0 0 1 0
1 1 1 0 1 0 1 0 0
1 1 0 0 0 0 1 0 0
1 1 0 0 1 0 0 1 0
1 0 0 0 1 0 1 0 0``</p>
<p>We can create a summary rhythmic pattern by adding together the values in
each column &#8211; that is, counting the number of accented syllables that occur
in each syllable position within the phrase. We can isolate each column using
the UNIX <strong>cut</strong> command; <strong>cut</strong> is analogous to the Humdrum <a href="#id125"><span class="problematic" id="id126">`**extract**`_</span></a>
command. Fields are delineated by white space (tabs or spaces). For example,
<strong>cut -f 1</strong> will isolate the first column of numbers. We can then pipe the
results to the <strong>stats</strong> utility in order to calculate the numerical total.
For example,</p>
<p>&gt; `` . . . | cut -f 1 | stats | grep &#8216;total&#8217;``
``  . . . | cut -f 2 | stats | grep &#8216;total&#8217;``
``  . . . | cut -f 3 | stats | grep &#8216;total&#8217;``
etc</p>
<p>For the chant <em>O Solis Ortus</em> the results are as follows:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">7</span> <span class="pre">9</span> <span class="pre">0</span> <span class="pre">13</span> <span class="pre">0</span> <span class="pre">14</span> <span class="pre">2</span> <span class="pre">0</span></tt></p>
<p>This means that there are seven stressed syllables in the first syllable
position of the phrase, nine stressed syllables in the second syllable
position, and so on. These results suggest the following rhythmic structure:
medium-strong-weak-strong-weak-strong-weak-weak. By way of conclusion, it
appears that this work has a strongly rhythmic text structure &#8211; implying
that this <a href="#id55"><span class="problematic" id="id56">`</span></a>chant&#8217; might have been sung rhythmically.</p>
</div>
<div class="section" id="concordance">
<h2>Concordance<a class="headerlink" href="#concordance" title="Permalink to this headline">¶</a></h2>
<p>A traditional text-related reference tool is the <em>concordance.</em> Concordances
allow users to look up a word, to see the word in the context of several
preceding and following words, and provide detailed information about the
location of the word in some repertory or corpus.</p>
<p>Suppose, for example, that we wanted to create a concordance for the lyrics
in Samuel Barber&#8217;s songs. We would like to create a file that has a structure
such as shown in Table 26.3 below. The first column identifies the filename.
The second column identifies the bar number in which the keyword occurs. The
third column gives a five-word context where the middle word (in bold)
identifies the keyword.</p>
<p>&gt; <strong>Table 26.3.</strong>
&gt;
&gt;&gt; <tt class="docutils literal"><span class="pre">chant294``ut</span> <span class="pre">possim</span> <span class="pre">**cantare**</span></tt>, Alleluia: gaudebunt``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant297``mea,</span> <span class="pre">dum</span> <span class="pre">**cantavero**</span></tt> tibi: Alleluia,``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant271``Cantate</span> <span class="pre">Domino</span> <span class="pre">**canticum**</span></tt> novum Alleluia:``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant544``Cantate</span> <span class="pre">Domino</span> <span class="pre">**canticum**</span></tt> novum, quia``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant2410``Cantate</span> <span class="pre">Domino</span> <span class="pre">**canticum**</span></tt> novum: quia``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant4214``totus</span> <span class="pre">non</span> <span class="pre">**capit**</span></tt> orbis, in``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant475``et</span> <span class="pre">exaltavit</span> <span class="pre">**caput**</span></tt> ejus; et``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant121``solis</span> <span class="pre">ortus</span> <span class="pre">**cardine**</span></tt> ad usque``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant144``arrisit</span> <span class="pre">orto</span> <span class="pre">**caritas**</span></tt>: Maria, dives``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant127``induit:</span> <span class="pre">ut</span> <span class="pre">**carne**</span></tt> carnem liberans,``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant585``et</span> <span class="pre">in</span> <span class="pre">**carne**</span></tt> mea videbo``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant127``ut</span> <span class="pre">carne</span> <span class="pre">**carnem**</span></tt> liberans, ne``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant146``sola</span> <span class="pre">quae</span> <span class="pre">**casto**</span></tt> potes fovere``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant173``et</span> <span class="pre">discerne</span> <span class="pre">**causam**</span></tt> meam de``
&gt;&gt; <tt class="docutils literal"><span class="pre">chant212``Dominus</span> <span class="pre">a</span> <span class="pre">**cena**</span></tt>, misit aquam``
&gt;&gt; etc.</p>
<p>We would also like to provide a <strong>grep</strong>-like search tool so users can search
for particular keywords.</p>
<p>The following script will generate our concordance file. For each file
specified in the input, we extract the <tt class="docutils literal"><span class="pre">**silbe</span></tt> spine and store it. We
then process this spine no less than three times. In the first pass, we
translate from the <tt class="docutils literal"><span class="pre">**silbe</span></tt> to the <tt class="docutils literal"><span class="pre">**text</span></tt> representation, and generate
a context of 5 words (<strong>-n 5</strong>) making sure to omit barlines (<strong>-o =</strong>). We
also pad the amalgamated line with three null tokens (<strong>-p 3</strong>) so the
context is centered near the third word in the sequence. In the second pass,
we generate a new spine (<tt class="docutils literal"><span class="pre">**nums</span></tt>) that contains only bar numbers. The
<a href="#id127"><span class="problematic" id="id128">`**ditto**`_</span></a> command is used to ensure that every data record contains a bar
number. To ensure that pick-up bars are numbered with the value 0, we&#8217;ve used
<a href="#id129"><span class="problematic" id="id130">`**humsed**`_</span></a> to replace any leading null-tokens with the number 0. In the
third pass, we replace every data token with the name of the file. Finally,
we assemble all three of these spines, eliminate everything but data records,
and also eliminate lines that don&#8217;t contain any text. All of this processing
is carried out in a while-loop that cycles through all of the files provided
when the command is invoked.</p>
<p>&gt;
`` while [ $# -ne 0 ]
do</p>
<div class="section" id="id57">
<h3>&gt;<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<p>extract -i &#8216;<a href="#id58"><span class="problematic" id="id59">**</span></a>silbe&#8217; $1 &gt; temp1
text temp1 | context -o = -n 5 -p 3 &gt; temp2
num -n = -a &#8216;<a href="#id60"><span class="problematic" id="id61">**</span></a>nums&#8217; temp1 | extract -i &#8216;<a href="#id62"><span class="problematic" id="id63">**</span></a>nums&#8217; </p>
</div>
<div class="section" id="id64">
<h3>&gt;&gt;<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">ditto | humsed &#8216;s/./0/&#8217; &gt; temp3</div>
</div>
</div>
<div class="section" id="id65">
<h3>&gt;&gt;<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<p>humsed &#8220;s/.*/$1/&#8221; temp1 &gt; temp4
assemble temp4 temp3 temp2 | rid -GLId | sed &#8216;/.* .$/d&#8217;
shift;</p>
</div>
<div class="section" id="id66">
<h3>&gt;<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<p>done
rm temp[1-4]``</p>
<p>Having generated our concordance file, we can now create a simple tool that
allows us to search for keywords. Suppose we kept our concordance information
in a file called <tt class="docutils literal"><span class="pre">~/home/concord/master</span></tt>. In essence, we&#8217;d like to create a
command akin to <strong>grep</strong> &#8211; but one that searches this file solely according
to the third word in the in the context. We cannot use <strong>grep</strong> directly
since it will find all occurrences of a word no matter where it occurs in the
context. We need to tell <strong>grep</strong> to ignore all other data. The filename, bar
number, and context fields are separated by tabs. We can ignore the first two
fields by eliminating everything up to the last tab in the line. Since words
are separated by blank space, the expression <tt class="docutils literal"><span class="pre">[^</span> <span class="pre">]+</span></tt> will match a word not
containing spaces. In short, the regular expression &#8220;<a href="#id67"><span class="problematic" id="id68">``</span></a>^.**tab*[^ ]+ [^ ]+
`` &#8221; will match everything up to the first tab, followed by two additional
words. All we need to do is paste our keyword to the end of this expression.</p>
<p>Below is a simple one-line script for a command called <strong>keyword.</strong> The user
simply types the command <strong>keyword</strong> followed by a regular expression that
will allow him/her to search for a given word in context. Note that since
we&#8217;ve used the extended regular expression character <a href="#id69"><span class="problematic" id="id70">`</span></a>+&#8217; &#8211; we must invoke
<strong>egrep</strong> rather than <strong>grep</strong> in our script:</p>
<p>&gt;
`` # KEYWORD - A script for searching a master concordance file
#
# Usage: keyword
#
egrep &#8220;^.* [^ ]+ [^ ]+ $1&#8221; ~/home/concord/master``</p>
<p>Concordances can be used for a number of applications. One might use a
concordance to help identify metaphor or image related words (such as
&#8220;light,&#8221; &#8220;darkness,&#8221; etc.)</p>
</div>
</div>
<div class="section" id="simile">
<h2>Simile<a class="headerlink" href="#simile" title="Permalink to this headline">¶</a></h2>
<p>One of the most important poetic devices is the <em>simile</em> &#8211; where an analogy
or metaphorical link is created between two things (&#8220;My love is like a red
red rose.&#8221;) In English, similes are often (though not always) signalled by
the presence of the words &#8220;like&#8221; or &#8220;as.&#8221;</p>
<p>A simple task involves searching for <a href="#id71"><span class="problematic" id="id72">`</span></a>like&#8217; or <a href="#id73"><span class="problematic" id="id74">`</span></a>as&#8217; in the lyrics of some
input. For each occurrence of these words, suppose that we would like to
output a line that places the word in context &#8211; specifically the preceding
and following four words.</p>
<p>First we transform and isolate the text data using the <strong>text</strong> and
<a href="#id131"><span class="problematic" id="id132">`**extract**`_</span></a> commands:</p>
<p>&gt; <a href="#id75"><span class="problematic" id="id76">``</span></a>text inputfile | extract -i &#8216;<a href="#id77"><span class="problematic" id="id78">**</span></a>text&#8217; ``</p>
<p>Since the input may contain multiple-stops, we might consider the precaution
of ensuring no more than one word per data record. For this we can use
<strong>humsed</strong>. Specifically, we can replace any spaces by a carriage return.
Since the carriage return is interpreted by the shell as the instruction to
begin executing a command, we need to escape it. Depending on the shell, the
carriage return can be escaped in various ways. One way is to precede the
carriage return by control-V (meaning &#8220;verbatim&#8221;). Another way is to type
control-M rather than a carriage return. In the following command we have
used the backslash to escape a control-M character:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span> <span class="pre">inputfile</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**text'</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'s/</span> <span class="pre">*/\^M/g'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">egrep</span> <span class="pre">-4</span> <span class="pre">'^|(like)|(as)$'</span></tt></p>
<p>Having ensured that there is no more than one word per line we can now search
for a line contain <em>just</em> &#8220;like&#8221; or &#8220;as.&#8221; The <strong>-4</strong> option for <strong>egrep</strong>
causes any matched lines to be output with four preceding and four following
lines of context. In addition, an extra line is added consisting of two
dashes (<tt class="docutils literal"><span class="pre">--</span></tt>) to segregate each pattern output. That is, for each match,
ten lines of output are typically given. In order to generate our final
output, we need to transform the linear list of words into a horizontal list
where each line represents a single match for &#8220;like&#8221; or &#8220;as.&#8221;</p>
<p>The <a href="#id133"><span class="problematic" id="id134">`**context**`_</span></a> command would enable us to do this. Unfortunately,
however, the output from <strong>egrep</strong> fails to conform to the Humdrum syntax. In
particular, adding <tt class="docutils literal"><span class="pre">^\*</span></tt> to the regular expression will fail to ensure a
proper Humdrum output since preceding and following contextual lines will
also be output.</p>
<p>The <strong>hum</strong> command is a special command that takes non-Humdrum input and
adds sufficient interpretation records so as to make the input conform to the
Humdrum syntax. Typically, this means simply adding a generic initial
exclusive interpretation (<tt class="docutils literal"><span class="pre">**A</span></tt>) and a spine-path terminator (<tt class="docutils literal"><span class="pre">*-</span></tt>). If
the input contains tabs, then appropriate spines will be added. If the input
contains empty lines, then they will be changed to null data records.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span> <span class="pre">inputfile</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**text'</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'s/</span> <span class="pre">*/\^M/g'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">egrep</span> <span class="pre">-4</span> <span class="pre">'^|(like)|(as)$'</span> <span class="pre">|</span> <span class="pre">hum</span></tt></p>
<p>Now we can make use of the <strong>context</strong> command. Each context ends with the
double-dash delimiters generated by <strong>egrep</strong>. The <a href="#id135"><span class="problematic" id="id136">`**rid**`_</span></a> command can be
used to eliminate the interpretations added by <strong>hum</strong>.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span> <span class="pre">inputfile</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**text'</span> <span class="pre">|</span> <span class="pre">humsed</span> <span class="pre">'s/</span> <span class="pre">*/\^M/g'</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">egrep</span> <span class="pre">-4</span> <span class="pre">'^|(like)|(as)$'</span> <span class="pre">|</span> <span class="pre">hum</span> <span class="pre">|</span> <span class="pre">context</span> <span class="pre">-e</span> <span class="pre">'--'</span> <span class="pre">\</span>
<span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-Id</span></tt></p>
</div>
<div class="section" id="word-painting">
<h2>Word Painting<a class="headerlink" href="#word-painting" title="Permalink to this headline">¶</a></h2>
<p>Word painting has a long history in music. There are innumerable examples
where the music has somehow reflected the meaning of the vocal text. Suppose
we wanted to determine whether words designating height (e.g., English
&#8220;high,&#8221; German &#8220;hoch,&#8221; French &#8220;haute/haut&#8221;) tend to coincide with high
pitches.</p>
<p>A simple approach would be to extract those sonorities that coincide with any
of the words high/hoch/haut and determine the average pitch. We can then
contrast this average pitch with the average pitch for the repertory as a
whole. Any significant difference might alert us to possible word painting.</p>
<p>First we translate any pitch data to <tt class="docutils literal"><span class="pre">`**semits```_</span> <span class="pre">and</span> <span class="pre">any</span> <span class="pre">``**silbe</span></tt> data
to <tt class="docutils literal"><span class="pre">**text</span></tt>. We will also filter the outputs to ensure that only
`` <a href="#id79"><span class="problematic" id="id80">**</span></a>semits`` and <tt class="docutils literal"><span class="pre">**text</span></tt> are present.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">semits</span> <span class="pre">*</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**semits,**text'</span></tt></p>
<p>Since a word may be sustained through more than one pitch, and a pitch may be
intoned for more than one word, we should use the <a href="#id137"><span class="problematic" id="id138">`**ditto**`_</span></a> command to
ensure that null tokens are filled-in.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">semits</span> <span class="pre">*</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**semits,**text'</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">=</span></tt></p>
<p>Next, we can use <strong>egrep</strong> to search for the words of interest:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">semits</span> <span class="pre">*</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**semits,**text'</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">egrep</span> <span class="pre">-i</span> <span class="pre">'^\*|high|hoch|haut'</span></tt></p>
<p>Notice the addition of the expression <tt class="docutils literal"><span class="pre">^\*</span></tt> in the search pattern. This
expression will match any Humdrum interpretation records and so ensures that
the output conforms to the Humdrum syntax. We can now isolate the
`` <strong>semits`` data and pass the output to **stats</strong> in order to determine the
average pitch for the words coinciding with the words high/hoch/haut:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">semits</span> <span class="pre">*</span> <span class="pre">|</span> <span class="pre">text</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**semits,**text'</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">egrep</span> <span class="pre">-i</span> <span class="pre">'^\*|high|hoch|haut'</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**semits'</span> <span class="pre">|</span> <span class="pre">stats</span></tt></p>
<p>The average pitch for the entire work can be determined as follows:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">semits</span> <span class="pre">*</span> <span class="pre">|</span> <span class="pre">extract</span> <span class="pre">-i</span> <span class="pre">'**semits'</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">-s</span> <span class="pre">=</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLI</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">stats</span></tt></p>
</div>
<div class="section" id="emotionality">
<h2>Emotionality<a class="headerlink" href="#emotionality" title="Permalink to this headline">¶</a></h2>
<p>Musical texts often convey or portray a wide range of emotions. Some texts
celebrate the ecstacy of love or lament the sorrow of loss. Yet other texts
exhibit little emotional content. Suppose that we wanted to create a tool
that would allow us to estimate the degree of emotional &#8220;charge&#8221; in the
lyrics of any given vocal work. A simple approach might be to look for words
that are commonly associated with high emotional content.</p>
<p>Table 26.4 shows a sample of six words from a study where 10 people were
asked to rate the degree of emotionality associated with 100 English words.
Participants rated each word on a scale from -10 to +10 where -10 indicates a
maximum negative emotional rating and +10 indicates a maximum positive
emotional rating. The values shown identify the average rating for all 10
participants.</p>
<p><strong>Table 26.4. Average Emotionality Ratings for English Words.</strong></p>
<p>&gt; begin+3.8
&gt; river+4.2
&gt; friend+5.2
&gt; love+8.6
&gt; hate-9.7
&gt; detest-9.8</p>
<p>Clearly, such a rating system might allow us to create a tool that would
automatically search a large database and identify those vocal works whose
lyrics are most emotionally charged. One way to generate a crude index of
emotionality is to measure the average ratings for the ten most emotion-laden
words in a given input.</p>
<p>The <a href="#id139"><span class="problematic" id="id140">`**humsed**`_</span></a> command provides an appropriate place to start. In effect,
we would take a table (such as Table 26.4) and use it to create a series of
substitutions. Emotionally-charged words would be replaced by a numerical
rating. Our <strong>humsed</strong> script would have the following form. Notice that the
first substitution is used to eliminate punctuation marks.</p>
<p>&gt; ``
&gt; s/[.,;:&#8217;<cite>&#8221;!?]//g
&gt; s/begin/+3.8/
&gt; s/river/+4.2/
&gt; s/friend/+5.2/
&gt; s/love/+8.6/
&gt; s/hate/-9.7/
&gt; s/detest/-9.8/
&gt; /[^0-9+-]/s/.*/./`</cite></p>
<p>Also notice that the final command transforms any data records that contains
anything other than a number to a null data token. In other words, words that
are not present in the emotionality list are not rated.</p>
<p>In order to process our input, any syllabic text would first be translated to
the <tt class="docutils literal"><span class="pre">**text</span></tt> representation, and all other spines discarded using <strong>extract
-i</strong>.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span></tt> <a href="#id81"><span class="problematic" id="id82">*</span></a>inputfile*`` | extract -i &#8216;<a href="#id83"><span class="problematic" id="id84">**</span></a>text&#8217; ...``</p>
<p>Then we would translate the words using our &#8220;emotionality&#8221; script, eliminate
everything other than data records, and calculate the numerical statistics:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span></tt> <a href="#id85"><span class="problematic" id="id86">*</span></a>inputfile*`` | extract -i &#8216;<a href="#id87"><span class="problematic" id="id88">**</span></a>text&#8217; | humsed -f emotion &gt;
&gt;&gt; | rid -GLId | stats``</p>
<p>In general, works whose lyrics express predominantly positive emotions ought
to exhibit positive emotionality estimates. Similarly, works expressing
predominantly negative emotions ought to exhibit negative emotionality
estimates. Of course the process of averaging may be deceptive. Two sorts of
problems may arise. First, a large number of fairly neutral words will tend
to dilute an otherwise large positive or negative score. It may be preferable
to observe the maximum positive and negative values. Alternatively, it may be
appropriate to limit the average to (say) the ten most emotionally charged
words. We can do this by sorting the numerical values and using the <strong>head</strong>
and <strong>tail</strong> commands to select the highest or lowest values. In our revised
processing, we use <strong>sort -n</strong> to sort the values in numerical order &#8211;
placing the output in a temporary file. The UNIX <strong>head</strong> command allows us
to access a specified number of lines at the beginning of a file: the option
<strong>-5</strong> specifies the first five lines. Similarly, the UNIX <strong>tail</strong> command
allows us to access a specified number of lines at the end of a file. The ten
highest and lowest values are then concatenated together and piped to the
<strong>stats</strong> command:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span></tt> <a href="#id89"><span class="problematic" id="id90">*</span></a>inputfile*`` | extract -i &#8216;<a href="#id91"><span class="problematic" id="id92">**</span></a>text&#8217; | humsed -f emotion &gt;
&gt;&gt; | rid -GLId | sort -n &gt; temp
&gt;
&gt; head -5 temp &gt; lowest
tail -5 temp &gt; highest
cat highest lowest | stats``</p>
<p>A second problem with averaging together emotion rating values is that an
emotionally-charged work might include a rough balance of passionate words
expressing both positive and negative emotions. This might result in an
average near zero and be mistaken for lyrics that exhibit little
emotionality. The <strong>stats</strong> command outputs a variance measure that can be
used to gauge the spread of the data. However, another way to address this
problem is by ignoring the plus and minus signs in the input. That is, a
rough index of emotionality &#8211; independent of whether the emotion is
predominantly negative or positive would simply focus on the most emotionally
charged words.</p>
<p>The plus and minus signs can be eliminated using a simple <strong>humsed</strong>
substitution prior to numerical sorting:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">humsed</span> <span class="pre">'s/[+-]//g'</span></tt></p>
<p>Once again, we could use the <strong>head</strong> command to isolate the 10 or 20 most
emotionally charged words.</p>
<p>Another variant of this approach might be to identify those words in a text
which are most emotionally charged. Suppose we wanted to determine the
location of the most emotionally charged word. A combination of <strong>sort</strong> and
<strong>grep</strong> can be applied to this task. First we generate a spine containing
the emotional-charge values taking care to eliminate the signs:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">text</span></tt> <a href="#id93"><span class="problematic" id="id94">*</span></a>inputfile*`` | extract -i &#8216;<a href="#id95"><span class="problematic" id="id96">**</span></a>text&#8217; | humsed -f emotion &gt;
&gt;&gt; | humsed &#8216;s/[+-]//g&#8217; &gt; charges``</p>
<p>Next we assemble this new spine with the original input:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">charges</span></tt> <em>inputfile</em></p>
<p>We can isolate data records using <strong>rid</strong> and then use <strong>sort -n</strong> to sort
according to the numbers present in the first column. The most emotional
charged word will be at the end of the file (largest number) so we can use
<strong>tail -1</strong> to identify the word:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">charges</span></tt> <a href="#id97"><span class="problematic" id="id98">*</span></a>inputfile*`` | rid -GLId | sort -n | tail -1``</p>
<p>Having established what word has been estimated as having the highest
emotional-charge, we can then use <strong>grep -n</strong> to establish the location(s) of
this word in the original input file.</p>
</div>
<div class="section" id="other-types-of-language-use">
<h2>Other Types of Language Use<a class="headerlink" href="#other-types-of-language-use" title="Permalink to this headline">¶</a></h2>
<p>Apart from emotionality, language tends to be used differently in different
musical genres. The contrast between <em>aria</em> and <em>recitative</em> provides a
classic example. The aria is intended to be a poetic reflection of a certain
emotional state or reaction whereas the recitative moves the action along by
focusing on concrete circumstances. Any number of variants on our
&#8220;emotionality&#8221; processing can be conceived.  For example, we might create
another language index related to the degree of abstraction/concreteness for
words. Words such as Verona, knife and Montague are comparatively concrete,
whereas words such as feud, love and tragedy are more conceptual or abstract.
We might expect to be able to observe such differences in recitative versus
aria texts.</p>
<p>Similarly, differences in language use can be found in folk and popular
music. In the case of the folk <em>ballad</em>, a detailed story unfolds.
Differences in language use may be correlated with the <tt class="docutils literal"><span class="pre">!!!AGN</span></tt> reference
record used to identify genres.</p>
</div>
<hr class="docutils" />
<div class="section" id="reprise">
<h2>Reprise<a class="headerlink" href="#reprise" title="Permalink to this headline">¶</a></h2>
<p>In this chapter we have introduced two text-related representations:
`` <a href="#id141"><span class="problematic" id="id142">`**text```_</span></a> and <tt class="docutils literal"><span class="pre">`**silbe```_.</span> <span class="pre">We</span> <span class="pre">have</span> <span class="pre">examined</span> <span class="pre">the</span> <span class="pre">**text**</span> <span class="pre">command</span>
<span class="pre">(which</span> <span class="pre">translates</span> <span class="pre">from</span> <span class="pre">``**silbe</span></tt> to <tt class="docutils literal"><span class="pre">**text</span></tt>). We have also been exposed
to the UNIX <strong>fmt</strong> command (a simple text formatter), the <strong>cut</strong> command
(similar to <strong>extract -f</strong>), and the <strong>head</strong> and <strong>tail</strong> commands.</p>
<p>In <a href="#id143"><span class="problematic" id="id144">`Chapter 34`_</span></a> we will examine further representations and processes
related to phonetic data.</p>
<hr class="docutils" />
<ul class="simple">
<li>` <a href="#id99"><span class="problematic" id="id100">**</span></a>Next Chapter**`_</li>
<li>` <a href="#id101"><span class="problematic" id="id102">**</span></a>Previous Chapter**`_</li>
<li>` <a href="#id103"><span class="problematic" id="id104">**</span></a>Table of Contents**`_</li>
<li>` <a href="#id105"><span class="problematic" id="id106">**</span></a>Detailed Contents**`_</li>
</ul>
<ol class="upperalpha simple" start="3">
<li>Copyright 1999 David Huron</li>
</ol>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="guide28.html" class="btn btn-neutral float-right" title="&lt;no title&gt;"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="guide26.html" class="btn btn-neutral" title="Chapter26"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Humdrum Community.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>