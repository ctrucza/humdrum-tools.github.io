


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter39 &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="simple">
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sappExtras.html">Humdrum Extras</a></li>
</ul>
<ul class="simple">
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Chapter39</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/guide/guide39.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="chapter39">
<h1>Chapter39<a class="headerlink" href="#chapter39" title="Permalink to this headline">¶</a></h1>
</div>
<hr class="docutils" />
<div class="section" id="trouble-shooting">
<h1>Trouble-Shooting<a class="headerlink" href="#trouble-shooting" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<p>Computers have an unbounded capacity to generate nonsense. Even when commands
appear to execute correctly, there is no guarantee that the results are
accurate or meaningful. In this chapter we will identify some of the many
things that can go wrong when using the Humdrum Toolkit. We will also present
a number of suggestions and tips that will help you avoid potential problems.</p>
<p>Errors can arise from a number of sources including corrupt or error-prone
input data, failure to anticipate special circumstances or exceptions,
improper processing, software bugs, and incautious interpretations of
results.</p>
<div class="section" id="encoding-errors">
<h2>Encoding Errors<a class="headerlink" href="#encoding-errors" title="Permalink to this headline">¶</a></h2>
<p>In the first instance, the accuracy of your results will depend on the
accuracy of the input data. Humdrum data may originate from a variety of
sources. Users may encode their own materials, or use existing data encoded
by other individuals or available from institutional sources. Data quality
can be highly variable and there may be no easy way to determine the accuracy
of a given data set.</p>
<p>It is important to spend time with a data set. Historical musicologists may
spend a considerable amount of time becoming familiar with a manuscript, and
the same practice is recommended for computational musicologists. Users
should look at the data, listen to the data, compare the data to published
sources, and generally browse and peruse it. Most data errors are discovered
while processing the data &#8211; such as finding a suspicious major ninth melodic
interval in a simple song. Over time, more and more errors are eventually
discovered and corrected. Unfortunately, there is no magic flag that pops up
to notify us when all errors have been eliminated from an encoded musical
work. Only over time will the user gain confidence (or lose confidence) in a
given data set. In working with a file, we are far more apt to discover
something is wrong with the data than to learn that the data is a pristine
encoding.</p>
<p>Errors can be magnified by the type of processing that is applied. For
example, consider the case of an encoded repertory that is known to have a
pitch-related error rate of 1 percent. That is, roughly 1 out of every 100
notes has an incorrect pitch representation. If we were to do an inventory of
pitches in this repertory, then our results would also exhibit a 1 percent
error rate. For many applications, such errors are not a problem.</p>
<p>However, consider what happens when we create an inventory of melodic
intervals. One incorrect pitch will falsify <em>two</em> melodic intervals, hence
the error rates for intervals is now 2 percent. Similarly, if we are looking
at four-note chords, a single wrong pitch will falsify an entire chord. So we
will have roughly a 4 percent error rate for chord identification. If we are
investigating simple chord progressions, a single wrong note will now disrupt
the identification of two successive chords. Thus we have an error rate of 8
percent for chord progressions.</p>
<p>There are two general lessons that can be drawn from these observations. The
first lesson is obvious. Always try to use the best quality data that is
available. When encoding your own data, aim for total accuracy. The second
lesson is more subtle. The more data that participates in identifying some
pattern, the greater the likelihood that a single data error will cause a
problem. Whenever possible try to restrict pattern searches to small or
concise patterns.</p>
</div>
<div class="section" id="searching-tips">
<h2>Searching Tips<a class="headerlink" href="#searching-tips" title="Permalink to this headline">¶</a></h2>
<p>Many of the problems in computer-based musicology are evident when searching
for some pattern. In general, there are two types of searching errors: <em>false
hits</em> and <em>misses</em>. A <em>false hit</em> occurs when the search returns something
that is not intended. A <em>miss</em> occurs when the search fails to catch an
instance that was intended to be a match. Unfortunately, efforts to reduce
the number of false hits often tend to increase the number of misses.
Similarly, efforts to avoid misses often tend to increase the number of false
hits. Precision and caution are necessary.</p>
<p>Search failures can arise from five sources: (1) corrupt or inaccurate data,
(2) failure to search all of the intended data, (3) inaccurate or
inappropriate definition of the search template, (4) failure to understand
how a given search tool or option operates, (5) failure on the part of the
user to form a clear idea of what is being sought. Let&#8217;s deal with each of
these problems in turn.</p>
<p><strong>(1) No search can produce accurate results if the data</strong> <strong>to be searched
is inaccurate.</strong> You can increase the accuracy of your search by choosing
high quality data and preparing the files in an appropriate manner.</p>
<p><strong>Tips:</strong></p>
<ul class="simple">
<li>Use the <a href="#id12"><span class="problematic" id="id13">`**humdrum**`_</span></a> command to ensure that the input data conforms
to the Humdrum syntax.</li>
<li>Use the <a href="#id14"><span class="problematic" id="id15">`**humdrum**`_</span></a> <strong>-v</strong> command to determine whether the kind
of data (signifiers) you are interested in are truly present in all of
the files to be searched.</li>
<li>Use the <a href="#id16"><span class="problematic" id="id17">`**proof**`_</span></a> command to ensure that any <a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id18"><span class="problematic" id="id19">`**kern```_</span></a> data is
properly encoded.</li>
<li>Visually inspect sample passages from the input data. Do not rely
solely on the <strong>ms</strong> command; instead, look at the actual ASCII text data
using the <strong>more</strong> command.</li>
<li>Use the <a href="#id20"><span class="problematic" id="id21">`**midi**`_</span></a> and <a href="#id22"><span class="problematic" id="id23">`**perform**`_</span></a> commands to listen to sample
passages; ensure that the data makes sense.</li>
<li>If you are uncertain of the quality of the data, try encoding a
randomly selected subset and then use the UNIX <strong>diff</strong> command to
identify any differences between the original data and the re-encoded
data.</li>
<li>Always read any release notes or README files that accompany the
data.</li>
<li>Use <strong>grep</strong> to search for <em>warning</em> and <em>Nota Bene</em> reference
records (<tt class="docutils literal"><span class="pre">!!!RWG:</span></tt> and <tt class="docutils literal"><span class="pre">!!!ONB:</span></tt>). These records may contain
important editorial notes or warnings.</li>
<li>Where appropriate, expand files to through-composed versions (using
<a href="#id24"><span class="problematic" id="id25">`**thru**`_</span></a>) before searching. If more than one editorial version is
present in a document, select the most appropriate edition before
processing.</li>
<li>Create an inventory of all the types of data tokens present in an
input. Inspect the inventory list to determine whether any unexpected
data are present.</li>
<li>If necessary, eliminate certain types of data that might confound or
interfere with your search in some way. Use <a href="#id26"><span class="problematic" id="id27">`**rid**`_</span></a>, <strong>grep -v</strong>,
<a href="#id28"><span class="problematic" id="id29">`**extract**`_</span></a> <strong>-i</strong>, <strong>sed</strong> and/or <a href="#id30"><span class="problematic" id="id31">`**humsed**`_</span></a> to restrict the data.</li>
</ul>
<p><strong>(2) Ensure that you are searching all of the intended data:</strong></p>
<ul class="simple">
<li>Use <strong>grep</strong> to search for titles, or composers, or opus numbers,
etc., in order to ensure that the file or files you are searching are the
ones you want. Also check to ensure that you are not searching materials
that don&#8217;t belong in the input.</li>
<li>Be wary of searching duplicated materials. Create inventories of
titles, opus numbers, etc., and use <strong>uniq -d</strong> to identify unwanted
duplicate copies of works or files.</li>
<li>Use the <strong>ls -l</strong> or <strong>wc</strong> commands to determine the size of the
search data. Does the amount of input data seem unduly small or unduly
large?</li>
<li>Use the <strong>find</strong> command to search the system for other files that
ought to be included in the search task.</li>
</ul>
<p><strong>(3) One of the most common problems in searching arises</strong> <strong>from inaccurate
or inappropriate search templates.</strong></p>
<p><strong>Tips:</strong></p>
<ul>
<li><p class="first">Be careful when formulating regular expressions. Read aloud the
meaning of the regular expression.</p>
</li>
<li><p class="first">Do not use <em>extended</em> regular expressions with the <strong>grep</strong> command.
Use <strong>egrep</strong> instead.</p>
</li>
<li><p class="first">Ensure that you know which characters in your search template are
meta-characters.</p>
</li>
<li><p class="first">Execute your command from a shell script file so that you don&#8217;t
inadvertently make a typing error when entering the command.</p>
</li>
<li><p class="first">Maintain a command history file so that you have a permanent record
of what you did. Depending on the system settings, the UNIX <strong>history</strong>
command will display the past 100 (or more) commands you have executed.
Place this information in a permanent <tt class="docutils literal"><span class="pre">record</span></tt> file as follows:</p>
<p><tt class="docutils literal"><span class="pre">history</span> <span class="pre">&gt;</span> <span class="pre">record</span></tt></p>
<p>In addition, keep records of the precise regular expressions used for
a given project. These records will help you determine later whether you
made a mistake. For added security, print-out these files and glue them
into a lab book.</p>
</li>
<li><p class="first">Create a test file containing different patterns, and test the
ability of your regular expressions to catch all cases. Included &#8220;lures&#8221;
in your test &#8211; i.e., patterns that are close to what you want, but
should be rejected.</p>
</li>
<li><p class="first">Use extra caution when using &#8220;not&#8221; logic. For example, the <strong>grep</strong>
expression &#8220;not-A&#8221; (i.e. <tt class="docutils literal"><span class="pre">[^A]</span></tt>) will still match records containing
the letter <tt class="docutils literal"><span class="pre">A</span></tt> as long as one non-A letter is present. The commands</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">[^A]</span></tt></p>
</li>
</ul>
<p>&gt;     and``grep -v A``</p>
<blockquote>
<div>are <em>not</em> the same.</div></blockquote>
<ul class="simple">
<li>Compare outputs from a search that you know ought to increase the
number of false hits. Compare outputs from a search that you know ought
to miss some sought patterns.</li>
<li>Translate the data to another representation and repeat the search
using a different pattern tailored to the new representation. The results
should be identical.</li>
<li>Maintain a file containing regular expressions you have tested so you
can re-use them in later projects.</li>
<li>Visually inspect the ASCII output to ensure that the results are
correct. Remember that visual inspection will only help you identify
<em>false hits.</em> Visual inspection of the output will not help you identify
<em>misses.</em></li>
<li>Use the <a href="#id32"><span class="problematic" id="id33">`**midi**`_</span></a> and <a href="#id34"><span class="problematic" id="id35">`**perform**`_</span></a> commands to proof-listen to
your output. Again remember that aural inspection will only help you
identify <em>false hits.</em></li>
<li>Ask whether the output makes sense. Given the amount of music
searched, does it make sense to find the number of occurrences found?</li>
<li>Try making a slight modification to your pattern template &#8211; a
modification that you know should produce a different result.</li>
<li>Look for converging evidence. Try two or three contrasting approaches
to ensure that the same answer arises for each approach. For example, try
searching each part individually using the <a href="#id36"><span class="problematic" id="id37">`**extract**`_</span></a> command.</li>
</ul>
<p><strong>(4) Ensure that you understand how a given search tool or option</strong>
<strong>operates.</strong></p>
<p><strong>Tips:</strong></p>
<ul class="simple">
<li>Remember that <em>extended</em> regular expressions require the use of
<strong>egrep</strong> rather than <strong>grep</strong>.</li>
<li>Re-read the documentation to ensure that each software tool does what
you think it does.</li>
<li>Refer to the examples given in the <em>Humdrum Reference Manual</em> in
order to ensure that you understand what a given option does.</li>
<li>Compare outputs using different options. Ensure that your selected
option(s) is matching the correct pattern.</li>
<li>Use the <a href="#id38"><span class="problematic" id="id39">`**humver**`_</span></a> command to determine which version of the
Humdrum Toolkit you are using. Ensure that the documentation pertains to
the correct version.</li>
<li>Read the &#8220;Release Notes&#8221; for the software you use. Known software
bugs are often reported in such notes or in the documentation.</li>
<li>Report discovered bugs to the software&#8217;s author. Even if the software
is not revised, other users should be informed of the problem.</li>
</ul>
<p><strong>(5) Perhaps the most onerous problems in pattern searching</strong> <strong>arises when
the user fails to have a clear understanding</strong> <strong>of what is being sought:</strong></p>
<p><strong>Tips:</strong></p>
<ul class="simple">
<li>Think carefully about the search problem. What precisely are you
looking for?</li>
<li>Inspect the input to familiarize yourself with various contexts and
possible variants.</li>
<li>Check your search by carrying out a manual search of a random subset
of the data.</li>
</ul>
<p>Compared with manual research, computer searches are impressively fast.
However, don&#8217;t let yourself be caught-up by the speed of interaction. Take
your time and reflect on the problem being addressed. Formulate a search
strategy away from the computer so that you have time to consider possible
confounds.</p>
</div>
<div class="section" id="pipeline-tips">
<h2>Pipeline Tips<a class="headerlink" href="#pipeline-tips" title="Permalink to this headline">¶</a></h2>
<p>Apart from searching tasks, most Humdrum processing involves two or more
software tools linked in a pipeline. Pipelines can obscure all sorts of
processing errors.</p>
<p><strong>Tips:</strong></p>
<ul class="simple">
<li>Slowly assemble your pipeline by adding one software tool at a time.
Visually inspect the output following the addition of each process.</li>
<li>Start with a small volume of input data. Once you have some
confidence in your pipeline use a <em>different</em> sample of input data. Again
add one software tool at a time while inspecting the results at each
stage.</li>
<li>Use the UNIX <strong>tee</strong> command to generate files at intermediate points
in the processing. Use the <a href="#id40"><span class="problematic" id="id41">`**assemble**`_</span></a> command to align inputs and
outputs at various stages in the processing.</li>
<li>Execute your finalized pipeline from a shell script in order to avoid
undetected typing errors.</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="reprise">
<h2>Reprise<a class="headerlink" href="#reprise" title="Permalink to this headline">¶</a></h2>
<p>In research-oriented activities, it is essential to exercise care when
relying on computer-based methods. Computers have an unbounded capacity to
generate false results. Unfortunately, computer outputs often seem
deceptively authoritative. Take your time and develop a coherent strategy for
solving a particular problem. Test your materials and processes, and maintain
good records of what you have done. For critical tasks, always use two or
more independent methods to ensure that the results agree. In general,
cultivate a skeptical attitude; wise users are wary users.</p>
<hr class="docutils" />
<ul class="simple">
<li>` <a href="#id3"><span class="problematic" id="id4">**</span></a>Next Chapter**`_</li>
<li>` <a href="#id5"><span class="problematic" id="id6">**</span></a>Previous Chapter**`_</li>
<li>` <a href="#id7"><span class="problematic" id="id8">**</span></a>Table of Contents**`_</li>
<li>` <a href="#id9"><span class="problematic" id="id10">**</span></a>Detailed Contents**`_</li>
</ul>
<ol class="upperalpha simple" start="3">
<li>Copyright 1999 David Huron</li>
</ol>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Humdrum Community.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>