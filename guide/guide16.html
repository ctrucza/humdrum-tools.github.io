


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter 16: The Shell (II) &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../index.html"/>
        <link rel="up" title="The Humdrum User Guide" href="index.html"/>
        <link rel="next" title="Chapter 17: Creating Inventories" href="guide17.html"/>
        <link rel="prev" title="Chapter 15: Harmonic Intervals" href="guide15.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../installationguide/index.html">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installationguide/downloading.html">Downloading Humdrum</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html"><em>The Humdrum User Guide</em></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="guide01.html">Chapter 1: Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide02.html">Chapter 2: Representing Music Using kern (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide03.html">Chapter 3: Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide04.html">Chapter 4:Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide05.html">Chapter 5: The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide06.html">Chapter 6: Representing Music Using ***kern*(II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide07.html">Chapter 7: MIDI Output Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide08.html">Chapter 8: The Shell (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide09.html">Chapter 9: Searching with Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide10.html">Chapter 10: Musical Uses of Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide11.html">Chapter 11: Melodic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide12.html">Chapter 12: Selecting Musical Parts and Passages</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide13.html">Chapter 13: Assembling Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide14.html">Chapter 14: Stream Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide15.html">Chapter 15: Harmonic Intervals</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Chapter 16: The Shell (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide17.html">Chapter 17: Creating Inventories</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide18.html">Chapter 18: Fingers, Footsteps and Frets</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide19.html">Chapter 19: Musical Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide20.html">Chapter 20: Strophes, Verses, and Repeats</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide21.html">Chapter 21: Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide22.html">Chapter 22: Classifying</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide23.html">Chapter 23: Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide24.html">Chapter 24: The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide25.html">Chapter 25: Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide26.html">Chapter 26: Moving Signifiers Between Spines</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide27.html">Chapter 27: Text and Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide29.html">Chapter 29: Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide30.html">Chapter 30:MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide31.html">Chapter 31: Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide32.html">Chapter 32: The Shell (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide34.html">Chapter 34: Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide35.html">Chapter 35: Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide37.html">Chapter 37: Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide38.html">Chapter 38: Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide39.html">Chapter 39: Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide40.html">Chapter 40: Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibliography.html">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.more.html">Supplementary Humdrum Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.toc.html">Humdrum Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="humdrum.problems.html">HUMDRUM PROBLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux.perform.html">Installing and Using the Humdrum &#8220;perform&#8221; Command under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual.bibliog.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="manual.bibliog.html#bibliography">Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07.html">Humdrum Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#humdrum-representation-development">Humdrum Representation Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#representation-assumptions">Representation Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#creating-new-humdrum-representations">Creating New Humdrum Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#defining-a-new-humdrum-interpretation-a-sample-problem">Defining a New Humdrum Interpretation: A Sample Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07b.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07b.html#humdrum-software-development">Humdrum Software Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07b.html#standard-program-skeleton">Standard Program Skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="musedata2kern.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="musedata2kern.html#how-to-translate-musedata-files-to-humdrum">How To Translate MuseData Files to Humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="musedata2kern.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="projects.html">Sample Research Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="representations.toc.html">Humdrum Representation Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="resources.html">Online Resources:</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample.problems.html">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extras/index.html">Humdrum Extras</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extras/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extras/dataEntry.html">Data Entry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extras/melody.html">Melody Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extras/harmony.html">Harmony</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extras/rhythm.html">Rhythm Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extras/musicSearching.html">Music Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extras/MIDIrendering.html">MIDI Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extras/graphicalNotation.html">Graphical Musical Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extras/otherUtilities.html">Other Useful Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extras/programmingTutorial.html">Programming Tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/vimHighlighting.html">Syntax Coloring in Vim</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../referencemanual/index.html">Humdrum Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../referencemanual/assemble.html">Assemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../referencemanual/hint.html">hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../referencemanual/mint.html">mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../referencemanual/key.html">key</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html"><em>The Humdrum User Guide</em></a> &raquo;</li>
      
    <li>Chapter 16: The Shell (II)</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/guide/guide16.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="chapter-16-the-shell-ii">
<h1>Chapter 16: The Shell (II)<a class="headerlink" href="#chapter-16-the-shell-ii" title="Permalink to this headline">¶</a></h1>
<p>In <a href="#id7"><span class="problematic" id="id8">`Chapter 8`_</span></a> we introduced some of the shell special characters. By way of
review, we learned that the shell interprets the octothorpe (#) as the
beginning of a comment. By itself, the asterisk (*) is &#8220;expanded&#8221; by the
shell to the names of all files in the current directory. When linked with
other characters, such as <tt class="docutils literal"><span class="pre">A*</span></tt> or <tt class="docutils literal"><span class="pre">*B</span></tt>, the shell expands the expression
to the names of all files beginning with A or ending with B. The greather-
than sign (&gt;) directs the output to a named file. The vertical bar or pipe
(|) allows the output of one command to be directed to the input of the
following command. When placed at the end of a command line, the ampersand
(&amp;) causes the shell to execute the command as a background process, and
immediately returns a prompt so the user can execute other commands. The
semicolon (;) indicates the end of a command; this allows more than one
command to be placed on a single line. The backslash () escapes the special
meaning of the immediately following character so it is treated literally.
The single quote or apostrophe (&#8216;) can escape the special meaning of all
characters up to the appearance of a matching single quote.</p>
<p>In this chapter we will continue to describe shell special characters and
identify their functions. In addition, we will learn about the shell <em>alias</em>
function.</p>
<div class="section" id="shell-special-characters">
<h2>Shell Special Characters<a class="headerlink" href="#shell-special-characters" title="Permalink to this headline">¶</a></h2>
<p>The remaining special shell characters include the following: the dollars
sign ($), the greve (`), the less-than sign (&lt;), the question mark (?), and
the double quote (&#8221;). We&#8217;ll consider the function of each of these characters
in turn.</p>
</div>
<div class="section" id="shell-variables">
<h2>Shell Variables<a class="headerlink" href="#shell-variables" title="Permalink to this headline">¶</a></h2>
<p>Like any programming language, the shell allows information to be stored and
retrieved through shell <em>variables</em>. Variables can be given all sorts of
names, such as <tt class="docutils literal"><span class="pre">value</span></tt>, <tt class="docutils literal"><span class="pre">Meter</span></tt>, <tt class="docutils literal"><span class="pre">A34x</span></tt> and <tt class="docutils literal"><span class="pre">BARLINE3</span></tt>. In order to
retrieve information from a variable, the variable name is preceded by a
dollars sign. For example, the string <tt class="docutils literal"><span class="pre">VARIABLE</span></tt> means &#8220;the current value
of the variable named <tt class="docutils literal"><span class="pre">VARIABLE</span></tt>. Suppose you had a file named $FILE in the
current directory ($FILE is a legitimate filename on UNIX systems). If you
type:</p>
<p><tt class="docutils literal"><span class="pre">sort</span> <span class="pre">$FILE</span></tt></p>
<p>The shell will assume that there is a variable named FILE, and retrieve its
contents. Since the contents are likely to be empty, the above command is
identical to typing:</p>
<p><tt class="docutils literal"><span class="pre">sort</span></tt></p>
<p>In order to sort the file named $FILE, the dollars sign would need to be
escaped:</p>
<p><tt class="docutils literal"><span class="pre">sort</span> <span class="pre">\$FILE</span></tt></p>
<p>Depending on the type of shell, variables can be assigned numerical or string
values in various ways. For most shells, variables can be assigned using the
equals sign (with no intervening spaces). For example, the integer 7 can be
assigned to the variable X as follows:</p>
<p><tt class="docutils literal"><span class="pre">X=7</span></tt></p>
<p>Or the string &#8220;hello&#8221; can be assigned to a variable by placing the string in
quotation marks:</p>
<p><tt class="docutils literal"><span class="pre">X=&quot;hello&quot;</span></tt></p>
<p>Single quotation marks can also be used:</p>
<p><tt class="docutils literal"><span class="pre">X='hello'</span></tt></p>
<p>If you had a file named <tt class="docutils literal"><span class="pre">hello</span></tt> in the current directory, and if the
variable <tt class="docutils literal"><span class="pre">X</span></tt> had been assigned as above, then the following command would
sort this file:</p>
<p><tt class="docutils literal"><span class="pre">sort</span> <span class="pre">$X</span></tt></p>
</div>
<div class="section" id="the-shell-greve">
<h2>The Shell Greve<a class="headerlink" href="#the-shell-greve" title="Permalink to this headline">¶</a></h2>
<p>It is often useful to be able to save the results of some operation in a
shell variable. Suppose for example, that we want to sort a file containing
the word <tt class="docutils literal"><span class="pre">zebra</span></tt>. But we&#8217;re not certain what file (or files) contain this
word. Manually, we would need to carry out two operations. First we would
search for any file(s) containing the word:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-l</span> <span class="pre">zebra</span> <span class="pre">*</span></tt></p>
<p>We might find that the word &#8220;zebra&#8221; appears in the files <tt class="docutils literal"><span class="pre">animals</span></tt> and
<tt class="docutils literal"><span class="pre">mammals</span></tt>. Having determine what files to sort, now we would actually carry
out the appropriate sort command:</p>
<p><tt class="docutils literal"><span class="pre">sort</span> <span class="pre">animals</span> <span class="pre">mammals</span></tt></p>
<p>If we found that word &#8220;zebra&#8221; occurred in 50 files, then typing the
appropriate sort command would require a lot of typing. Alternatively, we
could use a shell variable to store the results of the first command, and
then retrieve the filenames in the second command. For this, we must use the
greve character (<a href="#id1"><span class="problematic" id="id2">``</span></a><tt class="docutils literal"><span class="pre">).</span> <span class="pre">UNIX</span> <span class="pre">shells</span> <span class="pre">will</span> <span class="pre">execute</span> <span class="pre">whatever</span> <span class="pre">command(s)</span> <span class="pre">appear</span>
<span class="pre">between</span> <span class="pre">two</span> <span class="pre">greve</span> <span class="pre">characters;</span> <span class="pre">the</span> <span class="pre">result</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">operation</span> <span class="pre">can</span> <span class="pre">then</span> <span class="pre">be</span> <span class="pre">treated</span>
<span class="pre">as</span> <span class="pre">a</span> <span class="pre">string</span> <span class="pre">which</span> <span class="pre">may</span> <span class="pre">be</span> <span class="pre">assigned</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">shell</span> <span class="pre">variable</span> <span class="pre">or</span> <span class="pre">used</span> <span class="pre">in</span> <span class="pre">some</span> <span class="pre">other</span>
<span class="pre">way.</span> <span class="pre">In</span> <span class="pre">the</span> <span class="pre">following</span> <span class="pre">commands,</span> <span class="pre">the</span> <span class="pre">filenames</span> <span class="pre">produced</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">**grep**</span>
<span class="pre">command</span> <span class="pre">are</span> <span class="pre">assigned</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">shell</span> <span class="pre">variable</span> <span class="pre">named</span> <span class="pre">``FILES</span></tt>. In the subsequent
command a dollars sign instructs the shell to retrieve the contents of this
variable:</p>
<p><tt class="docutils literal"><span class="pre">FILES=`grep</span> <span class="pre">-l</span> <span class="pre">zebra</span> <span class="pre">*</span></tt>
<tt class="docutils literal"><span class="pre">sort</span> <span class="pre">$FILES</span></tt></p>
<p>Alternatively, we can avoid the <tt class="docutils literal"><span class="pre">FILES</span></tt> variable altogether, and execute
the following command:</p>
<p><tt class="docutils literal"><span class="pre">sort</span> <span class="pre">`grep</span> <span class="pre">-l</span> <span class="pre">zebra</span> <span class="pre">*</span></tt></p>
<p>The shell interprets the above command as follows: First it recognizes the
presence of the command delineated by greves. This command is executed
<em>before</em> the <strong>sort</strong> command. The <strong>grep -l</strong> command will generate as
output a string of filenames. This output will replace the material
delineated by greves. Finally, the <strong>sort</strong> command will be executed &#8211; using
the filenames generated by the <strong>grep</strong> command.</p>
<p>This command structure is useful in a variety of circumstances. For example,
suppose we wanted to identify any encoded works that are composed by Josquin
and are also in triple meter:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-l</span> <span class="pre">'!!!COM:</span> <span class="pre">Josquin'</span> <span class="pre">`grep</span> <span class="pre">-l</span> <span class="pre">'!!!AMT:.*triple'</span> <span class="pre">*</span></tt></p>
<p>Here we have imbedded one <strong>grep</strong> &#8220;inside&#8221; another. Remember that the
command delineated by the greve is executed first. In this case, we begin by
searching all of the files in the current directory for an <tt class="docutils literal"><span class="pre">AMT</span></tt> reference
record containing the keyword &#8220;<tt class="docutils literal"><span class="pre">triple</span></tt>.&#8221; The <strong>-l</strong> option causes the
output to consist of only filenames. Then the second <strong>grep</strong> is executed. It
looks for files that contain a <tt class="docutils literal"><span class="pre">COM</span></tt> reference record containing the
keyword &#8220;<tt class="docutils literal"><span class="pre">Josquin</span></tt>.&#8221; But this second <strong>grep</strong> only searches those filenames
passed to it by the first <strong>grep</strong>. In other words, the composer search is
restricted to only those files that have a triple meter designation.</p>
<p>Consider another way of using the greve structure. Suppose we have a file
named <tt class="docutils literal"><span class="pre">opus16</span></tt>. We would like to know what other works contain the same
instrumentation as <tt class="docutils literal"><span class="pre">opus16</span></tt>, but we&#8217;ve forgotten what the precise
instrumentation is. We can first seach <tt class="docutils literal"><span class="pre">opus16</span></tt> for the instrumentation
data (encoded in the <tt class="docutils literal"><span class="pre">AIN:</span></tt> reference record), and then search for this
information in all files in the current directory. This task can be carried
out using a single command line:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-l</span> <span class="pre">`grep</span> <span class="pre">'!!!AIN:'</span> <span class="pre">opus16`</span> <span class="pre">*</span></tt></p>
<p>In this example, the imbedded command provides the regular expression rather
than the files to be searched.</p>
</div>
<div class="section" id="single-quotes-double-quotes">
<h2>Single Quotes, Double Quotes<a class="headerlink" href="#single-quotes-double-quotes" title="Permalink to this headline">¶</a></h2>
<p>In <a href="#id9"><span class="problematic" id="id10">`Chapter 8`_</span></a> we learned that single quotation marks can be used to escape
the special meanings of reserved shell characters &#8211; such as * and $. Double
quotation marks (<tt class="docutils literal"><span class="pre">&quot;</span></tt>) have a similar effect with one important exception.
The dollars sign continues to retain its special meaning inside double
quotes.</p>
<p>The UNIX <strong>echo</strong> command causes information to be printed or displayed.
Consider the following three commands:</p>
<p><a href="#id3"><span class="problematic" id="id4">``</span></a>`
$</p>
<p>&gt; echo $A
echo &#8220;$A&#8221;
echo &#8216;$A&#8217;</p>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a>`
$</p>
<p>In the first and second commands, the shell looks for a variable named <tt class="docutils literal"><span class="pre">A</span></tt>
and attempts to echo the contents of this variable on the display. Unless
<tt class="docutils literal"><span class="pre">A</span></tt> happens to be a defined shell variable, only an empty line will be
displayed. In the third command, the string <tt class="docutils literal"><span class="pre">A</span></tt> is treated literally, and
is echoed back to the display. There are circumstances where the double
quotes are more useful, but for most casual users, the single quotes provide
the best means for disengaging the meanings of special characters.</p>
</div>
<div class="section" id="using-shell-variables">
<h2>Using Shell Variables<a class="headerlink" href="#using-shell-variables" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s consider an example where shell variables prove to be useful in Humdrum
processing. Suppose for some score that we want to change the stem-directions
in measures 34 through 38 from up-stems to down-stems. First, we need to
establish the line number corresponding to the beginning of measure 34 and
the line number corresponding to the end of measure 38 (i.e. beginning of
measure 39). In the following script, <strong>grep</strong> is used to assign these line
numbers to the shell variables <tt class="docutils literal"><span class="pre">A</span></tt> and <cite>B`</cite>.</p>
<p><tt class="docutils literal"><span class="pre">A=`grep</span> <span class="pre">-n</span> <span class="pre">^=34</span></tt>
<tt class="docutils literal"><span class="pre">B=`grep</span> <span class="pre">-n</span> <span class="pre">^=39</span></tt></p>
<p>Now we can construct an appropriate <a href="#id11"><span class="problematic" id="id12">`**humsed**`_</span></a> command. Recall that each
substitute (<tt class="docutils literal"><span class="pre">s</span></tt>) command in <strong>humsed</strong> can be preceded by a range
indication. In the following command, the <tt class="docutils literal"><span class="pre">A</span></tt> and <cite>B`</cite> variables convey
the appropriate range to each substitution. This means that the substitutions
are limited to the line numbers ranging between <tt class="docutils literal"><span class="pre">A</span></tt> and <cite>B`</cite>.</p>
<p><tt class="docutils literal"><span class="pre">humsed</span> <span class="pre">&quot;$A,$Bs/\/XXX/g;</span> <span class="pre">$A,$Bs///\/g;</span> <span class="pre">$A,$Bs/XXX/\//g&quot;</span></tt> <em>inputfile</em></p>
<p>Notice that we have used double quotes (&#8221;) rather than single quotes. The
quotation marks are necessary to pass all three substitutions as an argument
to <strong>humsed</strong>. Using singe quotes, however, would have caused <tt class="docutils literal"><span class="pre">A</span></tt> and
<tt class="docutils literal"><span class="pre">$B</span></tt> to be treated as literal strings rather than shell variables.</p>
</div>
<div class="section" id="aliases">
<h2>Aliases<a class="headerlink" href="#aliases" title="Permalink to this headline">¶</a></h2>
<p>An alias is an alternative name for something. The shell provides a way of
defining aliases, and these aliases can prove very convenient.</p>
<p>Consider, by way of example, the following common pipeline:</p>
<p><tt class="docutils literal"><span class="pre">sort</span> <span class="pre">inputfile</span> <span class="pre">|</span> <span class="pre">uniq</span> <span class="pre">-c</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-n</span></tt></p>
<p>In <a href="#id13"><span class="problematic" id="id14">`Chapter 17`_</span></a> we will see that this is a useful way for generating
inventories. Typically, this sequence occurs at the end of a pipeline where
some preliminary processing has taken place, such as:</p>
<p><tt class="docutils literal"><span class="pre">timebase</span> <span class="pre">-t</span> <span class="pre">8</span> <span class="pre">input</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">|</span> <span class="pre">hint</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLI</span> <span class="pre">\</span>
<span class="pre">&gt;</span>
<span class="pre">&gt;&gt;</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">|</span> <span class="pre">uniq</span> <span class="pre">-c</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-n</span></tt></p>
<p>Since the construction <tt class="docutils literal"><span class="pre">sort</span> <span class="pre">|</span> <span class="pre">uniq</span> <span class="pre">-c</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-n</span></tt> is so common, we might
want to define an alias for it. To do so, we simply execute the <strong>alias</strong>
command. In this case, we&#8217;ve defined a new command called <tt class="docutils literal"><span class="pre">inventory</span></tt>:</p>
<p><tt class="docutils literal"><span class="pre">alias</span> <span class="pre">inventory=&quot;sort</span> <span class="pre">|</span> <span class="pre">uniq</span> <span class="pre">-c</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-n&quot;</span></tt></p>
<p>Having defined this alias, we can now make use of it. Any time we type the
word <tt class="docutils literal"><span class="pre">inventory</span></tt>, the shell will expand it to &#8220;<tt class="docutils literal"><span class="pre">sort</span> <span class="pre">|</span> <span class="pre">uniq</span> <span class="pre">-c</span> <span class="pre">|</span> <span class="pre">sort</span>
<span class="pre">-n</span></tt>&#8221;. The above command can be shortened as follows:</p>
<p><tt class="docutils literal"><span class="pre">timebase</span> <span class="pre">-t</span> <span class="pre">8</span> <span class="pre">input</span> <span class="pre">|</span> <span class="pre">ditto</span> <span class="pre">|</span> <span class="pre">hint</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-GLI</span> <span class="pre">|</span> <span class="pre">inventory</span></tt></p>
<p>Another common task is eliminating barlines. Frequently, we need to use the
construction:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-v</span> <span class="pre">^=</span></tt></p>
<p>Actually, this is not the most prudent construction. Depending on the spines
present in a document, sometimes barlines will be mixed with null tokens in
other spines that do not encode explicit barlines. E.g.</p>
<p><tt class="docutils literal"><span class="pre">\.=23=23..=23</span></tt></p>
<p>A more careful way of eliminating barlines would use the following regular
expression:</p>
<p><tt class="docutils literal"><span class="pre">egrep</span> <span class="pre">-v</span> <span class="pre">'^(\.</span> <span class="pre">)*='</span></tt></p>
<p>That is, eliminate all lines that either begin with an equals-sign, or have
one or more leading null tokens followed by a token with a leading equals-
sign. Since this is somewhat complicated to remember, we might alias it. In
the following command, we have created a new command called <tt class="docutils literal"><span class="pre">nobarlines</span></tt>:</p>
<p><tt class="docutils literal"><span class="pre">alias</span> <span class="pre">nobarlines='egrep</span> <span class="pre">-v</span> <span class="pre">'^(\.</span> <span class="pre">)*='</span></tt></p>
<p>In Humdrum, a good use of aliases is to define commonly used regular
expressions. Consider the regular expression used to define tandem
interpretations that encode meter signatures. Here we are searching for an
asterisk at the beginning of a line, followed by the upper-case letter &#8216;M&#8217;
followed by a digit, followed by zero or more digits, followed by a slash,
followed by a digit:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">'^\*M[0-9][0-9]*/[0-9]'</span> <span class="pre">inputfile</span></tt></p>
<p>Actually, this regular expression will fail to find any meter signature that
is not in the first spine. A more circumspect regular expression will include
the possibility of a leading tab:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">'</span> <span class="pre">*\*M[0-9][0-9]*/[0-9]'</span> <span class="pre">inputfile</span></tt></p>
<p>Since this is a cumbersome regular expression, it can help to provide an
alias. Here we have aliased the regular expression to the name <tt class="docutils literal"><span class="pre">metersig</span></tt>:</p>
<p><tt class="docutils literal"><span class="pre">alias</span> <span class="pre">metersig=&quot;'</span> <span class="pre">*\*M[0-9][0-9]*/[0-9]'&quot;</span></tt></p>
<p>Now we can search for meter signatures as follows:</p>
<p><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">metersig</span> <span class="pre">inputfile</span></tt></p>
</div>
<hr class="docutils" />
<div class="section" id="reprise">
<h2>Reprise<a class="headerlink" href="#reprise" title="Permalink to this headline">¶</a></h2>
<p>In this chapter we have discussed how the shell interprets the dollars sign
($), the greve (`), and the double quote (&#8221;). When followed by printable
characters, the dollars sign is interpreted as designating the value of a
shell variable. Any command enclosed between two greve characters is executed
by the shell first, and the returned output of the command is available as an
input parameter to some other command. Like single quotes, double quotes can
be used to escape special shell characters; however, an important difference
is that the dollars-sign retains its special meaning within the double
quotes. This allows shell variables to be embedded into text strings.</p>
<p>We have also learned that the shell <strong>alias</strong> command can be used to provide
a convenient short-hand or way of abbreviating a complex pipeline or regular
expression into a single user-defined keyword.</p>
<hr class="docutils" />
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="guide17.html" class="btn btn-neutral float-right" title="Chapter 17: Creating Inventories"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="guide15.html" class="btn btn-neutral" title="Chapter 15: Harmonic Intervals"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Humdrum Community.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>