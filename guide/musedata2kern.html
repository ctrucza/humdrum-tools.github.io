


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Development Reference &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../index.html"/>
        <link rel="up" title="The Humdrum User Guide" href="index.html"/>
        <link rel="next" title="Sample Problems Using the Humdrum Toolkit" href="problems.html"/>
        <link rel="prev" title="Development Reference" href="manual07b.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html"><em>The Humdrum User Guide</em></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="guide01.html">Chapter1</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide01.html#humdrum-a-brief-tour">Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide02.html">Chapter2</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide02.html#representing-music-using-kern-i">Representing Music Using <strong>***kern*</strong> (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide03.html">Chapter3</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide03.html#some-initial-processing">Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide04.html">Chapter4</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide04.html#basic-pitch-translations">Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide05.html">Chapter5</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide05.html#the-humdrum-syntax">The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide06.html">Chapter6</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide06.html#representing-music-using-kern-ii">Representing Music Using ***kern*(II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide06.html#tuplets">Tuplets</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide07.html">Chapter7</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide08.html">Chapter8</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide09.html">Chapter9</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide10.html">Chapter10</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide11.html">Chapter11</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide12.html">Chapter12</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide13.html">Chapter13</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide14.html">Chapter14</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide15.html">Chapter15</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide16.html">Chapter16</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide17.html">Chapter17</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide18.html">Chapter18</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide19.html">Chapter19</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide20.html">Chapter20</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide21.html">Chapter21</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide21.html#searching-for-patterns">Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide22.html">Chapter22</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide23.html">Chapter23</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide23.html#rhythm">Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide24.html">Chapter24</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide24.html#the-shell-iii">The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide25.html">Chapter25</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide25.html#similarity">Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide26.html">Chapter26</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide26.html#moving-signifiers-between-spines">Moving Signifiers Between Spines</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide27.html">Chapter27</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide29.html">Chapter29</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide29.html#differences-and-commonalities">Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide30.html">Chapter30</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide30.html#midi-input-tools">MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide31.html">Chapter31</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide31.html#repertories-and-links">Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide32.html">Chapter32</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide32.html#the-shell-iv">The Shell (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide34.html">Chapter34</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide34.html#serial-processing">Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide35.html">Chapter35</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide35.html#layers">Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide37.html">Chapter37</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide37.html#electronic-music-editing">Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide38.html">Chapter38</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide38.html#systematic-musicology">Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide39.html">Chapter39</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide39.html#trouble-shooting">Trouble-Shooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide40.html">Chapter40</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide40.html#conclusion">Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibliography.html">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.more.html">Supplementary Humdrum Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.toc.html">Humdrum Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="humdrum.problems.html">HUMDRUM PROBLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux.perform.html">Installing and Using the Humdrum &#8220;perform&#8221; Command under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual.bibliog.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="manual.bibliog.html#bibliography">Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07.html">Humdrum Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#humdrum-representation-development">Humdrum Representation Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#representation-assumptions">Representation Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#creating-new-humdrum-representations">Creating New Humdrum Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07a.html#defining-a-new-humdrum-interpretation-a-sample-problem">Defining a New Humdrum Interpretation: A Sample Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07b.html"><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07b.html#humdrum-software-development">Humdrum Software Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual07b.html#standard-program-skeleton">Standard Program Skeleton</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href=""><em>Development Reference</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-translate-musedata-files-to-humdrum">How To Translate MuseData Files to Humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="problems.html">Sample Problems Using the Humdrum Toolkit</a></li>
<li class="toctree-l2"><a class="reference internal" href="projects.html">Sample Research Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="representations.toc.html">Humdrum Representation Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="resources.html">Online Resources:</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample.problems.html">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sappExtras.html">Humdrum Extras</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cookbook.html">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbook.html#syntax-coloring-in-vim">Syntax Coloring in Vim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook.html#projects-using-humdrum">Projects using Humdrum</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html"><em>The Humdrum User Guide</em></a> &raquo;</li>
      
    <li><em>Development Reference</em></li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/guide/musedata2kern.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <img alt="" src="guide/../HumdrumIcon.gif" />
<img alt="Humdrum" src="guide/../HumdrumHeader.gif" />
<img alt="" src="guide/../HumdrumSpacer.gif" />
<div class="section" id="development-reference">
<h1><em>Development Reference</em><a class="headerlink" href="#development-reference" title="Permalink to this headline">¶</a></h1>
</div>
<hr class="docutils" />
<div class="section" id="how-to-translate-musedata-files-to-humdrum">
<h1>How To Translate MuseData Files to Humdrum<a class="headerlink" href="#how-to-translate-musedata-files-to-humdrum" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<p>Quick Index:</p>
<p>&gt; <a href="#id205"><span class="problematic" id="id206">`**Introduction**`_</span></a> <a href="#id207"><span class="problematic" id="id208">`**Procedural Overview**`_</span></a> <a href="#id209"><span class="problematic" id="id210">`**Procedural Details**`_</span></a>
&gt; <a href="#id211"><span class="problematic" id="id212">`**1. Access Appropriate Files.**`_</span></a> <a href="#id213"><span class="problematic" id="id214">`**2. Basic Translation.**`_</span></a> <a href="#id215"><span class="problematic" id="id216">`**3.
Transposing Parts.**`_</span></a>
&gt; <a href="#id217"><span class="problematic" id="id218">`**4. Beam Modification.**`_</span></a> <a href="#id219"><span class="problematic" id="id220">`**5. Combining Parts.**`_</span></a> <a href="#id221"><span class="problematic" id="id222">`**6. Alignment
Check.**`_</span></a>
&gt; <a href="#id223"><span class="problematic" id="id224">`**7. Removing Duplicate Header Information.**`_</span></a> <a href="#id225"><span class="problematic" id="id226">`**8. Eliminate Redundant
Section Labels.**`_</span></a> <a href="#id227"><span class="problematic" id="id228">`**9. Instrument Identification.**`_</span></a>
&gt; <a href="#id229"><span class="problematic" id="id230">`**10. Figured Bass Generation.**`_</span></a> <a href="#id231"><span class="problematic" id="id232">`**11. Editing Figured Bass.**`_</span></a> <a href="#id233"><span class="problematic" id="id234">`**12.
Leading Barlines.**`_</span></a>
&gt; <a href="#id235"><span class="problematic" id="id236">`**13. Logical and Orthographic Barlines.**`_</span></a> <a href="#id237"><span class="problematic" id="id238">`**14. Eliminating figured
bass comments.**`_</span></a> <a href="#id239"><span class="problematic" id="id240">`**15. Eliminating `P&#8217; Record Comments.**`_</span></a>
&gt; <a href="#id241"><span class="problematic" id="id242">`**16. Resolving &#8220;backspace&#8221; Passages.**`_</span></a> <a href="#id243"><span class="problematic" id="id244">`**17. Checking Naturals.**`_</span></a>
<a href="#id245"><span class="problematic" id="id246">`**18. Adding Heavy Wedge Accents.**`_</span></a>
&gt; <a href="#id247"><span class="problematic" id="id248">`**19. Resolving Trills and Mordents.**`_</span></a> <a href="#id249"><span class="problematic" id="id250">`**20. Appoggiaturas.**`_</span></a> <a href="#id251"><span class="problematic" id="id252">`**21.
Section Labels.**`_</span></a>
&gt; <a href="#id253"><span class="problematic" id="id254">`**22. Repeats and Da Capos.**`_</span></a> <a href="#id255"><span class="problematic" id="id256">`**23. Editorialisms.**`_</span></a> <a href="#id257"><span class="problematic" id="id258">`**24. Reference
Records.**`_</span></a>
&gt; <a href="#id259"><span class="problematic" id="id260">`**25. Syntax Checking (I).**`_</span></a> <a href="#id261"><span class="problematic" id="id262">`**26. Syntax Checking (II).**`_</span></a> <a href="#id263"><span class="problematic" id="id264">`**27.
Proof Listening.**`_</span></a>
&gt; <a href="#id265"><span class="problematic" id="id266">`**28. Adding VTS Checksum Record.**`_</span></a> <a href="#id267"><span class="problematic" id="id268">`**29. Assemble the Distribution
Files.**`_</span></a> <a href="#id269"><span class="problematic" id="id270">`**30. Create a README File.**`_</span></a>
&gt; <a href="#id271"><span class="problematic" id="id272">`**31. Create a LICENSE File.**`_</span></a> <a href="#id273"><span class="problematic" id="id274">`**32. Prepare a Master Disk.**`_</span></a></p>
</div>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>This document provides a detailed description of how to translate score-
related data from the MuseData format to the Humdrum format. Some familiarity
with Humdrum and MuseData is assumed. A suitable introduction to the MuseData
format may be found in <a href="#id275"><span class="problematic" id="id276">`** W.B. Hewlett, &#8220;MuseData: Comprehensive
representation for printing, sound, and analysis.&#8221;**`_</span></a> In: E. Selfridge-Field
<em>Beyond MIDI: The Handbook of Musical Codes,</em> Cambridge, Massachusetts: MIT
Press, 1997. A suitable introduction to Humdrum may be found in Section I
(&#8220;Humdrum General Introduction&#8221;) of the <em>Humdrum Toolkit Reference Manual</em>
(pp. 7-37). In addition, the user must be familiar with the Humdrum Kern
representation. The most comprehensive introduction to Kern is in the file
`` kern_rep.txt`` found in every distribution disk containing Kern data.
Additional technical details regarding Kern are given in the <em>Humdrum Toolkit
Reference Manual,</em> pp. 96-105.</p>
<p>Both <em>MuseData</em> and <em>Humdrum</em> are used to represent score-related musical
data. MuseData provides a hub of high quality data that may be translated to
various forms &#8211; one of which is Humdrum. Humdrum representations are
tailored to facilitate music analysis. The goal of translation is to provide
a broader distribution of CCARH data for music scholars. It is important that
the translation be as accurate and complete as possible.</p>
<p>When translating between two formats, it&#8217;s important to know some things
about both representations. Both MuseData and Humdrum rely on ASCII (text)
formats. Descriptions of the MuseData and Humdrum &#8220;Kern&#8221; representations may
be found in E. Selfridge-Field (editor) <em>Handbook of Musical Codes</em> (MIT
Press, 1997). The MuseData representation is also described in documents
available from the Center for Computer Assisted Research in the Humanities; a
succinct description of the Humdrum &#8220;Kern&#8221; representation can also be found
in the file <tt class="docutils literal"><span class="pre">kern_hlp.txt</span></tt> which accompanies every Humdrum data
distribution.</p>
<p>There are two types of MuseData files: <em>stage 1</em> and <em>stage 2.</em> Both stages
conform to the MuseData representation format, but stage 2 data is more
complete. Specifically, stage 2 data includes layout information suitable for
printing and notation display. For example, stage 2 data contains stem
direction information which is not present in stage 1. Translation to Humdrum
can be done from <em>either</em> stage 1 or stage 2 MuseData &#8211; however, it is
obviously preferable to translate from the more complete stage 2 data.</p>
<p>Humdrum provides several different types of representations. In translating
MuseData, the most pertinent Humdrum representations are the <em>Kern</em> and
<em>Bnum</em> representations. The <em>Kern</em> representation is suitable for
representing notes, rests, stems, beams, etc., and is the most important of
the Humdrum target representations. The <em>Bnum</em> representation is used to
represent &#8220;basso numerato&#8221; or figured-bass data. Figured bass information may
or may not be present in the MuseData files.</p>
<p>The principal difference between MuseData and Humdrum is in the file
organization. Humdrum represents a full score in a single file, whereas
MuseData represents each part or voice in a separate file. In translating
from MuseData to Kern, each individual part is first translated to Kern, and
then all of the parts are assembled into a full score.</p>
<div class="section" id="procedural-overview">
<h2>Procedural Overview<a class="headerlink" href="#procedural-overview" title="Permalink to this headline">¶</a></h2>
<p>Although the basic translation to Kern has been automated, there are several
ancilliary problems that must be attended to. Unfortunately, these ancilliary
problems involve the greatest amount of work. The translation process is
described in detail later in this document. The basic steps involved in
translating from MuseData to Humdrum can be summarized as follows.</p>
<ul class="simple">
<li><ol class="first lowerroman">
<li><em>Accessing</em> or assembling the necessary MuseData files.</li>
</ol>
</li>
<li>(ii) <em>Basic translation</em> from MuseData to the Humdrum Kern
representation. Each part is translated separately.</li>
<li>(iii) <em>Re-beaming and transposing</em> any parts for transposing
instruments.</li>
<li><ol class="first lowerroman" start="4">
<li><em>Assembling a full score</em> from individual parts.</li>
</ol>
</li>
<li><ol class="first loweralpha" start="22">
<li><em>Generating figured bass</em> data (if necessary).</li>
</ol>
</li>
<li>(vi) <em>Editing</em> the score to add header information and discard
unneeded data. Also resolving &#8220;backspace&#8221; passages, resolving trills and
mordents, checking for naturals, and arranging editorialisms.</li>
<li>(vii) <em>Adding reference records</em> to provide &#8220;library-type&#8221;
information about the work.</li>
<li><ol class="first lowerroman" start="8">
<li><em>Syntax checking</em> and proof listening.</li>
</ol>
</li>
<li><ol class="first lowerroman" start="9">
<li><em>Adding checksum</em> information to insure data integrity.</li>
</ol>
</li>
<li>(x) <em>Assembling the distribution package</em> including <tt class="docutils literal"><span class="pre">README</span></tt> and
<tt class="docutils literal"><span class="pre">LICENSE</span></tt> files.</li>
</ul>
<p>The most onerous of the above procedures are automated, however most of the
steps involve manual intervention.</p>
</div>
<div class="section" id="procedural-details">
<h2>Procedural Details<a class="headerlink" href="#procedural-details" title="Permalink to this headline">¶</a></h2>
<p>For data translation, you will normally want to use a UNIX system. Data
translation can also be carried out under DOS or WINDOWS but the translation
programs will run much slower.</p>
<p>In the following detailed explanation, we use the hypothetical example of
translating a work containing four parts: <em>continuo, &#8216;cello, horn</em>, and
<em>oboe</em>.</p>
<div class="section" id="access-appropriate-files">
<h3>1. Access Appropriate Files.<a class="headerlink" href="#access-appropriate-files" title="Permalink to this headline">¶</a></h3>
<p>Copy the appropriate files to a convenient working directory on your hard
disk. Typically, you will need to copy an entire directory structure
containing several subdirectories. On UNIX systems, use the <strong>cp</strong> command
with the <strong>-r</strong> (recursively copy) option. For example, the following command
will copy everything from the <a href="#id1"><span class="problematic" id="id2">`</span></a>A&#8217; disk to the current directory:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">cp</span> <span class="pre">-r</span> <span class="pre">a:*</span> <span class="pre">.</span></tt></p>
<p>You may need to use the <strong>mcopy</strong> command to access DOS disks from Linux
systems.</p>
<p>On DOS systems you may use the <strong>cptree</strong> command to replicate a subdirectory
structure.</p>
</div>
<div class="section" id="basic-translation">
<h3>2. Basic Translation.<a class="headerlink" href="#basic-translation" title="Permalink to this headline">¶</a></h3>
<p>Change directories in the MuseData file structure until reaching the parts
for a given movement or work. In our hypothetical example the directory will
contain numbered files from 1 to 4. Use the <strong>md2kern</strong> program to translate
each part separately:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">md2kern</span> <span class="pre">1</span> <span class="pre">&gt;</span> <span class="pre">1.krn</span>
<span class="pre">md2kern</span> <span class="pre">2</span> <span class="pre">&gt;</span> <span class="pre">2.krn</span>
<span class="pre">md2kern</span> <span class="pre">3</span> <span class="pre">&gt;</span> <span class="pre">3.krn</span>
<span class="pre">md2kern</span> <span class="pre">4</span> <span class="pre">&gt;</span> <span class="pre">4.krn</span></tt></p>
<p>Each part is now in the Humdrum Kern format.</p>
<p>On very rare occasions you may find that <strong>md2kern</strong> fails to work. This
arises from a yet to be diagnosed bug that seems related to the line-length
of input records. This problem can be overcome by editing the file and
eliminating trailing blanks at the ends of lines.</p>
</div>
<div class="section" id="transposing-parts">
<h3>3. Transposing Parts.<a class="headerlink" href="#transposing-parts" title="Permalink to this headline">¶</a></h3>
<p>Unlike the printed score, the Kern representation encodes music at concert
pitch. Determine whether any parts are for transposing instruments. If so,
determine how each transposing instrument should be transposed in order to
return it to concert pitch. For example, a horn in F sounds a perfect fifth
below the notated music. Use the Humdrum <strong>trans</strong> command to transpose down
4 diatonic letter-names (<tt class="docutils literal"><span class="pre">-d</span> <span class="pre">-4</span></tt>) and transpose down 7 chromatic semitones
(<tt class="docutils literal"><span class="pre">-c</span> <span class="pre">-7</span></tt>). (Refer to the <em>Humdrum Reference Manual</em> &#8211; Section 4 for
details on how to use this command). In the case of our horn part:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">trans</span> <span class="pre">-d</span> <span class="pre">-4</span> <span class="pre">-c</span> <span class="pre">-7</span> <span class="pre">3.krn</span> <span class="pre">&gt;</span> <span class="pre">3.tra</span></tt>
`` mv 3.tra 3.krn`` (on UNIX systems)
`` ren 3.tra 3.krn`` (on DOS systems)</p>
<p>In the case of a B-flat trumpet or B-flat clarinet, the appropriate
transposition would be:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">trans</span> <span class="pre">-d</span> <span class="pre">-1</span> <span class="pre">-c</span> <span class="pre">-2</span></tt></p>
<p>In the case of clarinet in A, use the following transposition:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">trans</span> <span class="pre">-d</span> <span class="pre">-2</span> <span class="pre">-c</span> <span class="pre">-3</span></tt></p>
<p>Having transposed the part, edit this file so that the &#8220;transposition
interpretation&#8221; designates a transposing <em>instrument</em> (see <em>Humdrum Reference
Manual</em> &#8211; Section 3 for details on transposition designators). Simply add
the upper-case letter <a href="#id3"><span class="problematic" id="id4">`</span></a>I&#8217; prior to the <a href="#id5"><span class="problematic" id="id6">`</span></a>T&#8217; in the appropriate tandem
interpretation. In the case of our horn, use a text editor to make the
following change:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">*Trd-4c-7</span></tt></p>
<p>to:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">*ITrd-4c-7</span></tt></p>
</div>
<div class="section" id="beam-modification">
<h3>4. Beam Modification.<a class="headerlink" href="#beam-modification" title="Permalink to this headline">¶</a></h3>
<p>MuseData and Kern handle beaming information in different ways. Use the
<strong>rebeam</strong> program to transform the beaming data so that it conforms to the
Kern format. Apply the command to each of the Kern part files:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">rebeam</span> <span class="pre">1.krn</span> <span class="pre">&gt;</span> <span class="pre">1.bem</span>
<span class="pre">rebeam</span> <span class="pre">2.krn</span> <span class="pre">&gt;</span> <span class="pre">2.bem</span>
<span class="pre">rebeam</span> <span class="pre">3.krn</span> <span class="pre">&gt;</span> <span class="pre">3.bem</span>
<span class="pre">rebeam</span> <span class="pre">4.krn</span> <span class="pre">&gt;</span> <span class="pre">4.bem</span></tt></p>
</div>
<div class="section" id="combining-parts">
<h3>5. Combining Parts.<a class="headerlink" href="#combining-parts" title="Permalink to this headline">¶</a></h3>
<p>Combining parts entails expanding the files using the <strong>timebase</strong> command,
then amalgamating the part files into a full score using the <strong>assemble</strong>
command, and then eliminating null data records using the <strong>rid</strong> command.</p>
<p>In order to expand the files, a suitable <em>time-base</em> duration must be chosen.
As a minimum, the time-base must not be longer than the shortest duration
note in any of the part files. The Humdrum <strong>census</strong> command can be used to
establish the shortest note:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">census</span> <span class="pre">-k</span> <span class="pre">*.bem</span></tt></p>
<p>Note that triplets or other &#8220;n-tuplets&#8221; might require an even shorter time-
base for proper score assembly. For example, if the shortest duration in the
work is an eighth-note (<a href="#id7"><span class="problematic" id="id8">`</span></a>8&#8217;), but the work also contains quarter-note
triplets (<a href="#id9"><span class="problematic" id="id10">`</span></a>12&#8217;), then a common divisor must be sought. Both 12 and 8 divide
evenly into 24, therefore a time-base of 24 is the minimum required. If you
are in doubt about an appropriate time-base value, a &#8220;safe&#8221; value is often
96. Apply the same time-base to each of the part files:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">timebase</span> <span class="pre">-t</span> <span class="pre">96</span> <span class="pre">1.bem</span> <span class="pre">&gt;</span> <span class="pre">1.tb</span>
<span class="pre">timebase</span> <span class="pre">-t</span> <span class="pre">96</span> <span class="pre">2.bem</span> <span class="pre">&gt;</span> <span class="pre">2.tb</span>
<span class="pre">timebase</span> <span class="pre">-t</span> <span class="pre">96</span> <span class="pre">3.bem</span> <span class="pre">&gt;</span> <span class="pre">3.tb</span>
<span class="pre">timebase</span> <span class="pre">-t</span> <span class="pre">96</span> <span class="pre">4.bem</span> <span class="pre">&gt;</span> <span class="pre">4.tb</span></tt></p>
<p>(If you have chosen an inappropriate timebase don&#8217;t worry too much, because
the <strong>proof</strong> command will complain voluminously when we apply it later.)</p>
<p>Now we can assemble the parts into a single file containing the full score.
Since the Humdrum convention places the lowest parts in the left-most
columns, we must reverse the numerical order of the part files. We should
also use the <strong>rid</strong> command to eliminate null data records:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">4.tb</span> <span class="pre">3.tb</span> <span class="pre">2.tb</span> <span class="pre">1.tb</span> <span class="pre">|</span> <span class="pre">rid</span> <span class="pre">-d</span> <span class="pre">&gt;</span> <span class="pre">full.krn</span></tt></p>
<p>The file <tt class="docutils literal"><span class="pre">full.krn</span></tt> will now contain a full score rendering of the work or
movement.</p>
</div>
<div class="section" id="alignment-check">
<h3>6. Alignment Check.<a class="headerlink" href="#alignment-check" title="Permalink to this headline">¶</a></h3>
<p>Now that we have a full score, we ought to check to ensure that the parts
have been correctly aligned. The formal way of checking this is to run the
Humdrum <strong>proof</strong> command, but since we will be running this command later,
and since the likelihood is that everything is okay, a faster check is simply
to ensure that the number of the spines is constant throughout the file. We
can do this using the <strong>humdrum</strong> command with the <strong>-v</strong> (verbose) option.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">humdrum</span> <span class="pre">-v</span> <span class="pre">full.krn</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">'concurrent</span> <span class="pre">spines'</span></tt></p>
<p>The output from this command will tell us the <em>minimum</em> and <em>maximum</em> number
of spines in the file; they should be identical. If they aren&#8217;t identical,
then it is likely that the parts are misaligned. The probable cause is that
one or more of the parts contains an unusual <em>n</em>-tuplet (such as 7 in the
time of a quarter) and that the time-base value used in the <strong>timebase</strong>
command was insufficiently large. Examine the full score at the point where
the parts are misaligned and determine which duration value that has led to
the problem. Calculate a better time-base value so that all durations in the
work are common factors. For example, if the work contains quarter-notes (4),
eighth-notes (8) and septuplets in the time of a quarter (28), then a
suitable time-base value would be 28 X 8 or 224. Return to the section
&#8220;Combining Parts&#8221; and use the revised time-base value.</p>
</div>
<div class="section" id="removing-duplicate-header-information">
<h3>7. Removing Duplicate Header Information.<a class="headerlink" href="#removing-duplicate-header-information" title="Permalink to this headline">¶</a></h3>
<p>After creating a full score, duplicate MuseData header comments can be
removed using a text editor like <strong>vi</strong> or <strong>emacs.</strong> For example, if the
full score contains 12 parts, we don&#8217;t need 12 identical comments indicating
the date that the parts were encoded.</p>
</div>
<div class="section" id="eliminate-redundant-section-labels">
<h3>8. Eliminate Redundant Section Labels.<a class="headerlink" href="#eliminate-redundant-section-labels" title="Permalink to this headline">¶</a></h3>
<p>Humdrum provides ways of labelling sections and indicating repeats, Da Capos,
etc. The <strong>md2kern</strong> program automatically assigns the default label <a href="#id11"><span class="problematic" id="id12">`</span></a>A&#8217; to
the first section in any translated work. Subsequent sections are labelled
<a href="#id13"><span class="problematic" id="id14">`</span></a>B&#8217;, <a href="#id15"><span class="problematic" id="id16">`</span></a>C&#8217;, etc. In many cases, the work has only a single section; in this
case the section label is of no use unless there is a repeat. Consequently,
the Humdrum &#8220;expansion list&#8221; (indicating how to expand repeats) simply says
play section <a href="#id17"><span class="problematic" id="id18">`</span></a>A&#8217; once. In these cases, both the <em>section label</em> and the
<em>expansion list</em> are redundant and should be deleted. That is, the following
lines should be eliminated if they occur together:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">*&gt;[A]</span>
<span class="pre">*&gt;A</span></tt></p>
</div>
<div class="section" id="instrument-identification">
<h3>9. Instrument Identification.<a class="headerlink" href="#instrument-identification" title="Permalink to this headline">¶</a></h3>
<p>Humdrum provides standardized instrumentation indicators. For example, the
standard indicator for &#8220;harpsichord&#8221; is <tt class="docutils literal"><span class="pre">*Icemba</span></tt>. An extensive list of
instrument designators can be found in Section 3 of the <em>Humdrum Reference
Manual</em> (pp. 193-198).</p>
<p>In addition, Humdrum provides standardized instrument class designators, such
as <tt class="docutils literal"><span class="pre">*ICklav</span></tt> for keyboard instruments and <tt class="docutils literal"><span class="pre">*ICidio</span></tt> for percussion
instruments, and for instrument groupings &#8211; such as <tt class="docutils literal"><span class="pre">*IGripn</span></tt> for
<em>ripieno</em> instruments and <tt class="docutils literal"><span class="pre">*IGacmp</span></tt> for accompaniment instruments. These
instrument class designators can also be found in Section 3 of the Humdrum
reference manual.</p>
<p>In addition, the original instrument name (as found in the score) should also
be encoded as a Humdrum local comment.</p>
<p>Add instrument and instrument-class tandem interpretations. Also add the
instrument identification to corresponding local comments.</p>
</div>
<div class="section" id="figured-bass-generation">
<h3>10. Figured Bass Generation.<a class="headerlink" href="#figured-bass-generation" title="Permalink to this headline">¶</a></h3>
<p>If the original MuseData score includes figured-bass information, then the
appropriate data will appear in the Kern output as special global comments
(beginning &#8220;<tt class="docutils literal"><span class="pre">!!f1</span></tt> ...&#8221; or &#8220;<tt class="docutils literal"><span class="pre">!!f2</span></tt> ...&#8221; etc.). These comments can be used
to generate a Humdrum &#8220;basso-numerato&#8221; spine (<tt class="docutils literal"><span class="pre">**Bnum</span></tt>) using the
<strong>md2bnum</strong> program.</p>
<p>&gt; <tt class="docutils literal"><span class="pre">md2bnum</span> <span class="pre">full.krn</span> <span class="pre">&gt;</span> <span class="pre">figbass</span></tt></p>
<p>This new spine should then be added to the full score using the <strong>assemble</strong>
command:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">assemble</span> <span class="pre">full.krn</span> <span class="pre">figbass</span> <span class="pre">&gt;</span> <span class="pre">temp</span>
<span class="pre">mv</span> <span class="pre">temp</span> <span class="pre">full.krn</span></tt></p>
</div>
<div class="section" id="editing-figured-bass">
<h3>11. Editing Figured Bass.<a class="headerlink" href="#editing-figured-bass" title="Permalink to this headline">¶</a></h3>
<p>There is an unfortunate problem arising when translating MuseData figured
bass to the Humdrum basso-numerato. When a new figure occurs while a bass
note is being sustained, it is possible that the position of the figure in
the Humdrum file is incorrect. Consider, for example, the two passages shown
below. The &#8220;<tt class="docutils literal"><span class="pre">5-3</span></tt>&#8221; figured bass is positioned <em>incorrectly</em> in the first
passage, but it is positioned <em>correctly</em> in the second passage:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">**kern**kern**kern**Bnum</span>
<span class="pre">&gt;</span> <span class="pre">2E4c8g6</span>
<span class="pre">&gt;</span> <span class="pre">``..8a5</span> <span class="pre">3</span>
<span class="pre">&gt;</span> <span class="pre">``.4B4g.</span>
<span class="pre">&gt;</span> <span class="pre">**kern**kern**kern**Bnum</span>
<span class="pre">&gt;</span> <span class="pre">2E4c8g6</span>
<span class="pre">&gt;</span> <span class="pre">``..8a.</span>
<span class="pre">&gt;</span> <span class="pre">``.4B4g5</span> <span class="pre">3</span></tt></p>
<p>When more than one figured bass is given for a single bass note the
<strong>md2bnum</strong> command cannot determine where the correct placement is from the
MuseData information.</p>
<p>The <strong>bnumhelp</strong> program marks all <em>possible</em> error points for manual
inspection and editing:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">bnumhelp</span> <span class="pre">full.krn</span> <span class="pre">&gt;</span> <span class="pre">new.krn</span></tt></p>
<p>Open the file &#8220;<tt class="docutils literal"><span class="pre">new.krn</span></tt>&#8221; and search for any occurrences of the string
&#8220;<tt class="docutils literal"><span class="pre">ERROR?</span></tt>&#8221; Check each possible error points with the original score to
determine whether the figured bass notation is correctly positioned. When you
have finished editing the file:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">mv</span> <span class="pre">new.krn</span> <span class="pre">full.krn</span></tt></p>
</div>
<div class="section" id="leading-barlines">
<h3>12. Leading Barlines.<a class="headerlink" href="#leading-barlines" title="Permalink to this headline">¶</a></h3>
<p>Humdrum tools prefer to have explicit information indicating the beginning of
the first measure. If a file does not begin with an anacrusis (&#8220;pickup&#8221;) then
an &#8220;invisible&#8221; first barline needs to be encoded in the Kern representation.
In our hypothetical file containing five spines, we would need to insert the
following line just before the first note(s) in the work:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">=1-=1-=1-=1-=1-</span></tt></p>
<p>Don&#8217;t forget to add the appropriate barline in the figured bass spine (if it
is present).</p>
</div>
<div class="section" id="logical-and-orthographic-barlines">
<h3>13. Logical and Orthographic Barlines.<a class="headerlink" href="#logical-and-orthographic-barlines" title="Permalink to this headline">¶</a></h3>
<p>The kern representation makes a distinction between the logical <em>function</em> of
a barline and it&#8217;s visual or <em>orthographic</em> appearance. For example, kern
distinguishes between double barlines whose function is to indicate the end
of a work or movement, and double barlines that simply delineate sections
within the course of a work or movement. Moreover, in kern, it is possible
for a barline at the end of the work to be &#8220;functionally&#8221; a double barline,
yet appear visually as a single barline.</p>
<p><em>Functional double barlines</em> are encoded with a double equals sign (==)
whether or not they are visually rendered as double barlines. <em>Functional
single barlines</em> are encoded with a single equals sign (=) whether or not
they are visually rendered as single barlines.</p>
<p>The specific visual appearance may be encoded following the equals sign(s).
The vertical line (|) represents a <a href="#id19"><span class="problematic" id="id20">`</span></a>thin&#8217; line and the exclamation mark (!)
represents a <a href="#id21"><span class="problematic" id="id22">`</span></a>thick&#8217; line. A typical final double bar would be encoded:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">==|!</span></tt></p>
<p>Most mid-movement double bars are encoded with two thin lines and so would be
encoded:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">=||</span></tt></p>
<p>A common translation error arising from the <strong>md2kern</strong> program is to render
mid-movement double barlines as <em>functional</em> rather than <em>orthographic</em>
double-bars. Check all double barlines for proper visual encoding. Remove
&#8220;functional&#8221; double bars from within the work/movement; retain only visual
double barlines mid-work.</p>
</div>
<div class="section" id="eliminating-figured-bass-comments">
<h3>14. Eliminating Figured Bass Comments.<a class="headerlink" href="#eliminating-figured-bass-comments" title="Permalink to this headline">¶</a></h3>
<p>Once the figured bass information has been properly edited, the associated
global comments can be eliminated from the Humdrum file. Open the file and
eliminate all lines beginning with two exclamation marks followed by the
lower-case letter <a href="#id23"><span class="problematic" id="id24">`</span></a>f&#8217;. For example, execute the following command if using
the <strong>vi</strong> text editor:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">:g/^!!f/d</span></tt></p>
</div>
<div class="section" id="eliminating-p-record-comments">
<h3>15. Eliminating <a href="#id25"><span class="problematic" id="id26">`</span></a>P&#8217; Record Comments.<a class="headerlink" href="#eliminating-p-record-comments" title="Permalink to this headline">¶</a></h3>
<p>Also, eliminate some other MuseData information that has been echoed as
Humdrum comments:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">:g/^!!P/d</span></tt></p>
</div>
<div class="section" id="resolving-backspace-passages">
<h3>16. Resolving &#8220;backspace&#8221; Passages.<a class="headerlink" href="#resolving-backspace-passages" title="Permalink to this headline">¶</a></h3>
<p>MuseData provides a &#8220;backspace&#8221; capability that allows the score pointer to
be moved backwards in time. This is forbidden in Humdrum. The <strong>md2kern</strong>
program marks all occurrences of MuseData backspace material, and encodes the
passage as local comments. These must be edited by hand. The user must go
back the specified duration and insert the material either as (1) Kern
multiple stops, or as (2) a temporary split-spine. If the note durations are
identical to the concurrent material in the same voice, then the backspace
material should be inserted as multiple stops. If the note durations differ,
then a temporary split-spine must be added.</p>
</div>
<div class="section" id="checking-naturals">
<h3>17. Checking Naturals.<a class="headerlink" href="#checking-naturals" title="Permalink to this headline">¶</a></h3>
<p>The <strong>md2kern</strong> program currently fails to translate all naturals correctly.
Until this bug is fixed, it is necessary to manually check the output Kern
data against the printed score in order to ensure that all of the naturals
are present.</p>
</div>
<div class="section" id="adding-heavy-wedge-accents">
<h3>18. Adding Heavy Wedge Accents.<a class="headerlink" href="#adding-heavy-wedge-accents" title="Permalink to this headline">¶</a></h3>
<p>The &#8220;md2kern&#8221; program also currently fails to translate &#8220;heavy wedge&#8221; symbols
(designated in MuseData by the semicolon &#8221;;&#8221;). These must be inserted
manually as a greve (`) in the kern data.</p>
</div>
<div class="section" id="resolving-trills-and-mordents">
<h3>19. Resolving Trills and Mordents.<a class="headerlink" href="#resolving-trills-and-mordents" title="Permalink to this headline">¶</a></h3>
<p>The Kern representation makes a distinction between whole-tone and semitone
trills and mordents. Each trill and mordent must be examined manually and the
correct code selected.</p>
<p>The <strong>md2kern</strong> command translates all trills using the token &#8220;<tt class="docutils literal"><span class="pre">Tt</span></tt>&#8221;. Open
the file using a text editor and search for occurrences of <a href="#id27"><span class="problematic" id="id28">`</span></a>Tt&#8217;. Check each
trill against the printed score and determine whether the trill is intended
to be a semitone or tone in size. In rare cases, the size of the trill will
be ambiguous. In these cases choose what you think is the best, and add the
kern <a href="#id29"><span class="problematic" id="id30">`</span></a>x&#8217; signifier immediately following the <a href="#id31"><span class="problematic" id="id32">`</span></a>T&#8217; or <a href="#id33"><span class="problematic" id="id34">`</span></a>t&#8217;. This indicates that
the trill size is an &#8220;editorial interpretation.&#8221;</p>
<p>Repeat this same procedure for mordents (&#8220;<tt class="docutils literal"><span class="pre">Mm</span></tt>&#8221;) and for inverted mordents
(&#8220;<tt class="docutils literal"><span class="pre">Ww</span></tt>&#8221;).</p>
</div>
<div class="section" id="appoggiaturas">
<h3>20. Appoggiaturas.<a class="headerlink" href="#appoggiaturas" title="Permalink to this headline">¶</a></h3>
<p>The kern representation treats appoggiaturas in a special way. In general,
kern is oriented to representing things in a manner closer to how they sound.
Consequently, appoggiaturas are encoded as they would be logically performed.
For example, a quarter-note preceded by an appoggiatura (small note) would be
performed as two eighth-notes. Similarly, a dotted quarter-note preceded by
an appoggiatura would be performed as a quarter-note followed by an eighth-
note.</p>
<p>All appoggiaturas must be re-encoded in a way that reflects their likely
performance. At the same time, the two notes forming the appoggiatura must be
marked in the kern representation: the initial note of the appoggiatura is
marked by the upper-case letter <tt class="docutils literal"><span class="pre">`P</span></tt>&#8216; and the final (second) note of the
appoggiatura is marked by a lower-case letter <tt class="docutils literal"><span class="pre">`p</span></tt>&#8216;.</p>
</div>
<div class="section" id="sections-labels">
<h3>21. Sections Labels.<a class="headerlink" href="#sections-labels" title="Permalink to this headline">¶</a></h3>
<p>It is helpful to break-up large works/movements into smaller sections that
can be labelled. In a binary work, for example, it may be useful to label the
<a href="#id35"><span class="problematic" id="id36">`</span></a>A&#8217; and <a href="#id37"><span class="problematic" id="id38">`</span></a>B&#8217; sections. In a sonata-allegro work, it may be useful to label the
introduction, exposition, development, recapitulation, etc. Some works
include explicitly notated labels. These labels may be traditional, e.g.
&#8220;Coda,&#8221; or they may reflect programatic descriptions, such as the section
entitled <em>Il canto degl&#8217;uccelli</em> [The song of the birds] in Vivaldi&#8217;s <em>The
Four Seasons.</em></p>
<p>Where appropriate, suitable section labels should be created and encoded
using the Humdrum Section Label designator. Section labels can include the
space character:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">*&gt;1st</span> <span class="pre">Theme</span></tt></p>
<p>If you include section labels, you must also include a Humdrum &#8220;Expansion
List&#8221; to indicate how the sections are connected. The Humdrum <strong>thru</strong>
command causes a through-composed version of a file to be generated according
to the expansion list. For example, an expansion list for a simple binary
work may be encoded as:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">*&gt;[A,B]</span></tt></p>
<p>Remember that expansion lists ought to be encoded prior to the first section
label.</p>
</div>
<div class="section" id="repeats-and-da-capos">
<h3>22. Repeats and Da Capos.<a class="headerlink" href="#repeats-and-da-capos" title="Permalink to this headline">¶</a></h3>
<p>Whenever a work/movement includes repeats or Da Capos, section labels and
expansion lists must be encoded. In some cases, there is more than one way of
interpreting how to realize the repeats. The most &#8220;conventional&#8221; realization
should be encoded with the <em>unnamed expansion list.</em> This will specify the
default expansion using the Humdrum <strong>thru</strong> command. Suppose for example,
that you are encoding a typical minuet and trio. The conventional performance
practice involves repeating all sections of both the minuet and trio, but
then avoiding the repeats in the minuet following the Da Capo. A suitable
expansion list might be:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">*&gt;[Minuet,Minuet,Trio,Trio,,Minuet]</span></tt></p>
<p>An alternative expansion list might be encoded as follows (notice the
expansion-list-label <em>ossia</em>):</p>
<p>&gt; <tt class="docutils literal"><span class="pre">*&gt;ossia[Minuet,Minuet,Trio,Trio,,Minuet,Minuet]</span></tt></p>
</div>
<div class="section" id="editorialisms">
<h3>23. Editorialisms.<a class="headerlink" href="#editorialisms" title="Permalink to this headline">¶</a></h3>
<p>MuseData files may contain comments that provide editorial annotations.
Humdrum provides several ways of encoding editorialisms. These include
editorial footnotes, local comments, global comments, interpretation data,
<em>sic</em> and <em>ossia</em> designations, version labels, sectional labels, and
expansion lists.</p>
<p>The kern <tt class="docutils literal"><span class="pre">`x</span></tt>&#8216; signifies an &#8220;editorial interpretation&#8221; &#8211; that the
immediately preceding signifier is interpreted. The kern <tt class="docutils literal"><span class="pre">`xx</span></tt>&#8216; also
signifies an editorial interpretation where the immediately preceding data
token is interpreted. The kern <tt class="docutils literal"><span class="pre">`X</span></tt>&#8216; signifies an &#8220;editorial intervention&#8221;
&#8211; that the immediately preceding signifier is an editorial addition. The
kern <tt class="docutils literal"><span class="pre">`XX</span></tt>&#8216; also signifies an editorial intervention where the immediately
preceding data token is an editorial addition. The kern <tt class="docutils literal"><span class="pre">`y</span></tt>&#8216; designates a
invisible symbol &#8211; such as an unprinted note or rest that is logically
implied. The kern <tt class="docutils literal"><span class="pre">`Y</span></tt>&#8216; signifies an editorial <em>sic</em> marking &#8211; that the
information is encoded literally, but is questionable. The kern <tt class="docutils literal"><span class="pre">`?</span></tt>&#8216;
signifies an editorial footnote where the immediately preceding signifier has
an accompanying editorial footnote (located in a comment record). The kern
`` <cite>??`</cite>&#8216; signifies an editorial footnote where the immediately preceding data
token has an accompanying editorial footnote (located in a comment record).</p>
</div>
<div class="section" id="reference-records">
<h3>24. Reference Records.<a class="headerlink" href="#reference-records" title="Permalink to this headline">¶</a></h3>
<p>Reference information must be added to each file. This information provides
&#8220;library-type&#8221; information about the composer, date of composition, place of
composition, copyright notice, etc.</p>
<p>As many reference records should be added as possible since these are
immensely useful to Humdrum users. Essential reference records include the
following:</p>
<p>&gt; <a href="#id39"><span class="problematic" id="id40">``</span></a>!!!COM:<a href="#id41"><span class="problematic" id="id42">``</span></a>composer&#8217;s name
&gt; <a href="#id43"><span class="problematic" id="id44">``</span></a>!!!CDT:<a href="#id45"><span class="problematic" id="id46">``</span></a>composer&#8217;s dates
&gt; <a href="#id47"><span class="problematic" id="id48">``</span></a>!!!OTL:<a href="#id49"><span class="problematic" id="id50">``</span></a>title (in original language)
&gt; <a href="#id51"><span class="problematic" id="id52">``</span></a>!!!OMV:<a href="#id53"><span class="problematic" id="id54">``</span></a>movement number (if appropriate)
&gt; <a href="#id55"><span class="problematic" id="id56">``</span></a>!!!OPS:<a href="#id57"><span class="problematic" id="id58">``</span></a>opus number (if appropriate)
&gt; <a href="#id59"><span class="problematic" id="id60">``</span></a>!!!ODT:<a href="#id61"><span class="problematic" id="id62">``</span></a>date of composition
&gt; <a href="#id63"><span class="problematic" id="id64">``</span></a>!!!OPC:<a href="#id65"><span class="problematic" id="id66">``</span></a>place of composition
&gt; <a href="#id67"><span class="problematic" id="id68">``</span></a>!!!YEP:<a href="#id69"><span class="problematic" id="id70">``</span></a>publisher of electronic edition
&gt; <a href="#id71"><span class="problematic" id="id72">``</span></a>!!!YEC:<a href="#id73"><span class="problematic" id="id74">``</span></a>date &amp; owner of electronic copyright
&gt; <a href="#id75"><span class="problematic" id="id76">``</span></a>!!!YER:<a href="#id77"><span class="problematic" id="id78">``</span></a>date electronic edition released
&gt; <a href="#id79"><span class="problematic" id="id80">``</span></a>!!!YEM:<a href="#id81"><span class="problematic" id="id82">``</span></a>copyright message
&gt; <a href="#id83"><span class="problematic" id="id84">``</span></a>!!!YEN:<a href="#id85"><span class="problematic" id="id86">``</span></a>country of copyright
&gt; <a href="#id87"><span class="problematic" id="id88">``</span></a>!!!EED:<a href="#id89"><span class="problematic" id="id90">``</span></a>electronic editor
&gt; <a href="#id91"><span class="problematic" id="id92">``</span></a>!!!ENC:<a href="#id93"><span class="problematic" id="id94">``</span></a>encoder of document
&gt; <a href="#id95"><span class="problematic" id="id96">``</span></a>!!!EEV:<a href="#id97"><span class="problematic" id="id98">``</span></a>electronic edition version
&gt; <a href="#id99"><span class="problematic" id="id100">``</span></a>!!!ELF:<a href="#id101"><span class="problematic" id="id102">``</span></a>file number, e.g. 1 or 4 (1/4)
&gt; <a href="#id103"><span class="problematic" id="id104">``</span></a>!!!VTS:<a href="#id105"><span class="problematic" id="id106">``</span></a>checksum validation number (see below)
&gt; <a href="#id107"><span class="problematic" id="id108">``</span></a>!!!AMT:<a href="#id109"><span class="problematic" id="id110">``</span></a>metric classification
&gt; <a href="#id111"><span class="problematic" id="id112">``</span></a>!!!AIN:<a href="#id113"><span class="problematic" id="id114">``</span></a>instrumentation</p>
<p>Where appropriate, the following reference records should also be included:</p>
<p>&gt; <a href="#id115"><span class="problematic" id="id116">``</span></a>!!!CNT:<a href="#id117"><span class="problematic" id="id118">``</span></a>composer&#8217;s nationality
&gt; <a href="#id119"><span class="problematic" id="id120">``</span></a>!!!XEN:<a href="#id121"><span class="problematic" id="id122">``</span></a>title (English translation)
&gt; <a href="#id123"><span class="problematic" id="id124">``</span></a>!!!OPR:<a href="#id125"><span class="problematic" id="id126">``</span></a>title of larger (or parent) work
&gt; <a href="#id127"><span class="problematic" id="id128">``</span></a>!!!ODE:<a href="#id129"><span class="problematic" id="id130">``</span></a>dedication
&gt; <a href="#id131"><span class="problematic" id="id132">``</span></a>!!!OCY:<a href="#id133"><span class="problematic" id="id134">``</span></a>country of composition
&gt; <a href="#id135"><span class="problematic" id="id136">``</span></a>!!!PPR:<a href="#id137"><span class="problematic" id="id138">``</span></a>first publisher
&gt; <a href="#id139"><span class="problematic" id="id140">``</span></a>!!!PDT:<a href="#id141"><span class="problematic" id="id142">``</span></a>date first published
&gt; <a href="#id143"><span class="problematic" id="id144">``</span></a>!!!PPP:<a href="#id145"><span class="problematic" id="id146">``</span></a>place first published
&gt; <a href="#id147"><span class="problematic" id="id148">``</span></a>!!!SCT:<a href="#id149"><span class="problematic" id="id150">``</span></a>scholarly catalogue name &amp; number
&gt; <a href="#id151"><span class="problematic" id="id152">``</span></a>!!!SMA:<a href="#id153"><span class="problematic" id="id154">``</span></a>manuscript acknowledgement
&gt; <a href="#id155"><span class="problematic" id="id156">``</span></a>!!!AFR:<a href="#id157"><span class="problematic" id="id158">``</span></a>form of work
&gt; <a href="#id159"><span class="problematic" id="id160">``</span></a>!!!AGN:<a href="#id161"><span class="problematic" id="id162">``</span></a>genre of work
&gt; <a href="#id163"><span class="problematic" id="id164">``</span></a>!!!AST:<a href="#id165"><span class="problematic" id="id166">``</span></a>style of period</p>
<p>Refer to pages 26-37 in the <em>Humdrum Reference Manual</em> for further
information about the types and format for different reference records.</p>
</div>
<div class="section" id="syntax-checking-i">
<h3>25. Syntax Checking (I).<a class="headerlink" href="#syntax-checking-i" title="Permalink to this headline">¶</a></h3>
<p>Use the Humdrum <strong>humdrum</strong> command to identify whether the final encoded
output conforms to the Humdrum syntax:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">humdrum</span> <span class="pre">full.krn</span></tt></p>
</div>
<div class="section" id="syntax-checking-ii">
<h3>26. Syntax Checking (II).<a class="headerlink" href="#syntax-checking-ii" title="Permalink to this headline">¶</a></h3>
<p>Use the Humdrum <strong>proof</strong> command to identify any syntactical errors in the
encoded Kern data:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">proof</span> <span class="pre">full.krn</span></tt></p>
</div>
<div class="section" id="proof-listening">
<h3>27. Proof Listening.<a class="headerlink" href="#proof-listening" title="Permalink to this headline">¶</a></h3>
<p>One of the best ways to ensure that musical data makes sense is to listen to
it. No data should be released to the public without some proof listening.
The Humdrum <strong>midi</strong> and <strong>perform</strong> commands currently only work under the
DOS operating system. Ensure that you are using DOS when executing the
following command:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">midi</span> <span class="pre">-c</span> <span class="pre">full.krn</span> <span class="pre">|</span> <span class="pre">perform</span></tt></p>
<p>The <strong>perform</strong> command allows you to <em>pause</em> (press the space bar), to
<em>move</em> to a particular measure (type a measure number followed by enter), to
increase (type &lt;) or decrease (type &gt;) the <em>tempo,</em> and to <em>return</em> to the
beginning of the score (type enter). There are many other functions within
the <strong>perform</strong> command; refer to the <em>Humdrum Reference Manual</em> &#8211; section 4
for further details.</p>
</div>
<div class="section" id="adding-vts-checksum-record">
<h3>28. Adding VTS Checksum Record.<a class="headerlink" href="#adding-vts-checksum-record" title="Permalink to this headline">¶</a></h3>
<p>Once you are certain that the score files are completely finished, you must
calculate a &#8220;checksum&#8221; value to be encoded in a Humdrum &#8220;VTS&#8221; reference
record. This record will allow users of the data to check the integrity of
the data using the Humdrum <strong>veritas</strong> command.</p>
<p>In order to calculate the checksum value for a given file, type the command:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">cksum</span> <span class="pre">full.krn</span> <span class="pre">&gt;</span> <span class="pre">temp</span></tt></p>
<p>Open the original file:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">vi</span> <span class="pre">full.krn</span></tt></p>
<p>Go to the bottom of the file by typing <a href="#id167"><span class="problematic" id="id168">`</span></a>G&#8217; and then read in the checksum
value:</p>
<p>&gt; <tt class="docutils literal"><span class="pre">:.r</span> <span class="pre">temp</span></tt></p>
<p>Then insert the <a href="#id169"><span class="problematic" id="id170">``</span></a><cite>!!!VTS: `</cite>&#8216; reference record designator.</p>
</div>
<div class="section" id="assemble-the-distribution-files">
<h3>29. Assemble the Distribution Files.<a class="headerlink" href="#assemble-the-distribution-files" title="Permalink to this headline">¶</a></h3>
<p>Rename the score files and collect them into a coherent repertoire. Be sure
to use the <tt class="docutils literal"><span class="pre">.krn</span></tt> file extension. Place all resulting Humdrum files in a
single directory.</p>
</div>
<div class="section" id="create-a-readme-file">
<h3>30. Create a README File.<a class="headerlink" href="#create-a-readme-file" title="Permalink to this headline">¶</a></h3>
<p>Create a <tt class="docutils literal"><span class="pre">README</span></tt> file similar to others in Humdrum data distributions. The
file should contain a title, a brief paragraph describing the historical
background for the works, a paragraph describing the personnel involved in
the production, a copyright and license notice, and a table of contents.
Avoid tabs in this file, and ensure that no line is greater than
80-characters in length.</p>
</div>
<div class="section" id="create-a-license-file">
<h3>31. Create a LICENSE File.<a class="headerlink" href="#create-a-license-file" title="Permalink to this headline">¶</a></h3>
<p>Add a <tt class="docutils literal"><span class="pre">LICENSE</span></tt> file reiterating the licensing agreement for the
distributed data. Simply copy a file used in previous distributions.</p>
</div>
<div class="section" id="prepare-a-master-disk">
<h3>32. Prepare a Master Disk.<a class="headerlink" href="#prepare-a-master-disk" title="Permalink to this headline">¶</a></h3>
<p>Copy all of the files onto a master floppy disk from which distribution
copies will be made. Render the master disk &#8220;read-only.&#8221; Attach a clearly
marked label. Make a backup copy of the appropriate directory on the hard
disk.</p>
<p>David Huron
1996 October
Revised 1997 January</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="problems.html" class="btn btn-neutral float-right" title="Sample Problems Using the Humdrum Toolkit"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="manual07b.html" class="btn btn-neutral" title="Development Reference"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Humdrum Community.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>