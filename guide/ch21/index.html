


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter 21: Searching for Patterns &mdash; humdrum-tools 1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="humdrum-tools 1 documentation" href="../../"/>
        <link rel="up" title="The Humdrum User Guide" href="../"/>
        <link rel="next" title="Chapter 22: Classifying" href="../ch22/"/>
        <link rel="prev" title="Chapter 20: Strophes, Verses, and Repeats" href="../ch20/"/>
   <link rel="stylesheet" type"text/css" href="../../_static/humdrum.css">


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../" class="fa fa-home"> humdrum-tools</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Humdrum Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../install/github/">Installing Humdrum Tools from GitHub</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../">The Humdrum User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ch01/">1. Humdrum: A Brief Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch02/">2. Representing Music Using **kern(I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch03/">3. Some Initial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch04/">4. Basic Pitch Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch05/">5. The Humdrum Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch06/">6. Representing Music Using **kern(II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch07/">7. MIDI Output Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch08/">8. The Shell (I)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch09/">9. Searching with Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch10/">10. Musical Uses of Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/">11. Melodic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch12/">12. Selecting Musical Parts and Passages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch13/">13. Assembling Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch14/">14. Stream Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch15/">15. Harmonic Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch16/">16. The Shell (II)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch17/">17. Creating Inventories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch18/">18. Fingers, Footsteps and Frets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch19/">19. Musical Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch20/">20. Strophes, Verses, and Repeats</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Chapter 21: Searching for Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch22/">22. Classifying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch23/">23. Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch24/">24. The Shell (III)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch25/">25. Similarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch26/">26. Moving Signifiers Between Spines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch27/">27. Text and Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch28/">28. Dynamic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch29/">29. Differences and Commonalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch30/">30.MIDI Input Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch31/">31. Repertories and Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch32/">32. The Shell (IV)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch33/">33. Word Sounds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch34/">34. Serial Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch35/">35. Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch36/">33. Sound and Spectra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch37/">37. Electronic Music Editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch38/">38. Systematic Musicology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch39/">39. Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch40/">40. Conclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/">The Humdrum Toolkit: A Bibliography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sample.problems/">Sample Problems Using the Humdrum Toolkit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../humextra/">Humdrum Extras</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/intro/">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/rhythm/">2. Rhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/melody/">Melody and Pitch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/harmony/">Harmony</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/data/">Data Entry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/searching/">Music Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/midi/">MIDI Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/notation/">Graphical Musical Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/other/">Other Useful Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../humextra/programming/">Programming Tutorial</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/">The Humdrum Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/vimHighlighting/">Syntax Coloring in Vim</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../man/">Humdrum Command Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../man/assemble/">Command: assemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/barks/">Command: barks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/cbr/">Command: cbr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/census/">Command: census</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/cents/">Command: cents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/cleave/">Command: cleave</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/cocho/">Command: cocho</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/context/">Command: context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/correl/">Command: correl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/deg/">Command: deg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/degree/">Command: degree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/diss/">Command: diss</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/ditto/">Command: ditto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/dur/">Command: dur</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/ekern/">Command: ekern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/encode/">Command: encode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/extract/">Command: extract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/fade/">Command: fade</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/fields/">Command: fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/freq/">Command: freq</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/hint/">Command: hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/humdrum/">Command: humdrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/humsed/">Command: humsed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/humver/">Command: humver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/infot/">Command: infot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/iv/">Command: iv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/kern/">Command: kern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/key/">Command: key</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/melac/">Command: melac</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/melvel/">Command: melvel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/metpos/">Command: metpos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/midi/">Command: midi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/midreset/">Command: midreset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/mint/">Command: mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/ms/">Command: ms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/nf/">Command: nf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/num/">Command: num</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/patt/">Command: patt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/pattern/">Command: pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/pc/">Command: pc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/pcset/">Command: pcset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/perform/">Command: perform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/pf/">Command: pf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/pitch/">Command: pitch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/proof/">Command: proof</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/recode/">Command: recode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/record/">Command: record</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/regexp/">Command: regexp</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/reihe/">Command: reihe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/rend/">Command: rend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/rid/">Command: rid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/scramble/">Command: scramble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/semits/">Command: semits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/simil/">Command: simil</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/smf/">Command: smf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/solfa/">Command: solfa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/solfg/">Command: solfg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/specc/">Command: specc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/spect/">Command: spect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/strophe/">Command: strophe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/synco/">Command: synco</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/tacet/">Command: tacet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/text/">Command: text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/themefinder/">Command: thmea</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/thru/">Command: thru</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/timebase/">Command: timebase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/tonh/">Command: tonh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/trans/">Command: trans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/urrhythm/">Command: urrhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/veritas/">Command: veritas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/vox/">Command: vox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/xdelta/">Command: xdelta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/yank/">Command: yank</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/ydelta/">Command: ydelta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/#commands">Commands</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rep/">Humdrum Data Representations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../rep/barlines/">Representation: barlines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/IPA/">Representation: **IPA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/MIDI/">Representation: **MIDI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/Tonh/">Representation: **Tonh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/URrhythm/">Representation: **URrhythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/Zeit/">Representation: **Zeit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/bhatk/">Representation: **bhatk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/cents/">Representation: **cents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/correl/">Representation: **correl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/dB/">Representation: **dB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/date/">Representation: **date</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/deg/">Representation: **deg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/degree/">Representation: **degree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/diss/">Representation: **diss</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/dur/">Representation: **dur</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/embel/">Representation: **embel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/freq/">Representation: **freq</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/fret/">Representation: **fret</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/harm/">Representation: **harm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/hildegard/">Representation: **hildegard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/hint/">Representation: **hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/iv/">Representation: **iv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/kern/">Representation: **kern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/melac/">Representation: **melac</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/metpos/">Representation: **metpos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/mint/">Representation: **mint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/ordo/">Representation: **ordo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/pc/">Representation: **pc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/pcset/">Representation: **pcset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/pitch/">Representation: **pitch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/recip/">Representation: **recip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/semits/">Representation: **semits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/silbe/">Representation: **silbe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/simil/">Representation: **simil</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/solfa/">Representation: **solfa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/solfg/">Representation: **solfg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/specC/">Representation: **specC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/spect/">Representation: **spect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/synco/">Representation: **synco</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/takt/">Representation: **takt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/text/">Representation: **text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/time/">Representation: **time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/timebase/">Representation: **timebase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rep/vox/">Representation: **vox#</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../">humdrum-tools</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../">Docs</a> &raquo;</li>
      
          <li><a href="../">The Humdrum User Guide</a> &raquo;</li>
      
    <li>Chapter 21: Searching for Patterns</li>
      <li class="wy-breadcrumbs-aside">
        
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="chapter-21-searching-for-patterns">
<h1>Chapter 21: Searching for Patterns<a class="headerlink" href="#chapter-21-searching-for-patterns" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference external" href="http://en.wikipedia.org/wiki/Grep">grep</a> and <a class="reference external" href="http://en.wikipedia.org/wiki/Egrep#Variations">egrep</a> commands are useful for identifying patterns that
occur on single lines. As we saw in <a class="reference external" href="../ch19">Chapter 19</a>, the <a class="reference external" href="../../man/context">context</a> command
can be used to amalgamate groups of successive data tokens on a single line
&#8211; and so facilitate searching for sequential patterns using <a class="reference external" href="http://en.wikipedia.org/wiki/Grep">grep</a> or
<a class="reference external" href="http://en.wikipedia.org/wiki/Egrep#Variations">egrep</a>. For many tasks, the combination of <a class="reference external" href="../../man/context">context</a> and <a class="reference external" href="http://en.wikipedia.org/wiki/Grep">grep</a>
provides the most convenient way to search for user-specified patterns.
However, not all patterns can be conveniently identified using this approach.
In this chapter we will introduce two additional tools that are intended to
search directly for sequential patterns without having to use <a class="reference external" href="../../man/context">context</a> to
create pseudo-simultaneous collections.</p>
<div class="section" id="the-patt-command">
<h2>The <em>patt</em> Command<a class="headerlink" href="#the-patt-command" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="../../man/patt">patt</a> command may be regarded as a two-dimensional version of
<a class="reference external" href="http://en.wikipedia.org/wiki/Grep">grep</a>. Like <a class="reference external" href="http://en.wikipedia.org/wiki/Grep">grep</a>, <a class="reference external" href="../../man/patt">patt</a> searches for lines that match user-
specified regular expressions. However, unlike <a class="reference external" href="http://en.wikipedia.org/wiki/Grep">grep</a>, <a class="reference external" href="../../man/patt">patt</a> can search
for a sequence of records that match a sequence of user-specified regular
expressions. Specifically, <a class="reference external" href="../../man/patt">patt</a> will look for an input line that matches
the first (of potential many) user-specified regular expression. Then <a class="reference external" href="../../man/patt">patt</a> will determine whether the following input line matches the second
user-specified regular expression ... and so on, until the entire sequence of
the user-specified regular expressions are exhausted. A pattern match is
deemed to occur only if all of the successive regular expressions match a
contiguous sequence of input lines.</p>
<p>The operation of <a class="reference external" href="../../man/patt">patt</a> is easier to describe through an example. Consider
the following input using the German <em>Tonhohe</em> pitch designations described
in <a class="reference external" href="../ch04">Chapter 4</a>. Recall that the <a class="reference external" href="../../rep/Tonh">**Tonh</a> system of pitch names allows
Bach to spell his name (B=B-flat; H=B-natural). Less well-known is the fact
that Dmitri Shostakovich also used the German pitch system to create motives
based on his name: D-S-C-H (S=Es=E-flat). (The German transliteration of the
cyrillic is Schostakowitsch.)</p>
<div class="highlight-humdrum"><pre>**Tonh
D4
Es4
C4
H3
*-</pre>
</div>
<p>Suppose we were looking for possible instances of D-S-C-H. The <a class="reference external" href="../../man/patt">patt</a> command requires a template file that contains one or more successive regular
expressions. A suitable template file (named <tt class="docutils literal"><span class="pre">dmitri</span></tt>) would be as follows:</p>
<p>`` D
`` Es
`` C
`` H``</p>
<p>We would invoke the search as follows:</p>
<p>`` patt -f dmitri`` <em>inputfile</em></p>
<p>The <tt class="docutils literal"><span class="pre">-f</span></tt> option is mandatory: it conveys to <a class="reference external" href="../../man/patt">patt</a> the name of the
template file used in the search.</p>
<p>In the default operation, <a class="reference external" href="../../man/patt">patt</a> simply outputs a global comment
identifying the location of any matching segments. One global comment is
output for each matching pattern. In the above case, the output would be as
follows:</p>
<div class="highlight-humdrum"><pre>!! Pattern found at line 2 of file Tonh</pre>
</div>
<p>The <a class="reference external" href="../../man/patt">patt</a> command will also identify any overlapping patterns. For
example, suppose we had an input containing an ostinato figure in minor
thirds:</p>
<p><strong>Example 21.1.</strong> <a href="#id9"><span class="problematic" id="id10">`</span></a>DSCH&#8217; Ostinato.</p>
<p>&gt; .. image:: guide.figures/ch21.1.gif</p>
<p>&gt;
&gt;`` <a href="#id36"><span class="problematic" id="id37">|Tonh|_</span></a> Tonh
&gt;``*k[b-e-]*K[b-e-]
&gt;``*M9/8*M9/8
&gt;``=1-=1-
&gt;``C4Es4
&gt;``C4Es4
&gt;``H3D4
&gt;``C4Es4
&gt;``C4Es4
&gt;``H3D4
&gt;``C4Es4
&gt;``C4Es4
&gt;``H3D4
&gt;``==``</p>
<p>If we applied the above <a class="reference external" href="../../man/patt">patt</a> command to this <tt class="docutils literal"><span class="pre">ostinato</span></tt> file, we would
get the following output:</p>
<div class="highlight-humdrum"><pre>!! Pattern found at line 8 of file ostinato``
!! Pattern found at line 11 of file ostinato</pre>
</div>
<p>We can instruct <a class="reference external" href="../../man/patt">patt</a> to output specific instances of the pattern using
the <tt class="docutils literal"><span class="pre">-e</span></tt> (echo) option. Consider the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre>patt -f dmitri -e ostinato
</pre></div>
</div>
<p>The resulting output would be:</p>
<div class="highlight-humdrum"><pre>!! Pattern found at line 4 of file ostinato
**Tonh  **Tonh
H3      D4
C4      Es4
C4      Es4
H3      D4
*-      *-
!! Pattern found at line 7 of file ostinato
**Tonh  **Tonh
H3      D4
C4      Es4
C4      Es4
H3      D4
*-      *-</pre>
</div>
<p>Notice that each instance of the found pattern is output as a stand-alone
humdrum &#8220;mini-encoding,&#8221; complete with initial exclusive interpretations and
terminating spine-path terminators.</p>
<p><strong>Example 21.2.</strong> J.S. Bach, <em>Well-Tempered Clavier</em>, Vol. 1, Fugue 2.</p>
<p>&gt; .. image:: guide.figures/ch21.2.gif</p>
<p>Most Baroque composers were fond of ending works written in minor keys on the
tonic major chord &#8211; the so-called <em>tierce de picardie</em> or Picardy Third.
Example 21.2 shows a typical example from the final measures of Bach&#8217;s second
fugue from the <em>Well-Tempered Clavier</em>, vol. 1. Suppose that we wanted to
identify all works in some repertory that end with a <em>tierce de picardie</em>. We
need to search for a raised third scale degree in close proximity to the end
of a work for those works in a minor key. First we might identify those works
in minor keys. The following <a class="reference external" href="http://en.wikipedia.org/wiki/Grep">grep</a> command will search all files in the
current directory for a tandem interpretation indicating a minor key. Recall
that minor keys are identified by an asterisk followed by a lower-case pitch-
letter name, followed by an optional accidental, followed by the colon
character. The <tt class="docutils literal"><span class="pre">-l</span></tt> option will list all files that containing a matching
record:</p>
<div class="highlight-bash"><div class="highlight"><pre>grep -l <span class="s1">&#39;^\*[a-g][-#]*:&#39;</span> *
</pre></div>
</div>
<p>Recall that the <a class="reference external" href="../../man/deg">deg</a> command is mode sensitive, whereas the
<a class="reference external" href="../../man/solfa">solfa</a> command is mode insensitive. That is, in the key of C major, <a class="reference external" href="../../man/deg">deg</a> will represent the pitch E as <tt class="docutils literal"><span class="pre">3</span></tt> and in C minor <a class="reference external" href="../../man/deg">deg</a> will
represent the pitch E (natural) as <tt class="docutils literal"><span class="pre">3+</span></tt>. By contrast, the <a class="reference external" href="../../man/solfa">solfa</a> command
will represent E as <tt class="docutils literal"><span class="pre">`mi</span></tt>&#8216; whether the mode is major or minor.</p>
<p>In order to locate picardy thirds, we can look for raised mediants in the
`` <a href="#id12"><span class="problematic" id="id13">**</span></a>deg`` representation. Specifically, we can look for a raised mediant
pitch immediately prior to a double barline. Our template file (dubbed
&#8220;<tt class="docutils literal"><span class="pre">picardy</span></tt>&#8221;) might look as follows:</p>
<p>`` 3[+]
==``</p>
<p>Notice that the plus sign has been placed in square brackets. The <a class="reference external" href="../../man/patt">patt</a> command accepts only <em>extended</em> regular expressions. The plus sign is a
metacharacter that normally indicates &#8220;one or more instances.&#8221; So placing it
in square brackets causes the special meaning to be escaped.</p>
<p>In order to search for such picardy thirds, we should translate each input
file to the <a class="reference external" href="../../rep/deg">**deg</a> representation, and then search for raised mediants
immediately prior to a double bar:</p>
<div class="highlight-bash"><div class="highlight"><pre>deg *inputfile.krn* | patt -f picardy
</pre></div>
</div>
<p>A problem with this search strategy is that it assumes that the raised third
will occur in the final sonority prior to the double barline. One possible
confound might be the presence of one or more rests following the final
chord. This situation is evident in Fugue No. 4 from the second volume of
Bach&#8217;s <em>Well-Tempered Clavier</em>:</p>
<p><strong>Example 21.3.</strong> J.S. Bach, <em>Well-Tempered Clavier</em>, Vol. 2, Fugue 4.</p>
<p>&gt; .. image:: guide.figures/ch21.3.gif</p>
<p>&gt;
&gt;``!!!COM: Bach, Johann Sebastian
&gt;``!!!XEN: The Well-Tempered Clavier, Volume 2, Fugue 4.
&gt;`` <a href="#id38"><span class="problematic" id="id39">|kern|_</span></a> kern**kern
&gt;``*clefF4*clefG2*clefG2
&gt;``*M12/16*M12/16*M12/16
&gt;``*k[f#c#g#d#]*k[f#c#g#d#]*k[f#c#g#d#]
&gt;``*c#:<em>c#:*c#:
&gt;``=70=70=70
&gt;``16E8.f#]8b#
&gt;``16D#..
&gt;``16E.16g#
&gt;``16FF##8e4.cc#
&gt;``16GG#..
&gt;``16AAn16d#.
&gt;``4.GG#16e.
&gt;``.16a.
&gt;``.16g#.
&gt;``.16f#8.b#
&gt;``.16e.
&gt;``.16d#.
&gt;``=71=71=71
&gt;``8.CC#8.e#8.cc#
&gt;``8.r8.r8.r
&gt;``4.r4.r4.r
&gt;``======
&gt;``</em>-<em>-</em>-``</p>
<p>The <a class="reference external" href="../../man/patt">patt</a> command provides a <tt class="docutils literal"><span class="pre">-s</span></tt> option that allows the user to skip or
ignore certain records in the input. Any regular expression can be given as a
parameter for the <tt class="docutils literal"><span class="pre">-s</span></tt> option. In the following pipeline, we have
instruction <a class="reference external" href="../../man/patt">patt</a> to skip over any records matching the lower-case letter
`` <cite>r`</cite>&#8216; (the <a class="reference external" href="../../rep/kern">**kern</a> rest signifier):</p>
<div class="highlight-bash"><div class="highlight"><pre>deg <span class="sb">``</span>*inputfile.krn*<span class="sb">``</span> | patt -s r -f picardy
</pre></div>
</div>
<p>Even ignoring rests may not be sufficient to identify the raised third near
the double barline. For example, if any other note from the tonic chord
follows after the raised third, then the third will appear several records
prior to the double barline. We can solve this problem by using the
<a class="reference external" href="../../man/ditto">ditto</a> command discussed in <a class="reference external" href="../ch15">Chapter 15</a>; <a class="reference external" href="../../man/ditto">ditto</a> can be used to
propagate the raised third through the sustained final chord. Our revised
pipeline is:</p>
<div class="highlight-bash"><div class="highlight"><pre>deg bach.krn | ditto -s <span class="o">=</span> | patt -s r -f picardy
</pre></div>
</div>
<p>A similar approach can be used to identify consecutive fifths or octaves
between two voices. A template file (dubbed <tt class="docutils literal"><span class="pre">5ths</span></tt>) might consist of the
following pattern:</p>
<p>`` P5
P5``</p>
<p>In order to identify consecutive fifths, we might extract two parts of
interest, and then translate to the <a class="reference external" href="../../rep/hint">**hint</a> harmonic-interval
representation. The <tt class="docutils literal"><span class="pre">-c</span></tt> option for <a class="reference external" href="../../man/hint">hint</a> collapses compound
intervals to their non-compound equivalents so consecutive twelfths,
nineteenths, etc. will also be identified. In the following command pipeline,
notice the use of the <tt class="docutils literal"><span class="pre">-s</span></tt> option for <a class="reference external" href="../../man/patt">patt</a> in order to skip
barlines. This ensures that crossing a barline does not result in a failure
to identify a consecutive fifth.</p>
<div class="highlight-bash"><div class="highlight"><pre>extract -i <span class="s1">&#39;*Ibass,*Itenor&#39;</span> Fux | hint -c | patt -s <span class="o">=</span> -f 5ths
</pre></div>
</div>
<p>Sometimes patterns will tend to be obscured by the presence of other
information. For example, suppose we want to identify possible Landini
cadences such as the cadence shown in Example 21.4. Landini cadences are
common in much 14th century polyphony including works by Machaut, Caserta,
Dufay, Ciconia, as well as Landini. One characteristic of the Landini cadence
is the distinctive three-note <em>ti -&gt; la -&gt; do</em> in the upper-most part. The
submediant pitch is interposed between the leading-tone and the tonic. A
second characteristic of the Landini cadence is the harmonic relationship
between the highest and lowest voices. Three intervals are formed: <em>sixth -&gt;
fifth -&gt; octave</em>. Either one or both of these characteristics might be used
to help identify this distinctive cadential formula.</p>
<p><strong>Example 21.4.</strong> Francesco Landini, Excerpt from <em>Non avra ma&#8217; pieta</em>.</p>
<p>&gt; .. image:: guide.figures/ch21.4.gif</p>
<p>Below is a <a class="reference external" href="../../rep/kern">**kern</a> encoding of the final two measures along with
corresponding <a class="reference external" href="../../rep/hint">**hint</a> and <a class="reference external" href="../../rep/deg">**deg</a> spines. The <a href="#id14"><span class="problematic" id="id15">**</span></a>hint spine was
generated using <a class="reference external" href="../../man/hint">hint</a><tt class="docutils literal"><span class="pre">-l</span></tt> in order to generate intervals with
respect to the lowest pitch.</p>
<div class="highlight-humdrum"><pre>!!!COM: Landini, Francesco
**kern  **kern  **kern  **hint  **deg   **deg   **deg
*clefF4``*clefG2``*clefG2``*``*``*``*
*M3/4``*M3/4``*M3/4``*M3/4``*M3/4``*M3/4``*M3/4
=``=``=``=``=``=``=
4A``4e``8e``P5 P5``v2``v6``^6
.``.``8f``-..``^7-
4B-``4d``8g``M3 M6``^3-``v5^1
.``.``4f#``-..``v7
4A``4c#``.``M3``v2``v4+.
.``.``8e``-..``v6
=``=``=``=``=``=``=
2.G``2.d``2.g``P5 P8``v1``^5``^1
==``==``==``========
*-``*-``*-``*-*-*-*-</pre>
</div>
<p>Notice that <a class="reference external" href="../../man/hint">hint</a> has failed to generate the passing interval forming the
perfect fifth between the E and the A. This can be remedied by using <a class="reference external" href="../../man/ditto">ditto</a> to duplicate all of the pitches. This will cause <a class="reference external" href="../../man/hint">hint</a> to
generate all of the passing harmonic intervals. The revised <a href="#id16"><span class="problematic" id="id17">**</span></a>hint spine is
given below.</p>
<div class="highlight-humdrum"><pre>!!!COM: Landini, Francesco |kern|_ kern |kern|_ hint |deg|_ deg**deg
*clefF4*clefG2*clefG2****
*M3/4*M3/4*M3/4*M3/4*M3/4*M3/4*M3/4
=======
4A4e8eP5 P5v2v6^6
..8fP5 m6..^7-
4B-4d8gM3 M6^3-v5^1
..4f#M3 A5..v7
4A4c#.M3 M6v2v4+.
..8eM3 P5..v6
=======
2.G2.d2.gP5 P8v1^5^1
==============
*-*-*-*-*-*-*-</pre>
</div>
<p>One way to identify Landini cadences is to use the following harmonic-
interval template file (dubbed <tt class="docutils literal"><span class="pre">LandCadence</span></tt>):</p>
<p>`` 6
`` 5
`` 8``</p>
<p>Using this template, we can identify Landini cadences as follows. (Notice the
use of <tt class="docutils literal"><span class="pre">-s</span> <span class="pre">^=</span></tt> to skip barlines.)</p>
<div class="highlight-bash"><div class="highlight"><pre>ditto -s ^<span class="o">=</span> input | hint -l | patt -s ^<span class="o">=</span> -f LandCadence
</pre></div>
</div>
<p>It is possible that the 6-5-8 figured bass might arise in non-cadential
situations, so a more circumspect template might also include some scale-
degree movements as well. The following template file (dubbed <tt class="docutils literal"><span class="pre">Landini-</span>
<span class="pre">Cadence</span></tt>) combines both the harmonic-interval and scale-degree data:</p>
<p>`` [Mm]6
P5.*v6
P8.*^1``</p>
<p>Using this more sophisticated pattern template, a suitable sequence of
commands would be the following:</p>
<p>`` ditto -s ^= inputfile | hint -l &gt; temp1
deg inputfile &gt; temp2
assemble temp1 temp2 | patt -s ^= -f Landini-Cadence``</p>
<p>In general, <a class="reference external" href="../../man/patt">patt</a> templates can be used to specify both concurrent
conditions as well as dynamic or temporal conditions. This allows users to
define patterns involving a multitude of conditions involving many different
types of data.</p>
</div>
<div class="section" id="using-patt-s-tag-option">
<h2>Using <em>patt</em>&#8216;s Tag Option<a class="headerlink" href="#using-patt-s-tag-option" title="Permalink to this headline">¶</a></h2>
<p>So far, we have seen that <a class="reference external" href="../../man/patt">patt</a> provides two kinds of output. In the
default operation, <a class="reference external" href="../../man/patt">patt</a> outputs a simple global comment each time it
finds a matching segment in the input. With the <tt class="docutils literal"><span class="pre">-e</span></tt> option, <a class="reference external" href="../../man/patt">patt</a> will
also echo the specific passage(s) found. In addition, <a class="reference external" href="../../man/patt">patt</a> provides a
third type of output using the <tt class="docutils literal"><span class="pre">-t</span></tt> option.</p>
<p>When the <tt class="docutils literal"><span class="pre">-t</span></tt> option is invoked, <a class="reference external" href="../../man/patt">patt</a> will output the original input,
plus an addition <tt class="docutils literal"><span class="pre">patt</span></tt> spine. The <tt class="docutils literal"><span class="pre">patt</span></tt> spine typically consists of
mostly null tokens. However, each time the input matches the sought pattern,
a user-defined &#8220;tag&#8221; will appear in the <tt class="docutils literal"><span class="pre">patt</span></tt> spine. Consider the
following example.</p>
<p>Suppose we are interested in identifying deceptive cadences in Bach&#8217;s chorale
harmonizations. Imagine that we already have a <a class="reference external" href="../../rep/harm">**harm</a> spine containing
a Roman numeral harmonic analysis. There are different ways of defining a
deceptive cadence, but a frequent definition is that it involves a dominant
chord followed by a submediant chord in a cadential context. In the case of
Bach&#8217;s chorale harmonizations, cadences are readily identified by the pause
symbol. Our search template might look as follows:</p>
<p>`` ^V([^I]|$)
(vi)|(VI);``</p>
<p>This template means: &#8220;look for an upper-case letter <tt class="docutils literal"><span class="pre">V</span></tt> appearing at the
beginning of a line that is followed by either the end of the line (<a href="#id18"><span class="problematic" id="id19">``</span></a><tt class="docutils literal"><span class="pre">)</span> <span class="pre">or</span>
<span class="pre">by</span> <span class="pre">a</span> <span class="pre">character</span> <span class="pre">other</span> <span class="pre">than</span> <span class="pre">the</span> <span class="pre">upper-case</span> <span class="pre">letter</span> <span class="pre">``I</span></tt>. This record will be
followed by a record containing either <tt class="docutils literal"><span class="pre">vi</span></tt> or <tt class="docutils literal"><span class="pre">VI</span></tt> followed by a
semicolon.&#8221;</p>
<p>When invoking the <a class="reference external" href="../../man/patt">patt</a> command, we can specify our preferred output tag
along with the <tt class="docutils literal"><span class="pre">-t</span></tt> option as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre>extract -i <span class="s1">&#39;**harm&#39;</span> bwv269.krn | patt -f template -t deceptive
</pre></div>
</div>
<div class="highlight-humdrum"><pre>       **harm  **patt
       I       .
       I       .
       ii7     .
       V       deceptive
       vi;     .
       V       .
       I       .
       IV      .
       IV      .
       I       .
       V;      .
       etc.

In |Chapter 26|_ we will learn how to collapse several spines into a single
spine. This will allow us to assemble the results from several "passes"
using |patt|_ -- one pass for each type of cadence. For example, we could
collapse several tagged outputs to produce a single spine that identifies
all of the various types of cadences:</pre>
</div>
<div class="highlight-humdrum"><pre>       **harm  **cadences
       I       .
       I       .
       ii7     .
       V       deceptive
       vi;     .
       V       .
       I       .
       IV      .
       IV      .
       I       half
       V;      .
       etc.

There are no restrictions as to the types of tags that can be generated by |patt|_ . A user might tag the beginning of motivic or thematic statements,
various harmonic progressions, variation techniques, fingering patterns,
quotations or allusions, stylistic cliches, etc. In |Chapter 35|_ we will
use the ``-t`` option to label different set forms for statements of a
twelve-tone row, such as primes, inversions, retrogrades, and retrograde
inversions. We will use suitable tags to identify the specific
transpositions: P0, I7, R11, RI8, etc.</pre>
</div>
</div>
<div class="section" id="matching-multiple-records-using-the-patt-command">
<h2>Matching Multiple Records Using the <em>patt</em> Command<a class="headerlink" href="#matching-multiple-records-using-the-patt-command" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Twelve-tone music raises several special issues for sequential pattern
matching. For example, it is common in serial music to collapse segments of
a tone-row in order to create vertical chords. Consider the following
excerpt from Ernst Krenek&#8217;s suite for solo &#8216;cello. The tone row consists of
the ordered pitches: D, G-flat, F, D-flat, C, B, E-flat, A, B-flat, A-flat,
E, G.</div></blockquote>
<p><strong>Example 21.5.</strong> Ernst Krenek, Opus 84 <em>Suite for Violoncello</em>; mov. 1,
measures 28-30.</p>
<p>&gt; .. image:: guide.figures/ch21.5.gif</p>
<blockquote>
<div>Using a pitch-class representation we would search for the sequence:</div></blockquote>
<p>`` 2
6
5
1
0
11
3
9
10
8
4
7``</p>
<blockquote>
<div>Due to the diads, however, the corresponding pitch-class representation for
the above Krenek passage would be:</div></blockquote>
<div class="highlight-humdrum"><pre>       **pc
       2
       6
       5 1
       0
       =
       3 11
       9
       10
       10 8
       =
       7 4
       etc.
       *-

The ``-m`` option for |patt|_ invokes a "multi-record matching" mode.
In this mode, |patt|_ attempts to match as many successive regular
expressions in the template file as possible for a given input record,
before continuing with the next input and template records. In this way,
several records in the template file may possibly match a single input
record. In the above case, the tone-row template will be matched and the
`P0' tag issued if the following command is issued:</pre>
</div>
<div class="highlight-bash"><div class="highlight"><pre>patt -f tonerow -t P0 -m Krenek
</pre></div>
</div>
</div>
<div class="section" id="the-pattern-command">
<h2>The <em>pattern</em> Command<a class="headerlink" href="#the-pattern-command" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Not all patterns can be identified using <a class="reference external" href="../../man/patt">patt</a> . The Humdrum</div></blockquote>
<dl class="docutils">
<dt><a class="reference external" href="../../man/pattern">pattern</a> command permits an additional regular expression feature that</dt>
<dd>is especially useful in musical applications. Specifically, <a class="reference external" href="../../man/pattern">pattern</a> permits the defining of patterns spanning more than one line or record.
Record-repetition operators are specified by following the regular
expression with a tab &#8211; followed by either <tt class="docutils literal"><span class="pre">+</span></tt>, <tt class="docutils literal"><span class="pre">*</span></tt>, or <tt class="docutils literal"><span class="pre">?</span></tt>. For
example, consider the following Humdrum-extension regular expression:</dd>
</dl>
<p>`` X+
Y*
Z?``</p>
<blockquote>
<div><p>When the metacharacters <tt class="docutils literal"><span class="pre">+</span></tt>, <tt class="docutils literal"><span class="pre">*</span></tt>, or <tt class="docutils literal"><span class="pre">?</span></tt> appear at the end of a
record, preceded by a tab character, they pertain to the number of records,
rather than the number of repetitions of the expression within a record. The
first record of the regular expression (<tt class="docutils literal"><span class="pre">X``**``+</span></tt>) will match one or more
successive lines each containing the letter <tt class="docutils literal"><span class="pre">`X</span></tt>&#8216;. The second record of
the regular expression (<tt class="docutils literal"><span class="pre">Y``**``*</span></tt>) will match zero or more subsequent
lines containing the letter <tt class="docutils literal"><span class="pre">`Y</span></tt>&#8216;. The third record of the regular
expression (<tt class="docutils literal"><span class="pre">Z``**</span></tt>?``) will match zero or one line containing the letter
<tt class="docutils literal"><span class="pre">`Z</span></tt>&#8216;. Hence, the above multi-record regular expression would match an
input such as the following: three successive lines containing the letter
<tt class="docutils literal"><span class="pre">`X</span></tt>&#8216;, followed by eight successive lines containing the letter <tt class="docutils literal"><span class="pre">`Y</span></tt>&#8216;,
followed by a single line containing the letter <tt class="docutils literal"><span class="pre">`Z</span></tt>&#8216;. Similarly, the
above regular expression would match an input containing one line containing
the letter <tt class="docutils literal"><span class="pre">`X</span></tt>&#8216;.</p>
<p>Record-repetition operators can be used in conjunction with all of the
other regular expression features. For example, the following regular
expression matches one or more successive <a class="reference external" href="../../rep/kern">**kern</a> data records
containing the pitch <tt class="docutils literal"><span class="pre">`G</span></tt>&#8216; (naturals only) followed optionally by a single
<tt class="docutils literal"><span class="pre">`G#</span></tt>&#8216; followed by one or more records containing one or more pitches from
an A major triad &#8211; the last of which must end a phrase:</p>
<p><a href="#id20"><span class="problematic" id="id21">``</span></a></p>
</div></blockquote>
<p>&gt; [Gg]+[^#-] +
[Gg]+#[^#] ?
([Aa]+|([Cc]+#)|[Ee]+)[^#-] *
(}.*([Aa]+|([Cc]+#)|[Ee]+)[^#-]))|(([Aa]+|([Cc]+#)|[Ee]+)[^#-].*})</p>
<blockquote>
<div><a href="#id22"><span class="problematic" id="id23">``</span></a></div></blockquote>
</div>
<div class="section" id="patterns-of-patterns">
<h2>Patterns of Patterns<a class="headerlink" href="#patterns-of-patterns" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Music often exhibits hierarchical structures where particular types of
patterns may be embedded in other patterns, or where low-level patterns join
together to form higher-level patterns. As we have seen, the <tt class="docutils literal"><span class="pre">-t</span></tt> (tag)
option for the <a class="reference external" href="../../man/patt">patt</a> command allows a new output spine to be generated.
This spine contains user-defined labels marking the beginning of each found
pattern. The labels can contain any user-defined text string such as
<tt class="docutils literal"><span class="pre">authentic</span> <span class="pre">cadence</span></tt>, <tt class="docutils literal"><span class="pre">episode</span></tt>, <tt class="docutils literal"><span class="pre">Motive</span> <span class="pre">3b</span></tt>, <tt class="docutils literal"><span class="pre">augmentation</span></tt>,
<tt class="docutils literal"><span class="pre">triplet</span> <span class="pre">figuration</span></tt>, or <tt class="docutils literal"><span class="pre">prolongation</span></tt>.</p>
<p>As we will see in <a class="reference external" href="../ch26">Chapter 26</a>, the contents of several spines can be
amalgamated to form a single spine. This means that the results for several
independent pattern searches can be assembled into a single &#8220;pattern&#8221; spine.
Several pattern spines may be created that related to patterns found at
different hierarchical levels, or patterns found using different search
methods. Of course, these pattern-spines themselves can be used as input to
further pattern searches thus providing unbounded possibilities for
searching for patterns of patterns.</p>
<p>Consider, for example, the following template for the <a class="reference external" href="../../man/pattern">pattern</a>
command:</p>
</div></blockquote>
<p>`` Theme 1 (tonic)+
Bridge*
Theme 2 (tonic)+
Coda?``</p>
<blockquote>
<div>The template reads &#8220;one or more instances of <tt class="docutils literal"><span class="pre">Theme</span> <span class="pre">1</span> <span class="pre">(tonic)</span></tt>, followed
by zero or more instances of <tt class="docutils literal"><span class="pre">Bridge</span></tt>, followed by one or more instances
of <tt class="docutils literal"><span class="pre">Theme</span> <span class="pre">2</span> <span class="pre">(tonic)</span></tt>, followed by zero or one instance of <tt class="docutils literal"><span class="pre">Coda</span></tt>.&#8221; This
template might be used by <a class="reference external" href="../../man/pattern">pattern</a> to identify a Recapitulation. Together
with outputs from parallel searches for <a href="#id24"><span class="problematic" id="id25">`</span></a>Exposition&#8217; and <a href="#id26"><span class="problematic" id="id27">`</span></a>Development&#8217; the
results of a <a href="#id28"><span class="problematic" id="id29">`</span></a>Recapitulation&#8217; search might similarly be amalgamated and used
as an input for a higher level search for works exhibiting a sonata-allegro
structure.</div></blockquote>
</div>
<div class="section" id="reprise">
<h2>Reprise<a class="headerlink" href="#reprise" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>In this chapter and previous chapters we have identified several search-
related tools, including the UNIX <a class="reference external" href="http://en.wikipedia.org/wiki/Grep">grep</a> and <a class="reference external" href="http://en.wikipedia.org/wiki/Egrep#Variations">egrep</a> commands as well as
the Humdrum <a class="reference external" href="../../man/patt">patt</a> and <a class="reference external" href="../../man/pattern">pattern</a> commands. Each of these tools has
different strengths and weaknesses and it is not always clear which tool is
best for a given task. When searching, don&#8217;t forget to consider how</div></blockquote>
<dl class="docutils">
<dt><a class="reference external" href="../../man/context">context</a>, <a class="reference external" href="../../man/humsed">humsed</a>, <a class="reference external" href="../../man/rid">rid</a> and other tools might facilitate</dt>
<dd>the searching task. In future chapters will will consider how &#8220;similarity&#8221;
tools such as <a class="reference external" href="../../man/correl">correl</a> and <a class="reference external" href="../../man/simil">simil</a> can contribute to more
sophisticated pattern searches.</dd>
</dl>
</div>
</div>


          </div>
          <footer>
  <hr/>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <center><a href="../ch22/" class="btn btn-neutral float-right" title="Chapter 22: Classifying">Next <span class="fa fa-arrow-circle-right"></span></a></center>
      
      
        <a href="../ch20/" class="btn btn-neutral" title="Chapter 20: Strophes, Verses, and Repeats"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
      
             <center><a href="../../_sources/guide/ch21.txt" rel="nofollow"> View page source</a></center>
      
    </div>
  



  <div role="contentinfo">
    <p>
    </p>
  </div>


</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
   
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-52162357-1', 'humdrum.org');
  ga('send', 'pageview');
</script>



</body>
</html>