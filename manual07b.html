

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Development Reference &mdash; humdrum-tools 1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="humdrum-tools 1 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">humdrum-tools 1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <img alt="" src="../HumdrumIcon.gif" />
<img alt="Humdrum" src="../HumdrumHeader.gif" />
<img alt="" src="../HumdrumSpacer.gif" />
<div class="section" id="development-reference">
<h1><em>Development Reference</em><a class="headerlink" href="#development-reference" title="Permalink to this headline">¶</a></h1>
</div>
<hr class="docutils" />
<div class="section" id="humdrum-software-development">
<h1>Humdrum Software Development<a class="headerlink" href="#humdrum-software-development" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<p>The Humdrum Toolkit is necessarily limited in scope and there are many
functions that users will wish to add. In developing adjunct software tools,
it is imperative that the software conform to the following design
conventions:</p>
<ol class="arabic">
<li><p class="first">Programs should be general-purpose and adapt to a wide variety of
input circumstances.</p>
</li>
<li><p class="first">If possible, programs should be able to process any Humdrum input
rather than be limited to a given type of input interpretation.</p>
</li>
<li><p class="first">Command names should be limited to 8 characters in length in order to
ensure portability to DOS systems.</p>
</li>
<li><p class="first">Command names should preferably be the same as the output
interpretation produced by the command.</p>
</li>
<li><p class="first">Command names should not be unduly abbreviated since infrequently
used software is less easily remembered than frequently used system
commands.</p>
</li>
<li><p class="first">The command syntax should conform to standard POSIX conventions.</p>
</li>
<li><p class="first">Errors and warnings should be prefaced by giving the name of the
program or command which issues the error message. e.g.</p>
<p>&gt; `` vox: ERROR: voice 3 begins with a null token. ``</p>
</li>
<li><p class="first">Errors messages should be sent to &#8220;stderr&#8221; rather than to the
standard output.</p>
</li>
<li><p class="first">Wherever possible, <a href="#id1"><span class="problematic" id="id2">`</span></a>filter&#8217; programs should produce outputs that are
identical in structure to the input. More specifically, input line
numbers should correspond to output line numbers &#8211; where appropriate.</p>
</li>
<li><p class="first">Comments, interpretations, barlines, and double barlines should be
echoed in the output as the default condition (except in the case of
formatted non-Humdrum outputs).</p>
</li>
<li><p class="first">For many programs, the user should be able to skip the processing of
certain types of tokens (such as barlines) by specifying a .B &#8220;-s&#8221; flag
&#8211; followed by a user-defined regular expression. Tokens matching the
regular expression should be echoed unprocessed in the output stream.</p>
</li>
<li><p class="first">Programs should handle spine-path changes in a fashion appropriate to
the nature of the command.</p>
</li>
<li><p class="first">Comments and interpretations should be identified by explicitly
matching the exclamation mark or asterisk in the <em>first</em> column of the
input data token. Exclamation marks and asterisks are legitimate data
signifiers when not occurring in the first column of an input token.</p>
</li>
<li><p class="first">Where possible, outputs should <em>not</em> be formatted with descriptive
labels etc. The preferred output format is to have all outputs conform to
the Humdrum syntax. This ensures that all outputs can themselves be used
as inputs to other Humdrum programs.</p>
</li>
<li><p class="first">Programs should generally avoid assumptions concerning context-
dependent inputs. Inputs should be assumed to be context-free.</p>
</li>
<li><p class="first">Programs should be able to handle inputs with unexpected user
extensions or representational addenda &#8211; such as the presence of
spurious or unknown characters.</p>
</li>
<li><p class="first">Programs that search or examine inputs for certain features,
properties, or errors should return a <em>null</em> output if nothing is found.
Messages indicating that <a href="#id3"><span class="problematic" id="id4">`</span></a>nothing was found&#8217; should be avoided. &#8220;Silence
is golden.&#8221;</p>
</li>
</ol>
</div>
<div class="section" id="standard-program-skeleton">
<h1>Standard Program Skeleton<a class="headerlink" href="#standard-program-skeleton" title="Permalink to this headline">¶</a></h1>
<p>Much of the Humdrum software was originally developed using the AWK
programming language. AWK was designed by <a class="reference external" href="manual.bibliog.html#Aho">Alfred Aho, Brian Kernighan, and
Peter Weinberger.</a> It is syntactically very similar to the C programming
language, but is easier to use and promotes better software productivity. AWK
provides powerful text manipulation features that make it admirably suited to
the creation of Humdrum software. AWK is also a very easy language to learn,
and is an excellent first language for novice programmers.</p>
<p>The Humdrum Toolkit includes programing skeletons that may provide a useful
starting place for software development using AWK. Two skeleton files are
provided with the toolkit: <a href="#id13"><span class="problematic" id="id14">`**skeleton.ksh**`_</span></a> and <a href="#id15"><span class="problematic" id="id16">`**skeleton.awk**`_</span></a>. The
kornshell file (<strong>.ksh</strong>) parses the command line, issues appropriate error
messages if the command is improperly invoked, displays a help screen if
necessary, and assembles the command parameters to invoke an awk script for
the command (<strong>.awk</strong>).</p>
<p>The <a href="#id17"><span class="problematic" id="id18">`**skeleton.awk**`_</span></a> skeleton contains a main loop that is normally
executed for each record of input. A series of useful functions are included
in the AWK skeleton program. These functions include:</p>
<ol class="arabic simple">
<li><strong>Parse_command.</strong> This function checks that the input passed from
the corresponding kornshell script for the command. The Parse_command
function contains a list of valid options and assigns the passed
parameters to the appropriate option variables.</li>
<li><strong>Store_indicators.</strong> This function allows the spine-path indicators
for the current record to be stored in the array <strong>path_indicator</strong> so
that they may be used later.</li>
<li><strong>Store_new_interps.</strong> This function stores the new interpretations
found in an interpretation record for each spine.</li>
<li><strong>Process_indicators.</strong> This function takes the spine-path indicators
that were stored in the array &#8216;path_indicator&#8217; in the function
&#8216;store_indicators&#8217; and manipulates the arrays &#8216;path_indicator&#8217; and
&#8216;current_interp&#8217; according to the contents of the array &#8216;path_indicator&#8217;.</li>
<li><strong>Ins_array_pos.</strong> This function inserts new positions in the arrays
&#8216;path_indicator&#8217;, &#8216;current_interp&#8217;, and &#8216;current_key&#8217; and copies elements
so that everything is preserved</li>
<li><strong>Del_array_pos.</strong> Performs the opposite of function &#8216;ins_array_pos&#8217;.</li>
<li><strong>Exchange_spines.</strong> This function exhanges two spines by exchanging
the corresponding elements in current_interp.</li>
</ol>
<hr class="docutils" />
<ul class="simple">
<li>` <a href="#id5"><span class="problematic" id="id6">**</span></a>Humdrum Toolkit Main Page**`_</li>
<li>` <a href="#id7"><span class="problematic" id="id8">**</span></a>Developer&#8217;s Guide Main Page**`_</li>
<li>` <a href="#id9"><span class="problematic" id="id10">**</span></a>Humdrum Toolkit User Guide**`_</li>
<li>` <a href="#id11"><span class="problematic" id="id12">**</span></a>Humdrum Toolkit Command Documentation**`_</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><em>Development Reference</em></a></li>
<li><a class="reference internal" href="#humdrum-software-development">Humdrum Software Development</a></li>
<li><a class="reference internal" href="#standard-program-skeleton">Standard Program Skeleton</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/manual07b.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">humdrum-tools 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Humdrum Community.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>